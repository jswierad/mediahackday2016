if(!Object.create){Object.create=function(o,properties){if(typeof o!=='object'&&typeof o!=='function')throw new TypeError('Object prototype may only be an Object: '+o);else if(o===null)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(typeof properties!='undefined')throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");function F(){}
F.prototype=o;return new F();};}
if(!Object.keys){Object.keys=function(obj){var keys=[];for(var i in obj){if(obj.hasOwnProperty(i)){keys.push(i);}}
return keys;};}
if(typeof String.prototype.trim!=='function'){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,'');}}
if(!Array.isArray){Array.isArray=function(arg){return Object.prototype.toString.call(arg)==='[object Array]';};}
(function(){if(!Event.prototype.preventDefault){Event.prototype.preventDefault=function(){this.returnValue=false;};}
if(!Event.prototype.stopPropagation){Event.prototype.stopPropagation=function(){this.cancelBubble=true;};}
if(!Element.prototype.addEventListener){var eventListeners=[];var addEventListener=function(type,listener){var self=this;var wrapper=function(e){e.target=e.srcElement;e.currentTarget=self;if(listener.handleEvent){listener.handleEvent(e);}else{listener.call(self,e);}};if(type=="DOMContentLoaded"){var wrapper2=function(e){if(document.readyState=="complete"){wrapper(e);}};document.attachEvent("onreadystatechange",wrapper2);eventListeners.push({object:this,type:type,listener:listener,wrapper:wrapper2});if(document.readyState=="complete"){var e=new Event();e.srcElement=window;wrapper2(e);}}else{this.attachEvent("on"+type,wrapper);eventListeners.push({object:this,type:type,listener:listener,wrapper:wrapper});}};var removeEventListener=function(type,listener){var counter=0;while(counter<eventListeners.length){var eventListener=eventListeners[counter];if(eventListener.object==this&&eventListener.type==type&&eventListener.listener==listener){if(type=="DOMContentLoaded"){this.detachEvent("onreadystatechange",eventListener.wrapper);}else{this.detachEvent("on"+type,eventListener.wrapper);}
eventListeners.splice(counter,1);break;}
++counter;}};Element.prototype.addEventListener=addEventListener;Element.prototype.removeEventListener=removeEventListener;if(HTMLDocument){HTMLDocument.prototype.addEventListener=addEventListener;HTMLDocument.prototype.removeEventListener=removeEventListener;}
if(Window){Window.prototype.addEventListener=addEventListener;Window.prototype.removeEventListener=removeEventListener;}}})();if(!Date.now){Date.now=function now(){return new Date().getTime();};}
(function(){var D=new Date('2011-06-02T09:34:29+02:00');if(!D||+D!==1307000069000){Date.fromISO=function(s){var day,tz,rx=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,p=rx.exec(s)||[];if(p[1]){day=p[1].split(/\D/);for(var i=0,L=day.length;i<L;i++){day[i]=parseInt(day[i],10)||0;};day[1]-=1;day=new Date(Date.UTC.apply(Date,day));if(!day.getDate())return NaN;if(p[5]){tz=(parseInt(p[5],10)*60);if(p[6])tz+=parseInt(p[6],10);if(p[4]=='+')tz*=-1;if(tz)day.setUTCMinutes(day.getUTCMinutes()+tz);}
return day;}
return NaN;}}
else{Date.fromISO=function(s){return new Date(s);}}})();function StorageAdapter(name,type,options){var self=this,_storagetype=type?type.replace(/[Ss]torage$/i,'')+'Storage':'sessionStorage',_isStorageAvailable=(function(storagetype){if(typeof Modernizr!=='undefined'){return Modernizr[storagetype.toLowerCase()]}else{try{var storage=window[storagetype],x='__storage_test__';storage.setItem(x,x);storage.removeItem(x);return true;}catch(e){return false;}}})(_storagetype),_slug=(function(str){return encodeURIComponent(str).replace(/[!'()*]/g,function(c){return'%'+c.charCodeAt(0).toString(16);});})(name),options=options||{},_ttl=options['ttl']||options['cookie_duration']||1;_ttl=(function(ttl_string){var ttl_arr=typeof ttl_string==='string'?ttl_string.replace(/\s/gi,'').match(/\d+(?:\D)/gi):"1d",ms=0,day=864e5;if(typeof ttl_string==='number'){return ttl_string*day;}
for(var i=0,m=ttl_arr.length;i<m;i++){var arr=ttl_arr[i].split(/(:?\D)/),count=parseInt(arr[0],10),unit=arr[1];switch(unit){case'Y':ms+=3.154e10*count;break;case'M':ms+=2.628e9*count;break;case'w':ms+=6048e5*count;break;case'd':ms+=864e5*count;break;case'h':ms+=36e5*count;break;case'm':ms+=6e4*count;break;case's':ms+=1e3*count;break;}}
return ms;})(_ttl);if(!name||!_slug||_slug==='undefined'||!(/^(local|session)Storage$/).test(_storagetype)){NU.error('Storageadapter: invalid parameters: ',{name:name,type:type,options:options});return function(){return false;};}
self.get=function(nolog){var raw_data='',store='';if(_isStorageAvailable){if(!nolog){NU.log('Storageadapter: retrieving data for '+_slug+' - using '+_storagetype);}
raw_data=window[_storagetype][_slug];store=!!raw_data&&JSON.parse(window[_storagetype][_slug]);if(store&&+Date.fromISO(store.expires)>=Date.now()){return store.data;}else if(store&&Date.parse(store.expires)<Date.now()){self.clear();}
return false;}else{if(!nolog){NU.log('Storageadapter: retrieving data for '+_slug+' - using cookie');}
raw_data=$.cookie(_slug);return!!raw_data&&JSON.parse(raw_data);}};self.set=function(data){var expires=new Date();expires.setMilliseconds(expires.getMilliseconds()+_ttl);if(_isStorageAvailable){NU.log('Storageadapter: storing data for '+_slug+' - using '+_storagetype);window[_storagetype][_slug]=JSON.stringify({expires:expires,data:data});}else{NU.log('Storageadapter: storing data for '+_slug+' - using cookie');if(_storagetype='localStorage'){$.cookie(_slug,JSON.stringify(data),{expires:expires,path:'/',secure:true});}else{$.cookie(_slug,JSON.stringify(data),{path:'/'});}}
return self.get(true);};self.clear=function(){if(_isStorageAvailable){window[_storagetype][_slug]='';delete window[_storagetype][_slug];}};return function(argument){if(typeof argument!=='undefined'){return self.set(argument);}else{return self.get();}};}
function AbTest(name,scenarios,storagetype,duration){var self=this,_scenario_identifier_fields=['name','slug','id','title'],_scenarios=scenarios,_getRandomInt=function(min,max){if('undefined'===typeof max){max=arguments[0];min=0;}
return Math.floor(Math.random()*(max-min))+min;},_createIndex=function(){var randomInt=_getRandomInt(_scenarios.length);_store(randomInt);NU.log('AbTest: Sorted client in scenario: '+randomInt);return randomInt;},_store=new StorageAdapter('NU.ABtest.'+name,storagetype||'local',{duration:duration||'2Y'}),_retrievedData=_store(),_retrievedFromCache='number'===typeof _retrievedData,_index=_retrievedFromCache?parseInt(_retrievedData,10):_createIndex(),_trackABtest=function(){var _scenario_name=_index;if('string'===typeof scenarios[_index]||'number'===typeof scenarios[_index]){_scenario_name=scenarios[_index];}else if(typeof scenarios[_index]=='object'){for(var i=0,m=_scenario_identifier_fields.length;i<m;i++){if('string'===typeof scenarios[_index][_scenario_identifier_fields[i]]){_scenario_name=scenarios[_index][_scenario_identifier_fields[i]];break;}}}
NU.TrackEvent.AddToABtestGroup(['NU.ABtest',name,_scenario_name].join('.'));};self.get=function(){return _scenarios[_index];};self.reroll=function(index){index=parseInt(index,10);if(!!index){var maxlength=_scenarios.length;while(index>=maxlength){index-=maxlength;}
_index=_store(index);}else{_index=_createIndex();}
_trackABtest();return self.get();};self.update=function(scenarios){if('string'!==typeof scenarios&&'undefined'!==scenarios.length){_scenarios=scenarios;}else if(arguments.length>0){_scenarios=arguments;}else{return false;}
self.reroll();return self.get();};if(!_retrievedFromCache){_trackABtest();}
return self;}/*! Hammer.JS - v2.0.6 - 2016-01-06
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the  license */
(function(window,document,exportName,undefined){'use strict';var VENDOR_PREFIXES=['','webkit','Moz','MS','ms','o'];var TEST_ELEMENT=document.createElement('div');var TYPE_FUNCTION='function';var round=Math.round;var abs=Math.abs;var now=Date.now;function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout);}
function invokeArrayArg(arg,fn,context){if(Array.isArray(arg)){each(arg,context[fn],context);return true;}
return false;}
function each(obj,iterator,context){var i;if(!obj){return;}
if(obj.forEach){obj.forEach(iterator,context);}else if(obj.length!==undefined){i=0;while(i<obj.length){iterator.call(context,obj[i],i,obj);i++;}}else{for(i in obj){obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj);}}}
function deprecate(method,name,message){var deprecationMessage='DEPRECATED METHOD: '+name+'\n'+message+' AT \n';return function(){var e=new Error('get-stack-trace');var stack=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,'').replace(/^\s+at\s+/gm,'').replace(/^Object.<anonymous>\s*\(/gm,'{anonymous}()@'):'Unknown Stack Trace';var log=window.console&&(window.console.warn||window.console.log);if(log){log.call(window.console,deprecationMessage,stack);}
return method.apply(this,arguments);};}
var assign;if(typeof Object.assign!=='function'){assign=function assign(target){if(target===undefined||target===null){throw new TypeError('Cannot convert undefined or null to object');}
var output=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&source!==null){for(var nextKey in source){if(source.hasOwnProperty(nextKey)){output[nextKey]=source[nextKey];}}}}
return output;};}else{assign=Object.assign;}
var extend=deprecate(function extend(dest,src,merge){var keys=Object.keys(src);var i=0;while(i<keys.length){if(!merge||(merge&&dest[keys[i]]===undefined)){dest[keys[i]]=src[keys[i]];}
i++;}
return dest;},'extend','Use `assign`.');var merge=deprecate(function merge(dest,src){return extend(dest,src,true);},'merge','Use `assign`.');function inherit(child,base,properties){var baseP=base.prototype,childP;childP=child.prototype=Object.create(baseP);childP.constructor=child;childP._super=baseP;if(properties){assign(childP,properties);}}
function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments);};}
function boolOrFn(val,args){if(typeof val==TYPE_FUNCTION){return val.apply(args?args[0]||undefined:undefined,args);}
return val;}
function ifUndefined(val1,val2){return(val1===undefined)?val2:val1;}
function addEventListeners(target,types,handler){each(splitStr(types),function(type){target.addEventListener(type,handler,false);});}
function removeEventListeners(target,types,handler){each(splitStr(types),function(type){target.removeEventListener(type,handler,false);});}
function hasParent(node,parent){while(node){if(node==parent){return true;}
node=node.parentNode;}
return false;}
function inStr(str,find){return str.indexOf(find)>-1;}
function splitStr(str){return str.trim().split(/\s+/g);}
function inArray(src,find,findByKey){if(src.indexOf&&!findByKey){return src.indexOf(find);}else{var i=0;while(i<src.length){if((findByKey&&src[i][findByKey]==find)||(!findByKey&&src[i]===find)){return i;}
i++;}
return-1;}}
function toArray(obj){return Array.prototype.slice.call(obj,0);}
function uniqueArray(src,key,sort){var results=[];var values=[];var i=0;while(i<src.length){var val=key?src[i][key]:src[i];if(inArray(values,val)<0){results.push(src[i]);}
values[i]=val;i++;}
if(sort){if(!key){results=results.sort();}else{results=results.sort(function sortUniqueArray(a,b){return a[key]>b[key];});}}
return results;}
function prefixed(obj,property){var prefix,prop;var camelProp=property[0].toUpperCase()+property.slice(1);var i=0;while(i<VENDOR_PREFIXES.length){prefix=VENDOR_PREFIXES[i];prop=(prefix)?prefix+camelProp:property;if(prop in obj){return prop;}
i++;}
return undefined;}
var _uniqueId=1;function uniqueId(){return _uniqueId++;}
function getWindowForElement(element){var doc=element.ownerDocument||element;return(doc.defaultView||doc.parentWindow||window);}
var MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;var SUPPORT_TOUCH=('ontouchstart'in window);var SUPPORT_POINTER_EVENTS=prefixed(window,'PointerEvent')!==undefined;var SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&MOBILE_REGEX.test(navigator.userAgent);var INPUT_TYPE_TOUCH='touch';var INPUT_TYPE_PEN='pen';var INPUT_TYPE_MOUSE='mouse';var INPUT_TYPE_KINECT='kinect';var COMPUTE_INTERVAL=25;var INPUT_START=1;var INPUT_MOVE=2;var INPUT_END=4;var INPUT_CANCEL=8;var DIRECTION_NONE=1;var DIRECTION_LEFT=2;var DIRECTION_RIGHT=4;var DIRECTION_UP=8;var DIRECTION_DOWN=16;var DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT;var DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN;var DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL;var PROPS_XY=['x','y'];var PROPS_CLIENT_XY=['clientX','clientY'];function Input(manager,callback){var self=this;this.manager=manager;this.callback=callback;this.element=manager.element;this.target=manager.options.inputTarget;this.domHandler=function(ev){if(boolOrFn(manager.options.enable,[manager])){self.handler(ev);}};this.init();}
Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);}};function createInputInstance(manager){var Type;var inputClass=manager.options.inputClass;if(inputClass){Type=inputClass;}else if(SUPPORT_POINTER_EVENTS){Type=PointerEventInput;}else if(SUPPORT_ONLY_TOUCH){Type=TouchInput;}else if(!SUPPORT_TOUCH){Type=MouseInput;}else{Type=TouchMouseInput;}
return new(Type)(manager,inputHandler);}
function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length;var changedPointersLen=input.changedPointers.length;var isFirst=(eventType&INPUT_START&&(pointersLen-changedPointersLen===0));var isFinal=(eventType&(INPUT_END|INPUT_CANCEL)&&(pointersLen-changedPointersLen===0));input.isFirst=!!isFirst;input.isFinal=!!isFinal;if(isFirst){manager.session={};}
input.eventType=eventType;computeInputData(manager,input);manager.emit('hammer.input',input);manager.recognize(input);manager.session.prevInput=input;}
function computeInputData(manager,input){var session=manager.session;var pointers=input.pointers;var pointersLength=pointers.length;if(!session.firstInput){session.firstInput=simpleCloneInputData(input);}
if(pointersLength>1&&!session.firstMultiple){session.firstMultiple=simpleCloneInputData(input);}else if(pointersLength===1){session.firstMultiple=false;}
var firstInput=session.firstInput;var firstMultiple=session.firstMultiple;var offsetCenter=firstMultiple?firstMultiple.center:firstInput.center;var center=input.center=getCenter(pointers);input.timeStamp=now();input.deltaTime=input.timeStamp-firstInput.timeStamp;input.angle=getAngle(offsetCenter,center);input.distance=getDistance(offsetCenter,center);computeDeltaXY(session,input);input.offsetDirection=getDirection(input.deltaX,input.deltaY);var overallVelocity=getVelocity(input.deltaTime,input.deltaX,input.deltaY);input.overallVelocityX=overallVelocity.x;input.overallVelocityY=overallVelocity.y;input.overallVelocity=(abs(overallVelocity.x)>abs(overallVelocity.y))?overallVelocity.x:overallVelocity.y;input.scale=firstMultiple?getScale(firstMultiple.pointers,pointers):1;input.rotation=firstMultiple?getRotation(firstMultiple.pointers,pointers):0;input.maxPointers=!session.prevInput?input.pointers.length:((input.pointers.length>session.prevInput.maxPointers)?input.pointers.length:session.prevInput.maxPointers);computeIntervalInputData(session,input);var target=manager.element;if(hasParent(input.srcEvent.target,target)){target=input.srcEvent.target;}
input.target=target;}
function computeDeltaXY(session,input){var center=input.center;var offset=session.offsetDelta||{};var prevDelta=session.prevDelta||{};var prevInput=session.prevInput||{};if(input.eventType===INPUT_START||prevInput.eventType===INPUT_END){prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0};offset=session.offsetDelta={x:center.x,y:center.y};}
input.deltaX=prevDelta.x+(center.x-offset.x);input.deltaY=prevDelta.y+(center.y-offset.y);}
function computeIntervalInputData(session,input){var last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp,velocity,velocityX,velocityY,direction;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=input.deltaX-last.deltaX;var deltaY=input.deltaY-last.deltaY;var v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x;velocityY=v.y;velocity=(abs(v.x)>abs(v.y))?v.x:v.y;direction=getDirection(deltaX,deltaY);session.lastInterval=input;}else{velocity=last.velocity;velocityX=last.velocityX;velocityY=last.velocityY;direction=last.direction;}
input.velocity=velocity;input.velocityX=velocityX;input.velocityY=velocityY;input.direction=direction;}
function simpleCloneInputData(input){var pointers=[];var i=0;while(i<input.pointers.length){pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)};i++;}
return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY};}
function getCenter(pointers){var pointersLength=pointers.length;if(pointersLength===1){return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};}
var x=0,y=0,i=0;while(i<pointersLength){x+=pointers[i].clientX;y+=pointers[i].clientY;i++;}
return{x:round(x/pointersLength),y:round(y/pointersLength)};}
function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0};}
function getDirection(x,y){if(x===y){return DIRECTION_NONE;}
if(abs(x)>=abs(y)){return x<0?DIRECTION_LEFT:DIRECTION_RIGHT;}
return y<0?DIRECTION_UP:DIRECTION_DOWN;}
function getDistance(p1,p2,props){if(!props){props=PROPS_XY;}
var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt((x*x)+(y*y));}
function getAngle(p1,p2,props){if(!props){props=PROPS_XY;}
var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.atan2(y,x)*180/Math.PI;}
function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)+getAngle(start[1],start[0],PROPS_CLIENT_XY);}
function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY);}
var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END};var MOUSE_ELEMENT_EVENTS='mousedown';var MOUSE_WINDOW_EVENTS='mousemove mouseup';function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS;this.evWin=MOUSE_WINDOW_EVENTS;this.allow=true;this.pressed=false;Input.apply(this,arguments);}
inherit(MouseInput,Input,{handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];if(eventType&INPUT_START&&ev.button===0){this.pressed=true;}
if(eventType&INPUT_MOVE&&ev.which!==1){eventType=INPUT_END;}
if(!this.pressed||!this.allow){return;}
if(eventType&INPUT_END){this.pressed=false;}
this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:INPUT_TYPE_MOUSE,srcEvent:ev});}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL};var IE10_POINTER_TYPE_ENUM={2:INPUT_TYPE_TOUCH,3:INPUT_TYPE_PEN,4:INPUT_TYPE_MOUSE,5:INPUT_TYPE_KINECT};var POINTER_ELEMENT_EVENTS='pointerdown';var POINTER_WINDOW_EVENTS='pointermove pointerup pointercancel';if(window.MSPointerEvent&&!window.PointerEvent){POINTER_ELEMENT_EVENTS='MSPointerDown';POINTER_WINDOW_EVENTS='MSPointerMove MSPointerUp MSPointerCancel';}
function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS;this.evWin=POINTER_WINDOW_EVENTS;Input.apply(this,arguments);this.store=(this.manager.session.pointerEvents=[]);}
inherit(PointerEventInput,Input,{handler:function PEhandler(ev){var store=this.store;var removePointer=false;var eventTypeNormalized=ev.type.toLowerCase().replace('ms','');var eventType=POINTER_INPUT_MAP[eventTypeNormalized];var pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType;var isTouch=(pointerType==INPUT_TYPE_TOUCH);var storeIndex=inArray(store,ev.pointerId,'pointerId');if(eventType&INPUT_START&&(ev.button===0||isTouch)){if(storeIndex<0){store.push(ev);storeIndex=store.length-1;}}else if(eventType&(INPUT_END|INPUT_CANCEL)){removePointer=true;}
if(storeIndex<0){return;}
store[storeIndex]=ev;this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev});if(removePointer){store.splice(storeIndex,1);}}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var SINGLE_TOUCH_TARGET_EVENTS='touchstart';var SINGLE_TOUCH_WINDOW_EVENTS='touchstart touchmove touchend touchcancel';function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS;this.evWin=SINGLE_TOUCH_WINDOW_EVENTS;this.started=false;Input.apply(this,arguments);}
inherit(SingleTouchInput,Input,{handler:function TEhandler(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(type===INPUT_START){this.started=true;}
if(!this.started){return;}
var touches=normalizeSingleTouches.call(this,ev,type);if(type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length===0){this.started=false;}
this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});function normalizeSingleTouches(ev,type){var all=toArray(ev.touches);var changed=toArray(ev.changedTouches);if(type&(INPUT_END|INPUT_CANCEL)){all=uniqueArray(all.concat(changed),'identifier',true);}
return[all,changed];}
var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var TOUCH_TARGET_EVENTS='touchstart touchmove touchend touchcancel';function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS;this.targetIds={};Input.apply(this,arguments);}
inherit(TouchInput,Input,{handler:function MTEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type];var touches=getTouches.call(this,ev,type);if(!touches){return;}
this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});function getTouches(ev,type){var allTouches=toArray(ev.touches);var targetIds=this.targetIds;if(type&(INPUT_START|INPUT_MOVE)&&allTouches.length===1){targetIds[allTouches[0].identifier]=true;return[allTouches,allTouches];}
var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;targetTouches=allTouches.filter(function(touch){return hasParent(touch.target,target);});if(type===INPUT_START){i=0;while(i<targetTouches.length){targetIds[targetTouches[i].identifier]=true;i++;}}
i=0;while(i<changedTouches.length){if(targetIds[changedTouches[i].identifier]){changedTargetTouches.push(changedTouches[i]);}
if(type&(INPUT_END|INPUT_CANCEL)){delete targetIds[changedTouches[i].identifier];}
i++;}
if(!changedTargetTouches.length){return;}
return[uniqueArray(targetTouches.concat(changedTargetTouches),'identifier',true),changedTargetTouches];}
function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler);this.mouse=new MouseInput(this.manager,handler);}
inherit(TouchMouseInput,Input,{handler:function TMEhandler(manager,inputEvent,inputData){var isTouch=(inputData.pointerType==INPUT_TYPE_TOUCH),isMouse=(inputData.pointerType==INPUT_TYPE_MOUSE);if(isTouch){this.mouse.allow=false;}else if(isMouse&&!this.mouse.allow){return;}
if(inputEvent&(INPUT_END|INPUT_CANCEL)){this.mouse.allow=true;}
this.callback(manager,inputEvent,inputData);},destroy:function destroy(){this.touch.destroy();this.mouse.destroy();}});var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,'touchAction');var NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined;var TOUCH_ACTION_COMPUTE='compute';var TOUCH_ACTION_AUTO='auto';var TOUCH_ACTION_MANIPULATION='manipulation';var TOUCH_ACTION_NONE='none';var TOUCH_ACTION_PAN_X='pan-x';var TOUCH_ACTION_PAN_Y='pan-y';function TouchAction(manager,value){this.manager=manager;this.set(value);}
TouchAction.prototype={set:function(value){if(value==TOUCH_ACTION_COMPUTE){value=this.compute();}
if(NATIVE_TOUCH_ACTION&&this.manager.element.style){this.manager.element.style[PREFIXED_TOUCH_ACTION]=value;}
this.actions=value.toLowerCase().trim();},update:function(){this.set(this.manager.options.touchAction);},compute:function(){var actions=[];each(this.manager.recognizers,function(recognizer){if(boolOrFn(recognizer.options.enable,[recognizer])){actions=actions.concat(recognizer.getTouchAction());}});return cleanTouchActions(actions.join(' '));},preventDefaults:function(input){if(NATIVE_TOUCH_ACTION){return;}
var srcEvent=input.srcEvent;var direction=input.offsetDirection;if(this.manager.session.prevented){srcEvent.preventDefault();return;}
var actions=this.actions;var hasNone=inStr(actions,TOUCH_ACTION_NONE);var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);if(hasNone){var isTapPointer=input.pointers.length===1;var isTapMovement=input.distance<2;var isTapTouchTime=input.deltaTime<250;if(isTapPointer&&isTapMovement&&isTapTouchTime){return;}}
if(hasPanX&&hasPanY){return;}
if(hasNone||(hasPanY&&direction&DIRECTION_HORIZONTAL)||(hasPanX&&direction&DIRECTION_VERTICAL)){return this.preventSrc(srcEvent);}},preventSrc:function(srcEvent){this.manager.session.prevented=true;srcEvent.preventDefault();}};function cleanTouchActions(actions){if(inStr(actions,TOUCH_ACTION_NONE)){return TOUCH_ACTION_NONE;}
var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);if(hasPanX&&hasPanY){return TOUCH_ACTION_NONE;}
if(hasPanX||hasPanY){return hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y;}
if(inStr(actions,TOUCH_ACTION_MANIPULATION)){return TOUCH_ACTION_MANIPULATION;}
return TOUCH_ACTION_AUTO;}
var STATE_POSSIBLE=1;var STATE_BEGAN=2;var STATE_CHANGED=4;var STATE_ENDED=8;var STATE_RECOGNIZED=STATE_ENDED;var STATE_CANCELLED=16;var STATE_FAILED=32;function Recognizer(options){this.options=assign({},this.defaults,options||{});this.id=uniqueId();this.manager=null;this.options.enable=ifUndefined(this.options.enable,true);this.state=STATE_POSSIBLE;this.simultaneous={};this.requireFail=[];}
Recognizer.prototype={defaults:{},set:function(options){assign(this.options,options);this.manager&&this.manager.touchAction.update();return this;},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'recognizeWith',this)){return this;}
var simultaneous=this.simultaneous;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(!simultaneous[otherRecognizer.id]){simultaneous[otherRecognizer.id]=otherRecognizer;otherRecognizer.recognizeWith(this);}
return this;},dropRecognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRecognizeWith',this)){return this;}
otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);delete this.simultaneous[otherRecognizer.id];return this;},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'requireFailure',this)){return this;}
var requireFail=this.requireFail;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(inArray(requireFail,otherRecognizer)===-1){requireFail.push(otherRecognizer);otherRecognizer.requireFailure(this);}
return this;},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRequireFailure',this)){return this;}
otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);if(index>-1){this.requireFail.splice(index,1);}
return this;},hasRequireFailures:function(){return this.requireFail.length>0;},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id];},emit:function(input){var self=this;var state=this.state;function emit(event){self.manager.emit(event,input);}
if(state<STATE_ENDED){emit(self.options.event+stateStr(state));}
emit(self.options.event);if(input.additionalEvent){emit(input.additionalEvent);}
if(state>=STATE_ENDED){emit(self.options.event+stateStr(state));}},tryEmit:function(input){if(this.canEmit()){return this.emit(input);}
this.state=STATE_FAILED;},canEmit:function(){var i=0;while(i<this.requireFail.length){if(!(this.requireFail[i].state&(STATE_FAILED|STATE_POSSIBLE))){return false;}
i++;}
return true;},recognize:function(inputData){var inputDataClone=assign({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone])){this.reset();this.state=STATE_FAILED;return;}
if(this.state&(STATE_RECOGNIZED|STATE_CANCELLED|STATE_FAILED)){this.state=STATE_POSSIBLE;}
this.state=this.process(inputDataClone);if(this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)){this.tryEmit(inputDataClone);}},process:function(inputData){},getTouchAction:function(){},reset:function(){}};function stateStr(state){if(state&STATE_CANCELLED){return'cancel';}else if(state&STATE_ENDED){return'end';}else if(state&STATE_CHANGED){return'move';}else if(state&STATE_BEGAN){return'start';}
return'';}
function directionStr(direction){if(direction==DIRECTION_DOWN){return'down';}else if(direction==DIRECTION_UP){return'up';}else if(direction==DIRECTION_LEFT){return'left';}else if(direction==DIRECTION_RIGHT){return'right';}
return'';}
function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;if(manager){return manager.get(otherRecognizer);}
return otherRecognizer;}
function AttrRecognizer(){Recognizer.apply(this,arguments);}
inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return optionPointers===0||input.pointers.length===optionPointers;},process:function(input){var state=this.state;var eventType=input.eventType;var isRecognized=state&(STATE_BEGAN|STATE_CHANGED);var isValid=this.attrTest(input);if(isRecognized&&(eventType&INPUT_CANCEL||!isValid)){return state|STATE_CANCELLED;}else if(isRecognized||isValid){if(eventType&INPUT_END){return state|STATE_ENDED;}else if(!(state&STATE_BEGAN)){return STATE_BEGAN;}
return state|STATE_CHANGED;}
return STATE_FAILED;}});function PanRecognizer(){AttrRecognizer.apply(this,arguments);this.pX=null;this.pY=null;}
inherit(PanRecognizer,AttrRecognizer,{defaults:{event:'pan',threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction;var actions=[];if(direction&DIRECTION_HORIZONTAL){actions.push(TOUCH_ACTION_PAN_Y);}
if(direction&DIRECTION_VERTICAL){actions.push(TOUCH_ACTION_PAN_X);}
return actions;},directionTest:function(input){var options=this.options;var hasMoved=true;var distance=input.distance;var direction=input.direction;var x=input.deltaX;var y=input.deltaY;if(!(direction&options.direction)){if(options.direction&DIRECTION_HORIZONTAL){direction=(x===0)?DIRECTION_NONE:(x<0)?DIRECTION_LEFT:DIRECTION_RIGHT;hasMoved=x!=this.pX;distance=Math.abs(input.deltaX);}else{direction=(y===0)?DIRECTION_NONE:(y<0)?DIRECTION_UP:DIRECTION_DOWN;hasMoved=y!=this.pY;distance=Math.abs(input.deltaY);}}
input.direction=direction;return hasMoved&&distance>options.threshold&&direction&options.direction;},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||(!(this.state&STATE_BEGAN)&&this.directionTest(input)));},emit:function(input){this.pX=input.deltaX;this.pY=input.deltaY;var direction=directionStr(input.direction);if(direction){input.additionalEvent=this.options.event+direction;}
this._super.emit.call(this,input);}});function PinchRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:'pinch',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN);},emit:function(input){if(input.scale!==1){var inOut=input.scale<1?'in':'out';input.additionalEvent=this.options.event+inOut;}
this._super.emit.call(this,input);}});function PressRecognizer(){Recognizer.apply(this,arguments);this._timer=null;this._input=null;}
inherit(PressRecognizer,Recognizer,{defaults:{event:'press',pointers:1,time:251,threshold:9},getTouchAction:function(){return[TOUCH_ACTION_AUTO];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTime=input.deltaTime>options.time;this._input=input;if(!validMovement||!validPointers||(input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime)){this.reset();}else if(input.eventType&INPUT_START){this.reset();this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.time,this);}else if(input.eventType&INPUT_END){return STATE_RECOGNIZED;}
return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(input){if(this.state!==STATE_RECOGNIZED){return;}
if(input&&(input.eventType&INPUT_END)){this.manager.emit(this.options.event+'up',input);}else{this._input.timeStamp=now();this.manager.emit(this.options.event,this._input);}}});function RotateRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:'rotate',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN);}});function SwipeRecognizer(){AttrRecognizer.apply(this,arguments);}
inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:'swipe',threshold:10,velocity:0.3,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this);},attrTest:function(input){var direction=this.options.direction;var velocity;if(direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)){velocity=input.overallVelocity;}else if(direction&DIRECTION_HORIZONTAL){velocity=input.overallVelocityX;}else if(direction&DIRECTION_VERTICAL){velocity=input.overallVelocityY;}
return this._super.attrTest.call(this,input)&&direction&input.offsetDirection&&input.distance>this.options.threshold&&input.maxPointers==this.options.pointers&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END;},emit:function(input){var direction=directionStr(input.offsetDirection);if(direction){this.manager.emit(this.options.event+direction,input);}
this.manager.emit(this.options.event,input);}});function TapRecognizer(){Recognizer.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0;}
inherit(TapRecognizer,Recognizer,{defaults:{event:'tap',pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTouchTime=input.deltaTime<options.time;this.reset();if((input.eventType&INPUT_START)&&(this.count===0)){return this.failTimeout();}
if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END){return this.failTimeout();}
var validInterval=this.pTime?(input.timeStamp-this.pTime<options.interval):true;var validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;this.pTime=input.timeStamp;this.pCenter=input.center;if(!validMultiTap||!validInterval){this.count=1;}else{this.count+=1;}
this._input=input;var tapCount=this.count%options.taps;if(tapCount===0){if(!this.hasRequireFailures()){return STATE_RECOGNIZED;}else{this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.interval,this);return STATE_BEGAN;}}}
return STATE_FAILED;},failTimeout:function(){this._timer=setTimeoutContext(function(){this.state=STATE_FAILED;},this.options.interval,this);return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(){if(this.state==STATE_RECOGNIZED){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input);}}});function Hammer(element,options){options=options||{};options.recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset);return new Manager(element,options);}
Hammer.VERSION='2.0.6';Hammer.defaults={domEvents:false,touchAction:TOUCH_ACTION_COMPUTE,enable:true,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:false}],[PinchRecognizer,{enable:false},['rotate']],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},['swipe']],[TapRecognizer],[TapRecognizer,{event:'doubletap',taps:2},['tap']],[PressRecognizer]],cssProps:{userSelect:'none',touchSelect:'none',touchCallout:'none',contentZooming:'none',userDrag:'none',tapHighlightColor:'rgba(0,0,0,0)'}};var STOP=1;var FORCED_STOP=2;function Manager(element,options){this.options=assign({},Hammer.defaults,options||{});this.options.inputTarget=this.options.inputTarget||element;this.handlers={};this.session={};this.recognizers=[];this.element=element;this.input=createInputInstance(this);this.touchAction=new TouchAction(this,this.options.touchAction);toggleCssProps(this,true);each(this.options.recognizers,function(item){var recognizer=this.add(new(item[0])(item[1]));item[2]&&recognizer.recognizeWith(item[2]);item[3]&&recognizer.requireFailure(item[3]);},this);}
Manager.prototype={set:function(options){assign(this.options,options);if(options.touchAction){this.touchAction.update();}
if(options.inputTarget){this.input.destroy();this.input.target=options.inputTarget;this.input.init();}
return this;},stop:function(force){this.session.stopped=force?FORCED_STOP:STOP;},recognize:function(inputData){var session=this.session;if(session.stopped){return;}
this.touchAction.preventDefaults(inputData);var recognizer;var recognizers=this.recognizers;var curRecognizer=session.curRecognizer;if(!curRecognizer||(curRecognizer&&curRecognizer.state&STATE_RECOGNIZED)){curRecognizer=session.curRecognizer=null;}
var i=0;while(i<recognizers.length){recognizer=recognizers[i];if(session.stopped!==FORCED_STOP&&(!curRecognizer||recognizer==curRecognizer||recognizer.canRecognizeWith(curRecognizer))){recognizer.recognize(inputData);}else{recognizer.reset();}
if(!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)){curRecognizer=session.curRecognizer=recognizer;}
i++;}},get:function(recognizer){if(recognizer instanceof Recognizer){return recognizer;}
var recognizers=this.recognizers;for(var i=0;i<recognizers.length;i++){if(recognizers[i].options.event==recognizer){return recognizers[i];}}
return null;},add:function(recognizer){if(invokeArrayArg(recognizer,'add',this)){return this;}
var existing=this.get(recognizer.options.event);if(existing){this.remove(existing);}
this.recognizers.push(recognizer);recognizer.manager=this;this.touchAction.update();return recognizer;},remove:function(recognizer){if(invokeArrayArg(recognizer,'remove',this)){return this;}
recognizer=this.get(recognizer);if(recognizer){var recognizers=this.recognizers;var index=inArray(recognizers,recognizer);if(index!==-1){recognizers.splice(index,1);this.touchAction.update();}}
return this;},on:function(events,handler){var handlers=this.handlers;each(splitStr(events),function(event){handlers[event]=handlers[event]||[];handlers[event].push(handler);});return this;},off:function(events,handler){var handlers=this.handlers;each(splitStr(events),function(event){if(!handler){delete handlers[event];}else{handlers[event]&&handlers[event].splice(inArray(handlers[event],handler),1);}});return this;},emit:function(event,data){if(this.options.domEvents){triggerDomEvent(event,data);}
var handlers=this.handlers[event]&&this.handlers[event].slice();if(!handlers||!handlers.length){return;}
data.type=event;data.preventDefault=function(){data.srcEvent.preventDefault();};var i=0;while(i<handlers.length){handlers[i](data);i++;}},destroy:function(){this.element&&toggleCssProps(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null;}};function toggleCssProps(manager,add){var element=manager.element;if(!element.style){return;}
each(manager.options.cssProps,function(value,name){element.style[prefixed(element.style,name)]=add?value:'';});}
function triggerDomEvent(event,data){var gestureEvent=document.createEvent('Event');gestureEvent.initEvent(event,true,true);gestureEvent.gesture=data;data.target.dispatchEvent(gestureEvent);}
assign(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:STATE_FAILED,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,assign:assign,inherit:inherit,bindFn:bindFn,prefixed:prefixed});var freeGlobal=(typeof window!=='undefined'?window:(typeof self!=='undefined'?self:{}));freeGlobal.Hammer=Hammer;if(typeof define==='function'&&define.amd){define(function(){return Hammer;});}else if(typeof module!='undefined'&&module.exports){module.exports=Hammer;}else{window[exportName]=Hammer;}})(window,document,'Hammer');(function(factory){factory(jQuery,Hammer);}(function($,Hammer){function hammerify(el,options){var $el=$(el);if(!$el.data("hammer")){$el.data("hammer",new Hammer($el[0],options));}}
$.fn.hammer=function(options){return this.each(function(){hammerify(this,options);});};Hammer.Manager.prototype.emit=(function(originalEmit){return function(type,data){originalEmit.call(this,type,data);$(this.element).trigger({type:type,gesture:data});};})(Hammer.Manager.prototype.emit);}));jQuery.cachedScript=function(url,options){options=$.extend(options||{},{dataType:"script",cache:true,url:url});return jQuery.ajax(options);};/*!
 * jQuery Cookie Plugin v1.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */(function($,document){var pluses=/\+/g;function raw(s){return s;}
function decoded(s){return decodeURIComponent(s.replace(pluses,' '));}
$.cookie=function(key,value,options){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(value))||value==null)){options=$.extend({},$.cookie.defaults,options);if(value==null){options.expires=-1;}
if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}
value=String(value);return(document.cookie=[encodeURIComponent(key),'=',options.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
options=value||$.cookie.defaults||{};var decode=options.raw?raw:decoded;var cookies=document.cookie.split('; ');for(var i=0,parts;(parts=cookies[i]&&cookies[i].split('='));i++){if(decode(parts.shift())===key){return decode(parts.join('='));}}
return null;};$.cookie.defaults={};})(jQuery,document);/*! http://mths.be/placeholder v2.0.7 by @mathias */;(function(f,h,$){var a='placeholder'in h.createElement('input'),d='placeholder'in h.createElement('textarea'),i=$.fn,c=$.valHooks,k,j;if(a&&d){j=i.placeholder=function(){return this};j.input=j.textarea=true}else{j=i.placeholder=function(){var l=this;l.filter((a?'textarea':':input')+'[placeholder]').not('.placeholder').bind({'focus.placeholder':b,'blur.placeholder':e}).data('placeholder-enabled',true).trigger('blur.placeholder');return l};j.input=a;j.textarea=d;k={get:function(m){var l=$(m);return l.data('placeholder-enabled')&&l.hasClass('placeholder')?'':m.value},set:function(m,n){var l=$(m);if(!l.data('placeholder-enabled')){return m.value=n}if(n==''){m.value=n;if(m!=h.activeElement){e.call(m)}}else{if(l.hasClass('placeholder')){b.call(m,true,n)||(m.value=n)}else{m.value=n}}return l}};a||(c.input=k);d||(c.textarea=k);$(function(){$(h).delegate('form','submit.placeholder',function(){var l=$('.placeholder',this).each(b);setTimeout(function(){l.each(e)},10)})});$(f).bind('beforeunload.placeholder',function(){$('.placeholder').each(function(){this.value=''})})}function g(m){var l={},n=/^jQuery\d+$/;$.each(m.attributes,function(p,o){if(o.specified&&!n.test(o.name)){l[o.name]=o.value}});return l}function b(m,n){var l=this,o=$(l);if(l.value==o.attr('placeholder')&&o.hasClass('placeholder')){if(o.data('placeholder-password')){o=o.hide().next().show().attr('id',o.removeAttr('id').data('placeholder-id'));if(m===true){return o[0].value=n}o.focus()}else{l.value='';o.removeClass('placeholder');l==h.activeElement&&l.select()}}}function e(){var q,l=this,p=$(l),m=p,o=this.id;if(l.value==''){if(l.type=='password'){if(!p.data('placeholder-textinput')){try{q=p.clone().attr({type:'text'})}catch(n){q=$('<input>').attr($.extend(g(this),{type:'text'}))}q.removeAttr('name').data({'placeholder-password':true,'placeholder-id':o}).bind('focus.placeholder',b);p.data({'placeholder-textinput':q,'placeholder-id':o}).before(q)}p=p.removeAttr('id').hide().prev().attr('id',o).show()}p.addClass('placeholder');p[0].value=p.attr('placeholder')}else{p.removeClass('placeholder')}}}(this,document,jQuery));(function($){"use strict";if(!$.rsModules){$.rsModules={uid:0};}
function RoyalSlider(element,options){var i,self=this,navigator=window.navigator,ua=navigator.userAgent.toLowerCase();self.uid=$.rsModules.uid++;self.ns='.rs'+self.uid;var tempStyle=document.createElement('div').style,vendors=['webkit','Moz','ms','O'],vendor='',lastTime=0,tempV;for(i=0;i<vendors.length;i++){tempV=vendors[i];if(!vendor&&(tempV+'Transform')in tempStyle){vendor=tempV;}
tempV=tempV.toLowerCase();if(!window.requestAnimationFrame){window.requestAnimationFrame=window[tempV+'RequestAnimationFrame'];window.cancelAnimationFrame=window[tempV+'CancelAnimationFrame']||window[tempV+'CancelRequestAnimationFrame'];}}
if(!window.requestAnimationFrame){window.requestAnimationFrame=function(callback,element){var currTime=new Date().getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall);},timeToCall);lastTime=currTime+timeToCall;return id;};}
if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(id){clearTimeout(id);};}
self.isIPAD=ua.match(/(ipad)/);self.isIOS=self.isIPAD||ua.match(/(iphone|ipod)/);var uaMatch=function(ua){var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"};};var matched=uaMatch(ua);var br={};if(matched.browser){br[matched.browser]=true;br.version=matched.version;}
if(br.chrome){br.webkit=true;}
self._browser=br;self.isAndroid=ua.indexOf("android")>-1;self.slider=$(element);self.ev=$(self);self._doc=$(document);self.st=$.extend({},$.fn.royalSlider.defaults,options);self._currAnimSpeed=self.st.transitionSpeed;self._minPosOffset=0;if(self.st.allowCSS3){if((!br.webkit||self.st.allowCSS3OnWebkit)){var bT=vendor+(vendor?'T':'t');self._useCSS3Transitions=((bT+'ransform')in tempStyle)&&((bT+'ransition')in tempStyle);if(self._useCSS3Transitions){self._use3dTransform=(vendor+(vendor?'P':'p')+'erspective')in tempStyle;}}}
vendor=vendor.toLowerCase();self._vendorPref='-'+vendor+'-';self._slidesHorizontal=(self.st.slidesOrientation==='vertical')?false:true;self._reorderProp=self._slidesHorizontal?'left':'top';self._sizeProp=self._slidesHorizontal?'width':'height';self._prevNavItemId=-1;self._isMove=(self.st.transitionType==='fade')?false:true;if(!self._isMove){self.st.sliderDrag=false;self._fadeZIndex=10;}
self._opacityCSS='z-index:0; display:none; opacity:0;';self._newSlideId=0;self._sPosition=0;self._nextSlidePos=0;$.each($.rsModules,function(helper,opts){if(helper!=='uid')
opts.call(self);});self.slides=[];self._idCount=0;var returnVal;var ts=self.st.slides?$(self.st.slides):self.slider.children().detach();ts.each(function(){self._parseNode(this,true);});if(self.st.randomizeSlides){self.slides.sort(function(){return 0.5-Math.random();});}
self.numSlides=self.slides.length;self._refreshNumPreloadImages();if(!self.st.startSlideId){self.st.startSlideId=0;}else if(self.st.startSlideId>self.numSlides-1){self.st.startSlideId=self.numSlides-1;}
self._newSlideId=self.staticSlideId=self.currSlideId=self._realId=self.st.startSlideId;self.currSlide=self.slides[self.currSlideId];self._accelerationPos=0;self.pointerMultitouch=false;self.slider.addClass((self._slidesHorizontal?'rsHor':'rsVer')+(self._isMove?'':' rsFade'));var sliderHTML='<div class="rsOverflow"><div class="rsContainer">';self.slidesSpacing=self.st.slidesSpacing;self._slideSize=(self._slidesHorizontal?self.slider.width():self.slider.height())+self.st.slidesSpacing;self._preload=Boolean(self._numPreloadImages>0);if(self.numSlides<=1){self._loop=false;}
var loopHelpers=(self._loop&&self._isMove)?(self.numSlides===2?1:2):0;self._loopHelpers=loopHelpers;self._maxImages=self.numSlides<6?self.numSlides:6;self._currBlockIndex=0;self._idOffset=0;self.slidesJQ=[];for(i=0;i<self.numSlides;i++){self.slidesJQ.push($(createItemHTML(i)));}
self._sliderOverflow=sliderHTML=$(sliderHTML+'</div></div>');var addCursors=function(){if(self.st.sliderDrag){self._hasDrag=true;if(br.msie||br.opera){self._grabCursor=self._grabbingCursor="move";}else if(br.mozilla){self._grabCursor="-moz-grab";self._grabbingCursor="-moz-grabbing";}else if(br.webkit&&(navigator.platform.indexOf("Mac")!=-1)){self._grabCursor="-webkit-grab";self._grabbingCursor="-webkit-grabbing";}
self._setGrabCursor();}};var rsNS=self.ns;var addEventNames=function(pref,down,move,up,cancel){self._downEvent=pref+down+rsNS;self._moveEvent=pref+move+rsNS;self._upEvent=pref+up+rsNS;if(cancel)
self._cancelEvent=pref+cancel+rsNS;};var nPointerEnabled=navigator.pointerEnabled;self.pointerEnabled=nPointerEnabled||navigator.msPointerEnabled;if(self.pointerEnabled){self.hasTouch=false;self._lastItemFriction=0.2;self.pointerMultitouch=Boolean(navigator[(nPointerEnabled?'m':'msM')+'axTouchPoints']>1);if(nPointerEnabled){addEventNames('pointer','down','move','up','cancel');}else{addEventNames('MSPointer','Down','Move','Up','Cancel');}}else{if(!self.isIOS){addEventNames('mouse','down','move','up');}else{self._downEvent=self._moveEvent=self._upEvent=self._cancelEvent='';}
if('ontouchstart'in window||'createTouch'in document){self.hasTouch=true;self._downEvent+=' touchstart'+rsNS;self._moveEvent+=' touchmove'+rsNS;self._upEvent+=' touchend'+rsNS;self._cancelEvent+=' touchcancel'+rsNS;self._lastItemFriction=0.5;if(self.st.sliderTouch){self._hasDrag=true;}}else{self.hasTouch=false;self._lastItemFriction=0.2;}}
addCursors();self.slider.html(sliderHTML);self._controlsContainer=self.st.controlsInside?self._sliderOverflow:self.slider;self._slidesContainer=self._sliderOverflow.children('.rsContainer');if(self.pointerEnabled){self._slidesContainer.css((nPointerEnabled?'':'-ms-')+'touch-action',self._slidesHorizontal?'pan-y':'pan-x');}
self._preloader=$('<div class="rsPreloader"></div>');var slides=self._slidesContainer.children('.rsSlide');self._currHolder=self.slidesJQ[self.currSlideId];self._selectedSlideHolder=0;function createItemHTML(i,className){return'<div style="'+(self._isMove?'':(i!==self.currSlideId?self._opacityCSS:'z-index:0;'))+'" class="rsSlide '+(className||'')+'"></div>';}
if(self._useCSS3Transitions){self._TP='transition-property';self._TD='transition-duration';self._TTF='transition-timing-function';self._yProp=self._xProp=self._vendorPref+'transform';if(self._use3dTransform){if(br.webkit&&!br.chrome){self.slider.addClass('rsWebkit3d');}
self._tPref1='translate3d(';self._tPref2='px, ';self._tPref3='px, 0px)';}else{self._tPref1='translate(';self._tPref2='px, ';self._tPref3='px)';}
if(!self._isMove){var animObj={};animObj[(self._vendorPref+self._TP)]='opacity';animObj[(self._vendorPref+self._TD)]=self.st.transitionSpeed+'ms';animObj[(self._vendorPref+self._TTF)]=self.st.css3easeInOut;slides.css(animObj);}else{self._slidesContainer[(self._vendorPref+self._TP)]=(self._vendorPref+'transform');}}else{self._xProp='left';self._yProp='top';}
var resizeTimer;$(window).on('resize'+self.ns,function(){if(resizeTimer){clearTimeout(resizeTimer);}
resizeTimer=setTimeout(function(){self.updateSliderSize();},50);});self.ev.trigger('rsAfterPropsSetup');self.updateSliderSize();if(self.st.keyboardNavEnabled){self._bindKeyboardNav();}
if(self.st.arrowsNavHideOnTouch&&(self.hasTouch||self.pointerMultitouch)){self.st.arrowsNav=false;}
if(self.st.arrowsNav){var rArr='rsArrow',container=self._controlsContainer;$('<div class="'+rArr+' '+rArr+'Left"><div class="'+rArr+'Icn"></div></div><div class="'+rArr+' '+rArr+'Right"><div class="'+rArr+'Icn"></div></div>').appendTo(container);self._arrowLeft=container.children('.'+rArr+'Left').click(function(e){e.preventDefault();self.prev();});self._arrowRight=container.children('.'+rArr+'Right').click(function(e){e.preventDefault();self.next();});if(self.st.arrowsNavAutoHide&&!self.hasTouch){self._arrowLeft.addClass('rsHidden');self._arrowRight.addClass('rsHidden');var hoverEl=container;hoverEl.one("mousemove.arrowshover",function(){self._arrowLeft.removeClass('rsHidden');self._arrowRight.removeClass('rsHidden');});hoverEl.hover(function(){if(!self._arrowsAutoHideLocked){self._arrowLeft.removeClass('rsHidden');self._arrowRight.removeClass('rsHidden');}},function(){if(!self._arrowsAutoHideLocked){self._arrowLeft.addClass('rsHidden');self._arrowRight.addClass('rsHidden');}});}
self.ev.on('rsOnUpdateNav',function(){self._updateArrowsNav();});self._updateArrowsNav();}
if(self._hasDrag){self._slidesContainer.on(self._downEvent,function(e){self._onDragStart(e);});}else{self.dragSuccess=false;}
var videoClasses=['rsPlayBtnIcon','rsPlayBtn','rsCloseVideoBtn','rsCloseVideoIcn'];self._slidesContainer.click(function(e){if(!self.dragSuccess){var t=$(e.target);var tClass=t.attr('class');if($.inArray(tClass,videoClasses)!==-1){if(self.toggleVideo()){return false;}}
if(self.st.navigateByClick&&!self._blockActions){if($(e.target).closest('.rsNoDrag',self._currHolder).length){return true;}
self._mouseNext(e);}
self.ev.trigger('rsSlideClick',e);}}).on('click.rs','a',function(e){if(self.dragSuccess){return false;}else{self._blockActions=true;setTimeout(function(){self._blockActions=false;},3);}});self.ev.trigger('rsAfterInit');}
RoyalSlider.prototype={constructor:RoyalSlider,_mouseNext:function(e){var self=this,relativePos=e[self._slidesHorizontal?'pageX':'pageY']-self._sliderOffset;if(relativePos>=self._nextSlidePos){self.next();}else if(relativePos<0){self.prev();}},_refreshNumPreloadImages:function(){var self=this,n;n=self.st.numImagesToPreload;self._loop=self.st.loop;if(self._loop){if(self.numSlides===2){self._loop=false;self.st.loopRewind=true;}else if(self.numSlides<2){self.st.loopRewind=self._loop=false;}}
if(self._loop&&n>0){if(self.numSlides<=4){n=1;}else{if(self.st.numImagesToPreload>(self.numSlides-1)/2){n=Math.floor((self.numSlides-1)/2);}}}
self._numPreloadImages=n;},_parseNode:function(content,pushToSlides){var self=this,hasImg,isRoot,hasCover,obj={},tempEl,first=true;content=$(content);self._currContent=content;self.ev.trigger('rsBeforeParseNode',[content,obj]);if(obj.stopParsing){return;}
content=self._currContent;obj.id=self._idCount;obj.contentAdded=false;self._idCount++;obj.images=[];obj.isBig=false;if(!obj.hasCover){if(content.hasClass('rsImg')){tempEl=content;hasImg=true;}else{tempEl=content.find('.rsImg');if(tempEl.length){hasImg=true;}}
if(hasImg){obj.bigImage=tempEl.eq(0).attr('data-rsBigImg');tempEl.each(function(){var item=$(this);if(item.is('a')){parseEl(item,'href');}else if(item.is('img')){parseEl(item,'src');}else{parseEl(item);}});}else if(content.is('img')){content.addClass('rsImg rsMainSlideImage');parseEl(content,'src');}}
tempEl=content.find('.rsCaption');if(tempEl.length){obj.caption=tempEl.remove();}
obj.content=content;self.ev.trigger('rsAfterParseNode',[content,obj]);function parseEl(el,s){if(s){obj.images.push(el.attr(s));}else{obj.images.push(el.text());}
if(first){first=false;obj.caption=(s==='src')?el.attr('alt'):el.contents();obj.image=obj.images[0];obj.videoURL=el.attr('data-rsVideo');var wAtt=el.attr('data-rsw'),hAtt=el.attr('data-rsh');if(typeof wAtt!=='undefined'&&wAtt!==false&&typeof hAtt!=='undefined'&&hAtt!==false){obj.iW=parseInt(wAtt,10);obj.iH=parseInt(hAtt,10);}else if(self.st.imgWidth&&self.st.imgHeight){obj.iW=self.st.imgWidth;obj.iH=self.st.imgHeight;}}}
if(pushToSlides){self.slides.push(obj);}
if(obj.images.length===0){obj.isLoaded=true;obj.isRendered=false;obj.isLoading=false;obj.images=null;}
return obj;},_bindKeyboardNav:function(){var self=this,interval,keyCode,onKeyboardAction=function(keyCode){if(keyCode===37){self.prev();}else if(keyCode===39){self.next();}};self._doc.on('keydown'+self.ns,function(e){if(!self._isDragging){keyCode=e.keyCode;if(keyCode===37||keyCode===39){if(!interval){onKeyboardAction(keyCode);interval=setInterval(function(){onKeyboardAction(keyCode);},700);}}}}).on('keyup'+self.ns,function(e){if(interval){clearInterval(interval);interval=null;}});},goTo:function(id,notUserAction){var self=this;if(id!==self.currSlideId){self._moveTo(id,self.st.transitionSpeed,true,!notUserAction);}},destroy:function(remove){var self=this;self.ev.trigger('rsBeforeDestroy');self._doc.off('keydown'+self.ns+' keyup'+self.ns+' '+self._moveEvent+' '+self._upEvent);self._slidesContainer.off(self._downEvent+' click');self.slider.data('royalSlider',null);$.removeData(self.slider,'royalSlider');$(window).off('resize'+self.ns);if(self.loadingTimeout){clearTimeout(self.loadingTimeout);}
if(remove){self.slider.remove();}
self.slides=null;self.slider=null;self.ev=null;},_updateBlocksContent:function(beforeTransition,getId){var self=this,item,i,n,pref,group,groupId,slideCode,loop=self._loop,numSlides=self.numSlides;if(!isNaN(getId)){return getCorrectLoopedId(getId);}
var id=self.currSlideId;var groupOffset;var itemsOnSide=beforeTransition?(Math.abs(self._prevSlideId-self.currSlideId)>=self.numSlides-1?0:1):self._numPreloadImages;var itemsToCheck=Math.min(2,itemsOnSide);var updateAfter=false;var updateBefore=false;var tempId;for(i=id;i<id+1+itemsToCheck;i++){tempId=getCorrectLoopedId(i);item=self.slides[tempId];if(item&&(!item.isAdded||!item.positionSet)){updateAfter=true;break;}}
for(i=id-1;i>id-1-itemsToCheck;i--){tempId=getCorrectLoopedId(i);item=self.slides[tempId];if(item&&(!item.isAdded||!item.positionSet)){updateBefore=true;break;}}
if(updateAfter){for(i=id;i<id+itemsOnSide+1;i++){tempId=getCorrectLoopedId(i);groupOffset=Math.floor((self._realId-(id-i))/self.numSlides)*self.numSlides;item=self.slides[tempId];if(item){updateItem(item,tempId);}}}
if(updateBefore){for(i=id-1;i>id-1-itemsOnSide;i--){tempId=getCorrectLoopedId(i);groupOffset=Math.floor((self._realId-(id-i))/numSlides)*numSlides;item=self.slides[tempId];if(item){updateItem(item,tempId);}}}
if(!beforeTransition){var start=id;var distance=itemsOnSide;var min=getCorrectLoopedId(id-itemsOnSide);var max=getCorrectLoopedId(id+itemsOnSide);var nmin=min>max?0:min;for(i=0;i<numSlides;i++){if(min>max){if(i>min-1){continue;}}
if(i<nmin||i>max){item=self.slides[i];if(item&&item.holder){item.holder.detach();item.isAdded=false;}}}}
function updateItem(item,i,slideCode){if(!item.isAdded){if(!slideCode)
slideCode=self.slidesJQ[i];if(!item.holder){slideCode=self.slidesJQ[i]=$(slideCode);item.holder=slideCode;}else{slideCode=item.holder;}
item.appendOnLoaded=false;updatePos(i,item,slideCode);addContent(i,item);self._addBlockToContainer(item,slideCode,beforeTransition);item.isAdded=true;}else{addContent(i,item);updatePos(i,item);}}
function addContent(i,item){if(!item.contentAdded){self.setItemHtml(item,beforeTransition);if(!beforeTransition){item.contentAdded=true;}}}
function updatePos(i,item,slideCode){if(self._isMove){if(!slideCode){slideCode=self.slidesJQ[i];}
slideCode.css(self._reorderProp,(i+self._idOffset+groupOffset)*self._slideSize);}}
function getCorrectLoopedId(index){var changed=false;if(loop){if(index>numSlides-1){return getCorrectLoopedId(index-numSlides);}else if(index<0){return getCorrectLoopedId(numSlides+index);}}
return index;}},setItemHtml:function(currSlideObject,beforeTransition){var self=this;var parseDataAndLoad=function(){if(!currSlideObject.images){currSlideObject.isRendered=true;currSlideObject.isLoaded=true;currSlideObject.isLoading=false;appendContent(true);return;}
if(currSlideObject.isLoading){return;}
var el,isRoot;if(currSlideObject.content.hasClass('rsImg')){el=currSlideObject.content;isRoot=true;}else{el=currSlideObject.content.find('.rsImg:not(img)');}
if(el&&!el.is('img')){el.each(function(){var item=$(this),newEl='<img class="rsImg" src="'+(item.is('a')?item.attr('href'):item.text())+'" />';if(!isRoot){item.replaceWith(newEl);}else{currSlideObject.content=$(newEl);}});}
el=isRoot?currSlideObject.content:currSlideObject.content.find('img.rsImg');setPreloader();el.eq(0).addClass('rsMainSlideImage');if(currSlideObject.iW&&currSlideObject.iH){if(!currSlideObject.isLoaded){self._resizeImage(currSlideObject);}
appendContent();}
currSlideObject.isLoading=true;var newEl;var eNames='load.rs error.rs';if(currSlideObject.isBig){$('<img />').on(eNames,function(e){$(this).off(eNames);onLoad([this],true);}).attr('src',currSlideObject.image);}else{currSlideObject.loaded=[];currSlideObject.numStartedLoad=0;var onLoaded=function(e){$(this).off(eNames);currSlideObject.loaded.push(this);if(currSlideObject.loaded.length===currSlideObject.numStartedLoad){onLoad(currSlideObject.loaded,false);}};for(var i=0;i<currSlideObject.images.length;i++){var image=$('<img />');currSlideObject.numStartedLoad++;image.on('load.rs error.rs',onLoaded).attr('src',currSlideObject.images[i]);}}};var onLoad=function($images,isBig){if($images.length){var img=$images[0],src=img.src;if(isBig!==currSlideObject.isBig){var c=currSlideObject.holder.children();if(c&&c.length>1){removePreloader();}
return;}
if(currSlideObject.iW&&currSlideObject.iH){imageLoadingComplete();return;}
currSlideObject.iW=img.width;currSlideObject.iH=img.height;if(currSlideObject.iW&&currSlideObject.iH){imageLoadingComplete();return;}else{var loader=new Image();loader.onload=function(){if(loader.width){currSlideObject.iW=loader.width;currSlideObject.iH=loader.height;imageLoadingComplete();}else{setTimeout(function(){if(loader.width){currSlideObject.iW=loader.width;currSlideObject.iH=loader.height;}
imageLoadingComplete();},1000);}};loader.src=img.src;}}else{imageLoadingComplete();}};var imageLoadingComplete=function(){currSlideObject.isLoaded=true;currSlideObject.isLoading=false;appendContent();removePreloader();triggerLoaded();};var waitForTransition=function(){if(!self._isMove&&currSlideObject.images&&currSlideObject.iW&&currSlideObject.iH){parseDataAndLoad();return;}
currSlideObject.holder.isWaiting=true;setPreloader();currSlideObject.holder.slideId=-99;};var appendContent=function(){if(!currSlideObject.isAppended&&self.ev){var visibleNearby=self.st.visibleNearby,bId=currSlideObject.id-self._newSlideId;if(!beforeTransition&&!currSlideObject.appendOnLoaded&&self.st.fadeinLoadedSlide&&(bId===0||((visibleNearby||self._isAnimating||self._isDragging)&&(bId===-1||bId===1)))){var css={visibility:'visible',opacity:0};css[self._vendorPref+'transition']='opacity 400ms ease-in-out';currSlideObject.content.css(css);setTimeout(function(){currSlideObject.content.css('opacity',1);},16);}
if(currSlideObject.holder.find('.rsPreloader').length){currSlideObject.holder.append(currSlideObject.content);}else{currSlideObject.holder.html(currSlideObject.content);}
currSlideObject.isAppended=true;if(currSlideObject.isLoaded){self._resizeImage(currSlideObject);triggerLoaded();}
if(!currSlideObject.sizeReady){currSlideObject.sizeReady=true;setTimeout(function(){self.ev.trigger('rsMaybeSizeReady',currSlideObject);},100);}}};var triggerLoaded=function(){if(!currSlideObject.loadedTriggered&&self.ev){currSlideObject.isLoaded=currSlideObject.loadedTriggered=true;currSlideObject.holder.trigger('rsAfterContentSet');self.ev.trigger('rsAfterContentSet',currSlideObject);}};var setPreloader=function(){if(self.st.usePreloader)
currSlideObject.holder.html(self._preloader.clone());};var removePreloader=function(now){if(self.st.usePreloader){var preloader=currSlideObject.holder.find('.rsPreloader');if(preloader.length){preloader.remove();}}};if(currSlideObject.isLoaded){appendContent();return;}else{if(beforeTransition){waitForTransition();}else{parseDataAndLoad();}}},_addBlockToContainer:function(slideObject,content,dontFade){var self=this;var holder=slideObject.holder;var bId=slideObject.id-self._newSlideId;var visibleNearby=false;self._slidesContainer.append(holder);slideObject.appendOnLoaded=false;},_onDragStart:function(e,isThumbs){var self=this,point,wasAnimating,isTouch=(e.type==='touchstart');self._isTouchGesture=isTouch;self.ev.trigger('rsDragStart');if($(e.target).closest('.rsNoDrag',self._currHolder).length){self.dragSuccess=false;return true;}
if(!isThumbs){if(self._isAnimating){self._wasAnimating=true;self._stopAnimation();}}
self.dragSuccess=false;if(self._isDragging){if(isTouch){self._multipleTouches=true;}
return;}else{if(isTouch){self._multipleTouches=false;}}
self._setGrabbingCursor();if(isTouch){var touches=e.originalEvent.touches;if(touches&&touches.length>0){point=touches[0];if(touches.length>1){self._multipleTouches=true;}}
else{return;}}else{e.preventDefault();point=e;if(self.pointerEnabled)point=point.originalEvent;}
self._isDragging=true;self._doc.on(self._moveEvent,function(e){self._onDragMove(e,isThumbs);}).on(self._upEvent,function(e){self._onDragRelease(e,isThumbs);});self._currMoveAxis='';self._hasMoved=false;self._pageX=point.pageX;self._pageY=point.pageY;self._startPagePos=self._accelerationPos=(!isThumbs?self._slidesHorizontal:self._thumbsHorizontal)?point.pageX:point.pageY;self._horDir=0;self._verDir=0;self._currRenderPosition=!isThumbs?self._sPosition:self._thumbsPosition;self._startTime=new Date().getTime();if(isTouch){self._sliderOverflow.on(self._cancelEvent,function(e){self._onDragRelease(e,isThumbs);});}},_renderMovement:function(point,isThumbs){var self=this;if(self._checkedAxis){var timeStamp=self._renderMoveTime,deltaX=point.pageX-self._pageX,deltaY=point.pageY-self._pageY,newX=self._currRenderPosition+deltaX,newY=self._currRenderPosition+deltaY,isHorizontal=(!isThumbs?self._slidesHorizontal:self._thumbsHorizontal),newPos=isHorizontal?newX:newY,mAxis=self._currMoveAxis;self._hasMoved=true;self._pageX=point.pageX;self._pageY=point.pageY;if(mAxis==='x'&&deltaX!==0){self._horDir=deltaX>0?1:-1;}else if(mAxis==='y'&&deltaY!==0){self._verDir=deltaY>0?1:-1;}
var pointPos=isHorizontal?self._pageX:self._pageY,deltaPos=isHorizontal?deltaX:deltaY;if(!isThumbs){if(!self._loop){if(self.currSlideId<=0){if(pointPos-self._startPagePos>0){newPos=self._currRenderPosition+deltaPos*self._lastItemFriction;}}
if(self.currSlideId>=self.numSlides-1){if(pointPos-self._startPagePos<0){newPos=self._currRenderPosition+deltaPos*self._lastItemFriction;}}}}else{if(newPos>self._thumbsMinPosition){newPos=self._currRenderPosition+deltaPos*self._lastItemFriction;}else if(newPos<self._thumbsMaxPosition){newPos=self._currRenderPosition+deltaPos*self._lastItemFriction;}}
self._currRenderPosition=newPos;if(timeStamp-self._startTime>200){self._startTime=timeStamp;self._accelerationPos=pointPos;}
if(!isThumbs){if(self._isMove){self._setPosition(self._currRenderPosition);}}else{self._setThumbsPosition(self._currRenderPosition);}}},_onDragMove:function(e,isThumbs){var self=this,point,isTouch=(e.type==='touchmove');if(self._isTouchGesture&&!isTouch){return;}
if(isTouch){if(self._lockAxis){return;}
var touches=e.originalEvent.touches;if(touches){if(touches.length>1){return;}else{point=touches[0];}}else{return;}}else{point=e;if(self.pointerEnabled)point=point.originalEvent;}
if(!self._hasMoved){if(self._useCSS3Transitions){(!isThumbs?self._slidesContainer:self._thumbsContainer).css((self._vendorPref+self._TD),'0s');}
(function animloop(){if(self._isDragging){self._animFrame=requestAnimationFrame(animloop);if(self._renderMoveEvent)
self._renderMovement(self._renderMoveEvent,isThumbs);}})();}
if(!self._checkedAxis){var dir=(!isThumbs?self._slidesHorizontal:self._thumbsHorizontal),diff=(Math.abs(point.pageX-self._pageX)-Math.abs(point.pageY-self._pageY))-(dir?-7:7);if(diff>7){if(dir){e.preventDefault();self._currMoveAxis='x';}else if(isTouch){self._completeGesture(e);return;}
self._checkedAxis=true;}else if(diff<-7){if(!dir){e.preventDefault();self._currMoveAxis='y';}else if(isTouch){self._completeGesture(e);return;}
self._checkedAxis=true;}
return;}
e.preventDefault();self._renderMoveTime=new Date().getTime();self._renderMoveEvent=point;},_completeGesture:function(e,isThumbs){var self=this;self._lockAxis=true;self._hasMoved=self._isDragging=false;self._onDragRelease(e);},_onDragRelease:function(e,isThumbs){var self=this,totalMoveDist,accDist,duration,v0,newPos,newDist,newDuration,blockLink,isTouch=(e.type.indexOf('touch')>-1);if(self._isTouchGesture&&!isTouch){return;}
self._isTouchGesture=false;self.ev.trigger('rsDragRelease');self._renderMoveEvent=null;self._isDragging=false;self._lockAxis=false;self._checkedAxis=false;self._renderMoveTime=0;cancelAnimationFrame(self._animFrame);if(self._hasMoved){if(!isThumbs){if(self._isMove){self._setPosition(self._currRenderPosition);}}else{self._setThumbsPosition(self._currRenderPosition);}}
self._doc.off(self._moveEvent).off(self._upEvent);if(isTouch){self._sliderOverflow.off(self._cancelEvent);}
self._setGrabCursor();if(!self._hasMoved&&!self._multipleTouches){if(isThumbs&&self._thumbsEnabled){var item=$(e.target).closest('.rsNavItem');if(item.length){self.goTo(item.index());}
return;}}
var orient=(!isThumbs?self._slidesHorizontal:self._thumbsHorizontal);if(!self._hasMoved||(self._currMoveAxis==='y'&&orient)||(self._currMoveAxis==='x'&&!orient)){if(!isThumbs&&self._wasAnimating){self._wasAnimating=false;if(!self.st.navigateByClick){self.dragSuccess=true;}else{self._mouseNext((self.pointerEnabled?e.originalEvent:e));self.dragSuccess=true;return;}}else{self._wasAnimating=false;self.dragSuccess=false;return;}}else{self.dragSuccess=true;}
self._wasAnimating=false;self._currMoveAxis='';function getCorrectSpeed(newSpeed){if(newSpeed<100){return 100;}else if(newSpeed>500){return 500;}
return newSpeed;}
function returnToCurrent(isSlow,v0){if(self._isMove||isThumbs){newPos=(-self._realId-self._idOffset)*self._slideSize;newDist=Math.abs(self._sPosition-newPos);self._currAnimSpeed=newDist/v0;if(isSlow){self._currAnimSpeed+=250;}
self._currAnimSpeed=getCorrectSpeed(self._currAnimSpeed);self._animateTo(newPos,false);}}
var snapDist=self.st.minSlideOffset,point=isTouch?e.originalEvent.changedTouches[0]:(self.pointerEnabled?e.originalEvent:e),pPos=orient?point.pageX:point.pageY,sPos=self._startPagePos,axPos=self._accelerationPos,axCurrItem=self.currSlideId,axNumItems=self.numSlides,dir=orient?self._horDir:self._verDir,loop=self._loop,changeHash=false,distOffset=0;totalMoveDist=Math.abs(pPos-sPos);accDist=pPos-axPos;duration=(new Date().getTime())-self._startTime;v0=Math.abs(accDist)/duration;if(dir===0||axNumItems<=1){returnToCurrent(true,v0);return;}
if(!loop&&!isThumbs){if(axCurrItem<=0){if(dir>0){returnToCurrent(true,v0);return;}}else if(axCurrItem>=axNumItems-1){if(dir<0){returnToCurrent(true,v0);return;}}}
if(!isThumbs){var getSwipedSlides=function(dist){var numSwipedSlides=Math.floor(dist/self._slideSize);var nextSlideOffset=dist-(numSwipedSlides*self._slideSize);if(nextSlideOffset>snapDist){numSwipedSlides++;}
return numSwipedSlides;};if(sPos+snapDist<pPos){if(dir<0){returnToCurrent(false,v0);return;}
var swipedSlides=getSwipedSlides(pPos-sPos);self._moveTo(self.currSlideId-swipedSlides,getCorrectSpeed(Math.abs(self._sPosition-(-self._realId-self._idOffset+swipedSlides)*self._slideSize)/v0),changeHash,true,true);}else if(sPos-snapDist>pPos){if(dir>0){returnToCurrent(false,v0);return;}
var swipedSlides=getSwipedSlides(sPos-pPos);self._moveTo(self.currSlideId+swipedSlides,getCorrectSpeed(Math.abs(self._sPosition-(-self._realId-self._idOffset-swipedSlides)*self._slideSize)/v0),changeHash,true,true);}else{returnToCurrent(false,v0);}}else{newPos=self._thumbsPosition;var transitionSpeed;if(newPos>self._thumbsMinPosition){newPos=self._thumbsMinPosition;}else if(newPos<self._thumbsMaxPosition){newPos=self._thumbsMaxPosition;}else{var friction=0.003,S=(v0*v0)/(friction*2),minXDist=-self._thumbsPosition,maxXDist=self._thumbsContainerSize-self._thumbsViewportSize+self._thumbsPosition;if(accDist>0&&S>minXDist){minXDist=minXDist+self._thumbsViewportSize/(15/(S/v0*friction));v0=v0*minXDist/S;S=minXDist;}else if(accDist<0&&S>maxXDist){maxXDist=maxXDist+self._thumbsViewportSize/(15/(S/v0*friction));v0=v0*maxXDist/S;S=maxXDist;}
transitionSpeed=Math.max(Math.round(v0/friction),50);newPos=newPos+S*(accDist<0?-1:1);if(newPos>self._thumbsMinPosition){self._animateThumbsTo(newPos,transitionSpeed,true,self._thumbsMinPosition,200);return;}else if(newPos<self._thumbsMaxPosition){self._animateThumbsTo(newPos,transitionSpeed,true,self._thumbsMaxPosition,200);return;}}
self._animateThumbsTo(newPos,transitionSpeed,true);}},_setPosition:function(pos){var self=this;pos=self._sPosition=pos;if(self._useCSS3Transitions){self._slidesContainer.css(self._xProp,self._tPref1+(self._slidesHorizontal?(pos+self._tPref2+0):(0+self._tPref2+pos))+self._tPref3);}else{self._slidesContainer.css(self._slidesHorizontal?self._xProp:self._yProp,pos);}},updateSliderSize:function(force){var self=this,newWidth,newHeight;if(!self.slider){return;}
if(self.st.autoScaleSlider){var asw=self.st.autoScaleSliderWidth,ash=self.st.autoScaleSliderHeight;if(self.st.autoScaleHeight){newWidth=self.slider.width();if(newWidth!=self.width){self.slider.css("height",newWidth*(ash/asw));newWidth=self.slider.width();}
newHeight=self.slider.height();}else{newHeight=self.slider.height();if(newHeight!=self.height){self.slider.css("width",newHeight*(asw/ash));newHeight=self.slider.height();}
newWidth=self.slider.width();}}else{newWidth=self.slider.width();newHeight=self.slider.height();}
if(force||newWidth!=self.width||newHeight!=self.height){self.width=newWidth;self.height=newHeight;self._wrapWidth=newWidth;self._wrapHeight=newHeight;self.ev.trigger('rsBeforeSizeSet');self.ev.trigger('rsAfterSizePropSet');self._sliderOverflow.css({width:self._wrapWidth,height:self._wrapHeight});self._slideSize=(self._slidesHorizontal?self._wrapWidth:self._wrapHeight)+self.st.slidesSpacing;self._imagePadding=self.st.imageScalePadding;var item,slideItem,i,img;for(i=0;i<self.slides.length;i++){item=self.slides[i];item.positionSet=false;if(item&&item.images&&item.isLoaded){item.isRendered=false;self._resizeImage(item);}}
if(self._cloneHolders){for(i=0;i<self._cloneHolders.length;i++){item=self._cloneHolders[i];item.holder.css(self._reorderProp,(item.id+self._idOffset)*self._slideSize);}}
self._updateBlocksContent();if(self._isMove){if(self._useCSS3Transitions){self._slidesContainer.css(self._vendorPref+'transition-duration','0s');}
self._setPosition((-self._realId-self._idOffset)*self._slideSize);}
self.ev.trigger('rsOnUpdateNav');}
self._sliderOffset=self._sliderOverflow.offset();self._sliderOffset=self._sliderOffset[self._reorderProp];},appendSlide:function(htmltext,index){var self=this,parsedSlide=self._parseNode(htmltext);if(isNaN(index)||index>self.numSlides){index=self.numSlides;}
self.slides.splice(index,0,parsedSlide);self.slidesJQ.splice(index,0,$('<div style="'+(self._isMove?'position:absolute;':self._opacityCSS)+'" class="rsSlide"></div>'));if(index<=self.currSlideId){self.currSlideId++;}
self.ev.trigger('rsOnAppendSlide',[parsedSlide,index]);self._refreshSlides(index);if(index===self.currSlideId){self.ev.trigger('rsAfterSlideChange');}},removeSlide:function(index){var self=this,slideToRemove=self.slides[index];if(slideToRemove){if(slideToRemove.holder){slideToRemove.holder.remove();}
if(index<self.currSlideId){self.currSlideId--;}
self.slides.splice(index,1);self.slidesJQ.splice(index,1);self.ev.trigger('rsOnRemoveSlide',[index]);self._refreshSlides(index);if(index===self.currSlideId){self.ev.trigger('rsAfterSlideChange');}}},_refreshSlides:function(refreshIndex){var self=this;var oldNumSlides=self.numSlides;var numLoops=self._realId<=0?0:Math.floor(self._realId/oldNumSlides);self.numSlides=self.slides.length;if(self.numSlides===0){self.currSlideId=self._idOffset=self._realId=0;self.currSlide=self._oldHolder=null;}else{self._realId=numLoops*self.numSlides+self.currSlideId;}
for(var i=0;i<self.numSlides;i++){self.slides[i].id=i;}
self.currSlide=self.slides[self.currSlideId];self._currHolder=self.slidesJQ[self.currSlideId];if(self.currSlideId>=self.numSlides){self.goTo(self.numSlides-1);}else if(self.currSlideId<0){self.goTo(0);}
self._refreshNumPreloadImages();if(self._isMove){self._slidesContainer.css((self._vendorPref+self._TD),'0ms');}
if(self._refreshSlidesTimeout){clearTimeout(self._refreshSlidesTimeout);}
self._refreshSlidesTimeout=setTimeout(function(){if(self._isMove){self._setPosition((-self._realId-self._idOffset)*self._slideSize);}
self._updateBlocksContent();if(!self._isMove){self._currHolder.css({display:'block',opacity:1});}},14);self.ev.trigger('rsOnUpdateNav');},_setGrabCursor:function(){var self=this;if(self._hasDrag&&self._isMove){if(self._grabCursor){self._sliderOverflow.css('cursor',self._grabCursor);}else{self._sliderOverflow.removeClass('grabbing-cursor');self._sliderOverflow.addClass('grab-cursor');}}},_setGrabbingCursor:function(){var self=this;if(self._hasDrag&&self._isMove){if(self._grabbingCursor){self._sliderOverflow.css('cursor',self._grabbingCursor);}else{self._sliderOverflow.removeClass('grab-cursor');self._sliderOverflow.addClass('grabbing-cursor');}}},next:function(notUserAction){var self=this;self._moveTo('next',self.st.transitionSpeed,true,!notUserAction);},prev:function(notUserAction){var self=this;self._moveTo('prev',self.st.transitionSpeed,true,!notUserAction);},_moveTo:function(type,speed,inOutEasing,userAction,fromSwipe){var self=this,newPos,difference,i,newItemId;self.ev.trigger('rsBeforeMove',[type,userAction]);if(type==='next'){newItemId=self.currSlideId+1;}else if(type==='prev'){newItemId=self.currSlideId-1;}else{newItemId=type=parseInt(type,10);}
if(!self._loop){if(newItemId<0){self._doBackAndForthAnim('left',!userAction);return;}else if(newItemId>=self.numSlides){self._doBackAndForthAnim('right',!userAction);return;}}
if(self._isAnimating){self._stopAnimation(true);inOutEasing=false;}
difference=newItemId-self.currSlideId;self._prevSlideId=self.currSlideId;var prevId=self.currSlideId;var id=self.currSlideId+difference;var realId=self._realId;var temp;var delayed;if(self._loop){id=self._updateBlocksContent(false,id);realId+=difference;}else{realId=id;}
self._newSlideId=id;self._oldHolder=self.slidesJQ[self.currSlideId];self._realId=realId;self.currSlideId=self._newSlideId;self.currSlide=self.slides[self.currSlideId];self._currHolder=self.slidesJQ[self.currSlideId];var checkDist=self.st.slidesDiff;var next=Boolean(difference>0);var absDiff=Math.abs(difference);var g1=Math.floor(prevId/self._numPreloadImages);var g2=Math.floor((prevId+(next?checkDist:-checkDist))/self._numPreloadImages);var biggest=next?Math.max(g1,g2):Math.min(g1,g2);var biggestId=biggest*self._numPreloadImages+(next?(self._numPreloadImages-1):0);if(biggestId>self.numSlides-1){biggestId=self.numSlides-1;}else if(biggestId<0){biggestId=0;}
var toLast=next?(biggestId-prevId):(prevId-biggestId);if(toLast>self._numPreloadImages){toLast=self._numPreloadImages;}
if(absDiff>toLast+checkDist){self._idOffset+=(absDiff-(toLast+checkDist))*(next?-1:1);speed=speed*1.4;for(i=0;i<self.numSlides;i++){self.slides[i].positionSet=false;}}
self._currAnimSpeed=speed;self._updateBlocksContent(true);if(!fromSwipe){delayed=true;}
newPos=(-realId-self._idOffset)*self._slideSize;if(delayed){setTimeout(function(){self._isWorking=false;self._animateTo(newPos,type,false,inOutEasing);self.ev.trigger('rsOnUpdateNav');},0);}else{self._animateTo(newPos,type,false,inOutEasing);self.ev.trigger('rsOnUpdateNav');}
function isSetToCurrent(testId){if(testId<0){testId=self.numSlides+testId;}else if(testId>self.numSlides-1){testId=testId-self.numSlides;}
if(testId!==self.currSlideId){return false;}
return true;}},_updateArrowsNav:function(){var self=this,arrDisClass='rsArrowDisabled';if(self.st.arrowsNav){if(self.numSlides<=1){self._arrowLeft.css('display','none');self._arrowRight.css('display','none');return;}else{self._arrowLeft.css('display','block');self._arrowRight.css('display','block');}
if(!self._loop&&!self.st.loopRewind){if(self.currSlideId===0){self._arrowLeft.addClass(arrDisClass);}else{self._arrowLeft.removeClass(arrDisClass);}
if(self.currSlideId===self.numSlides-1){self._arrowRight.addClass(arrDisClass);}else{self._arrowRight.removeClass(arrDisClass);}}}},_animateTo:function(pos,dir,loadAll,inOutEasing,customComplete){var self=this,moveProp,oldBlock,animBlock;var animObj={};if(isNaN(self._currAnimSpeed)){self._currAnimSpeed=400;}
self._sPosition=self._currRenderPosition=pos;self.ev.trigger('rsBeforeAnimStart');if(!self._useCSS3Transitions){if(self._isMove){animObj[self._slidesHorizontal?self._xProp:self._yProp]=pos+'px';self._slidesContainer.animate(animObj,self._currAnimSpeed,inOutEasing?self.st.easeInOut:self.st.easeOut);}else{oldBlock=self._oldHolder;animBlock=self._currHolder;animBlock.stop(true,true).css({opacity:0,display:'block',zIndex:self._fadeZIndex});self._currAnimSpeed=self.st.transitionSpeed;animBlock.animate({opacity:1},self._currAnimSpeed,self.st.easeInOut);clearTimeouts();if(oldBlock){oldBlock.data('rsTimeout',setTimeout(function(){oldBlock.stop(true,true).css({opacity:0,display:'none',zIndex:0});},self._currAnimSpeed+60));}}}else{if(self._isMove){self._currAnimSpeed=parseInt(self._currAnimSpeed,10);var td=self._vendorPref+self._TD;var ttf=self._vendorPref+self._TTF;animObj[td]=self._currAnimSpeed+'ms';animObj[ttf]=inOutEasing?$.rsCSS3Easing[self.st.easeInOut]:$.rsCSS3Easing[self.st.easeOut];self._slidesContainer.css(animObj);if(inOutEasing||!self.hasTouch){setTimeout(function(){self._setPosition(pos);},5);}else{self._setPosition(pos);}}else{self._currAnimSpeed=self.st.transitionSpeed;oldBlock=self._oldHolder;animBlock=self._currHolder;if(animBlock.data('rsTimeout')){animBlock.css('opacity',0);}
clearTimeouts();if(oldBlock){oldBlock.data('rsTimeout',setTimeout(function(){animObj[self._vendorPref+self._TD]='0ms';animObj.zIndex=0;animObj.display='none';oldBlock.data('rsTimeout','');oldBlock.css(animObj);setTimeout(function(){oldBlock.css('opacity',0);},16);},self._currAnimSpeed+60));}
animObj.display='block';animObj.zIndex=self._fadeZIndex;animObj.opacity=0;animObj[self._vendorPref+self._TD]='0ms';animObj[self._vendorPref+self._TTF]=$.rsCSS3Easing[self.st.easeInOut];animBlock.css(animObj);animBlock.data('rsTimeout',setTimeout(function(){animBlock.css(self._vendorPref+self._TD,self._currAnimSpeed+'ms');animBlock.data('rsTimeout',setTimeout(function(){animBlock.css('opacity',1);animBlock.data('rsTimeout','');},20));},20));}}
self._isAnimating=true;if(self.loadingTimeout){clearTimeout(self.loadingTimeout);}
if(customComplete){self.loadingTimeout=setTimeout(function(){self.loadingTimeout=null;customComplete.call();},self._currAnimSpeed+60);}else{self.loadingTimeout=setTimeout(function(){self.loadingTimeout=null;self._animationComplete(dir);},self._currAnimSpeed+60);}
function clearTimeouts(){var t;if(oldBlock){t=oldBlock.data('rsTimeout');if(t){if(oldBlock!==animBlock){oldBlock.css({opacity:0,display:'none',zIndex:0});}
clearTimeout(t);oldBlock.data('rsTimeout','');}}
t=animBlock.data('rsTimeout');if(t){clearTimeout(t);animBlock.data('rsTimeout','');}}},_stopAnimation:function(noCSS3){var self=this;self._isAnimating=false;clearTimeout(self.loadingTimeout);if(self._isMove){if(!self._useCSS3Transitions){self._slidesContainer.stop(true);self._sPosition=parseInt(self._slidesContainer.css(self._xProp),10);}else if(!noCSS3){var oldPos=self._sPosition;var newPos=self._currRenderPosition=self._getTransformProp();self._slidesContainer.css((self._vendorPref+self._TD),'0ms');if(oldPos!==newPos){self._setPosition(newPos);}}}else{if(self._fadeZIndex>20){self._fadeZIndex=10;}else{self._fadeZIndex++;}}},_getTransformProp:function(){var self=this,transform=window.getComputedStyle(self._slidesContainer.get(0),null).getPropertyValue(self._vendorPref+'transform'),explodedMatrix=transform.replace(/^matrix\(/i,'').split(/, |\)$/g),isMatrix3d=(explodedMatrix[0].indexOf('matrix3d')===0);return parseInt(explodedMatrix[(self._slidesHorizontal?(isMatrix3d?12:4):(isMatrix3d?13:5))],10);},_getCSS3Prop:function(pos,hor){var self=this;return self._useCSS3Transitions?self._tPref1+(hor?(pos+self._tPref2+0):(0+self._tPref2+pos))+self._tPref3:pos;},_animationComplete:function(dir){var self=this;if(!self._isMove){self._currHolder.css('z-index',0);self._fadeZIndex=10;}
self._isAnimating=false;self.staticSlideId=self.currSlideId;self._updateBlocksContent();self._slidesMoved=false;self.ev.trigger('rsAfterSlideChange');},_doBackAndForthAnim:function(type,userAction){var self=this,newPos=(-self._realId-self._idOffset)*self._slideSize;if(self.numSlides===0||self._isAnimating){return;}
if(self.st.loopRewind){self.goTo(type==='left'?self.numSlides-1:0,userAction);return;}
if(self._isMove){self._currAnimSpeed=200;var allAnimComplete=function(){self._isAnimating=false;};var firstAnimComplete=function(){self._isAnimating=false;self._animateTo(newPos,'',false,true,allAnimComplete);};self._animateTo(newPos+(type==='left'?30:-30),'',false,true,firstAnimComplete);}},_resizeImage:function(slideObject,useClone){var isRoot=true;if(slideObject.isRendered){return;}
var img=slideObject.content;var classToFind='rsMainSlideImage';var isVideo;var self=this,imgAlignCenter=self.st.imageAlignCenter,imgScaleMode=self.st.imageScaleMode,tempEl,bMargin;if(slideObject.videoURL){classToFind='rsVideoContainer';if(imgScaleMode!=='fill'){isVideo=true;}else{tempEl=img;if(!tempEl.hasClass(classToFind)){tempEl=tempEl.find('.'+classToFind);}
tempEl.css({width:'100%',height:'100%'});classToFind='rsMainSlideImage';}}
if(!img.hasClass(classToFind)){isRoot=false;img=img.find('.'+classToFind);}
if(!img){return;}
var baseImageWidth=slideObject.iW,baseImageHeight=slideObject.iH;slideObject.isRendered=true;if(imgScaleMode==='none'&&!imgAlignCenter){return;}
if(imgScaleMode!=='fill'){bMargin=self._imagePadding;}else{bMargin=0;}
var containerWidth=self._wrapWidth-bMargin*2,containerHeight=self._wrapHeight-bMargin*2,hRatio,vRatio,ratio,nWidth,nHeight,cssObj={};if(imgScaleMode==='fit-if-smaller'){if(baseImageWidth>containerWidth||baseImageHeight>containerHeight){imgScaleMode='fit';}}
if(imgScaleMode==='fill'||imgScaleMode==='fit'){hRatio=containerWidth/baseImageWidth;vRatio=containerHeight/baseImageHeight;if(imgScaleMode=="fill"){ratio=hRatio>vRatio?hRatio:vRatio;}else if(imgScaleMode=="fit"){ratio=hRatio<vRatio?hRatio:vRatio;}else{ratio=1;}
nWidth=Math.ceil(baseImageWidth*ratio,10);nHeight=Math.ceil(baseImageHeight*ratio,10);}else{nWidth=baseImageWidth;nHeight=baseImageHeight;}
if(imgScaleMode!=='none'){cssObj.width=nWidth;cssObj.height=nHeight;if(isVideo){img.find('.rsImg').css({width:'100%',height:'100%'});}}
if(imgAlignCenter){cssObj.marginLeft=Math.floor((containerWidth-nWidth)/2)+bMargin;cssObj.marginTop=Math.floor((containerHeight-nHeight)/2)+bMargin;}
img.css(cssObj);}};$.rsProto=RoyalSlider.prototype;$.fn.royalSlider=function(options){var args=arguments;return this.each(function(){var self=$(this);if(typeof options==="object"||!options){if(!self.data('royalSlider')){self.data('royalSlider',new RoyalSlider(self,options));}}else{var royalSlider=self.data('royalSlider');if(royalSlider&&royalSlider[options]){return royalSlider[options].apply(royalSlider,Array.prototype.slice.call(args,1));}}});};$.fn.royalSlider.defaults={slidesSpacing:8,startSlideId:0,loop:false,loopRewind:false,numImagesToPreload:4,fadeinLoadedSlide:true,slidesOrientation:'horizontal',transitionType:'move',transitionSpeed:600,controlNavigation:'bullets',controlsInside:true,arrowsNav:true,arrowsNavAutoHide:true,navigateByClick:true,randomizeSlides:false,sliderDrag:true,sliderTouch:true,keyboardNavEnabled:false,fadeInAfterLoaded:true,allowCSS3:true,allowCSS3OnWebkit:true,addActiveClass:false,autoHeight:false,easeOut:'easeOutSine',easeInOut:'easeInOutSine',minSlideOffset:10,imageScaleMode:"fit-if-smaller",imageAlignCenter:true,imageScalePadding:4,usePreloader:true,autoScaleSlider:false,autoScaleSliderWidth:800,autoScaleSliderHeight:400,autoScaleHeight:true,arrowsNavHideOnTouch:false,globalCaption:false,slidesDiff:2};$.rsCSS3Easing={easeOutSine:'cubic-bezier(0.390, 0.575, 0.565, 1.000)',easeInOutSine:'cubic-bezier(0.445, 0.050, 0.550, 0.950)'};$.extend(jQuery.easing,{easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;}});})(jQuery,window);(function($){"use strict";$.rsProto._initActiveClass=function(){var updClassTimeout,self=this,aSlideClass='rsActiveSlide';if(self.st.addActiveClass){self.ev.on('rsOnUpdateNav',function(){if(updClassTimeout)clearTimeout(updClassTimeout);updClassTimeout=setTimeout(function(){if(self._oldHolder)self._oldHolder.removeClass(aSlideClass);if(self._currHolder)self._currHolder.addClass(aSlideClass);updClassTimeout=null;},50);});}};$.rsModules.activeClass=$.rsProto._initActiveClass;})(jQuery);(function($){"use strict";$.extend($.rsProto,{_initAutoHeight:function(){var self=this;if(self.st.autoHeight){var holder,tH,currSlide,currHeight,firstTime=true,updHeight=function(animate){currSlide=self.slides[self.currSlideId];holder=currSlide.holder;if(holder){tH=holder.height();if(tH&&tH!==currHeight&&tH>(self.st.minAutoHeight||30)){self._wrapHeight=tH;if(self._useCSS3Transitions||!animate){self._sliderOverflow.css('height',tH);}else{self._sliderOverflow.stop(true,true).animate({height:tH},self.st.transitionSpeed);}
self.ev.trigger('rsAutoHeightChange',tH);if(firstTime){if(self._useCSS3Transitions){setTimeout(function(){self._sliderOverflow.css(self._vendorPref+'transition','height '+self.st.transitionSpeed+'ms ease-in-out');},16);}
firstTime=false;}}}};self.ev.on('rsMaybeSizeReady.rsAutoHeight',function(e,slideObject){if(currSlide===slideObject){updHeight();}});self.ev.on('rsAfterContentSet.rsAutoHeight',function(e,slideObject){if(currSlide===slideObject){updHeight();}});self.slider.addClass('rsAutoHeight');self.ev.one('rsAfterInit',function(){setTimeout(function(){updHeight(false);setTimeout(function(){self.slider.append('<div style="clear:both; float: none;"></div>');},16);},16);});self.ev.on('rsBeforeAnimStart',function(){updHeight(true);});self.ev.on('rsBeforeSizeSet',function(){setTimeout(function(){updHeight(false);},16);});}}});$.rsModules.autoHeight=$.rsProto._initAutoHeight;})(jQuery);(function($){"use strict";$.extend($.rsProto,{_initAutoplay:function(){var self=this,del;self._autoPlayDefaults={enabled:false,stopAtAction:true,pauseOnHover:true,delay:2000};if(!self.st.autoPlay&&self.st.autoplay){self.st.autoPlay=self.st.autoplay;}
self.st.autoPlay=$.extend({},self._autoPlayDefaults,self.st.autoPlay);if(self.st.autoPlay.enabled){self.ev.on('rsBeforeParseNode',function(e,content,obj){content=$(content);del=content.attr('data-rsDelay');if(del){obj.customDelay=parseInt(del,10);}});self.ev.one('rsAfterInit',function(){self._setupAutoPlay();});self.ev.on('rsBeforeDestroy',function(){self.stopAutoPlay();self.slider.off('mouseenter mouseleave');$(window).off('blur'+self.ns+' focus'+self.ns);});}},_setupAutoPlay:function(){var self=this;self.startAutoPlay();self.ev.on('rsAfterContentSet',function(e,slideObject){if(!self._isDragging&&!self._isAnimating&&self._autoPlayEnabled&&slideObject===self.currSlide){self._play();}});self.ev.on('rsDragRelease',function(){if(self._autoPlayEnabled&&self._autoPlayPaused){self._autoPlayPaused=false;self._play();}});self.ev.on('rsAfterSlideChange',function(){if(self._autoPlayEnabled){if(self._autoPlayPaused){self._autoPlayPaused=false;if(self.currSlide.isLoaded){self._play();}}}});self.ev.on('rsDragStart',function(){if(self._autoPlayEnabled){if(self.st.autoPlay.stopAtAction){self.stopAutoPlay();}else{self._autoPlayPaused=true;self._pause();}}});self.ev.on('rsBeforeMove',function(e,type,userAction){if(self._autoPlayEnabled){if(userAction&&self.st.autoPlay.stopAtAction){self.stopAutoPlay();}else{self._autoPlayPaused=true;self._pause();}}});self._pausedByVideo=false;self.ev.on('rsVideoStop',function(){if(self._autoPlayEnabled){self._pausedByVideo=false;self._play();}});self.ev.on('rsVideoPlay',function(){if(self._autoPlayEnabled){self._autoPlayPaused=false;self._pause();self._pausedByVideo=true;}});$(window).on('blur'+self.ns,function(){if(self._autoPlayEnabled){self._autoPlayPaused=true;self._pause();}}).on('focus'+self.ns,function(){if(self._autoPlayEnabled&&self._autoPlayPaused){self._autoPlayPaused=false;self._play();}});if(self.st.autoPlay.pauseOnHover){self._pausedByHover=false;self.slider.hover(function(){if(self._autoPlayEnabled){self._autoPlayPaused=false;self._pause();self._pausedByHover=true;}},function(){if(self._autoPlayEnabled){self._pausedByHover=false;self._play();}});}},toggleAutoPlay:function(){var self=this;if(self._autoPlayEnabled){self.stopAutoPlay();}else{self.startAutoPlay();}},startAutoPlay:function(){var self=this;self._autoPlayEnabled=true;if(self.currSlide.isLoaded){self._play();}},stopAutoPlay:function(){var self=this;self._pausedByVideo=self._pausedByHover=self._autoPlayPaused=self._autoPlayEnabled=false;self._pause();},_play:function(){var self=this;if(!self._pausedByHover&&!self._pausedByVideo){self._autoPlayRunning=true;if(self._autoPlayTimeout){clearTimeout(self._autoPlayTimeout);}
self._autoPlayTimeout=setTimeout(function(){var changed;if(!self._loop&&!self.st.loopRewind){changed=true;self.st.loopRewind=true;}
self.next(true);if(changed){changed=false;self.st.loopRewind=false;}},!self.currSlide.customDelay?self.st.autoPlay.delay:self.currSlide.customDelay);}},_pause:function(){var self=this;if(!self._pausedByHover&&!self._pausedByVideo){self._autoPlayRunning=false;if(self._autoPlayTimeout){clearTimeout(self._autoPlayTimeout);self._autoPlayTimeout=null;}}}});$.rsModules.autoplay=$.rsProto._initAutoplay;})(jQuery);(function($){"use strict";$.extend($.rsProto,{_initBullets:function(){var self=this;if(self.st.controlNavigation==='bullets'){var itemHTML='<div class="rsNavItem rsBullet"><span></span></div>';self.ev.one('rsAfterPropsSetup',function(){self._controlNavEnabled=true;self.slider.addClass('rsWithBullets');var out='<div class="rsNav rsBullets">';for(var i=0;i<self.numSlides;i++){out+=itemHTML;}
self._controlNav=out=$(out+'</div>');self._controlNavItems=out.appendTo(self.slider).children();self._controlNav.on('click.rs','.rsNavItem',function(e){if(!self._thumbsDrag){self.goTo($(this).index());}});});self.ev.on('rsOnAppendSlide',function(e,parsedSlide,index){if(index>=self.numSlides){self._controlNav.append(itemHTML);}else{self._controlNavItems.eq(index).before(itemHTML);}
self._controlNavItems=self._controlNav.children();});self.ev.on('rsOnRemoveSlide',function(e,index){var itemToRemove=self._controlNavItems.eq(index);if(itemToRemove&&itemToRemove.length){itemToRemove.remove();self._controlNavItems=self._controlNav.children();}});self.ev.on('rsOnUpdateNav',function(){var id=self.currSlideId,currItem,prevItem;if(self._prevNavItem){self._prevNavItem.removeClass('rsNavSelected');}
currItem=self._controlNavItems.eq(id);currItem.addClass('rsNavSelected');self._prevNavItem=currItem;});}}});$.rsModules.bullets=$.rsProto._initBullets;})(jQuery);(function($){"use strict";$.extend($.rsProto,{_initDeeplinking:function(){var self=this,isBlocked,hashTimeout,hashChangeTimeout;self._hashDefaults={enabled:false,change:false,prefix:''};self.st.deeplinking=$.extend({},self._hashDefaults,self.st.deeplinking);if(self.st.deeplinking.enabled){var hashChange=self.st.deeplinking.change,pText=self.st.deeplinking.prefix,prefix='#'+pText,getSlideIdByHash=function(){var hash=window.location.hash;if(hash&&hash.indexOf(pText)>0){hash=parseInt(hash.substring(prefix.length),10);if(hash>=0){return hash-1;}}
return-1;};var id=getSlideIdByHash();if(id!==-1){self.st.startSlideId=id;}
if(hashChange){$(window).on('hashchange'+self.ns,function(e){if(!isBlocked){var id=getSlideIdByHash();if(id<0){return;}
if(id>self.numSlides-1)
id=self.numSlides-1;self.goTo(id);}});self.ev.on('rsBeforeAnimStart',function(){if(hashTimeout){clearTimeout(hashTimeout);}
if(hashChangeTimeout){clearTimeout(hashChangeTimeout);}});self.ev.on('rsAfterSlideChange',function(){if(hashTimeout){clearTimeout(hashTimeout);}
if(hashChangeTimeout){clearTimeout(hashChangeTimeout);}
hashChangeTimeout=setTimeout(function(){isBlocked=true;window.location.replace((''+window.location).split('#')[0]+prefix+(self.currSlideId+1));hashTimeout=setTimeout(function(){isBlocked=false;hashTimeout=null;},60);},400);});}
self.ev.on('rsBeforeDestroy',function(){hashChangeTimeout=null;hashTimeout=null;if(hashChange){$(window).off('hashchange'+self.ns);}});}}});$.rsModules.deeplinking=$.rsProto._initDeeplinking;})(jQuery);/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */(function($,window,undefined){'$:nomunge';var str_hashchange='hashchange',doc=document,fake_onhashchange,special=$.event.special,doc_mode=doc.documentMode,supports_onhashchange='on'+str_hashchange in window&&(doc_mode===undefined||doc_mode>7);function get_fragment(url){url=url||location.href;return'#'+url.replace(/^[^#]*#?(.*)$/,'$1');};$.fn[str_hashchange]=function(fn){return fn?this.bind(str_hashchange,fn):this.trigger(str_hashchange);};$.fn[str_hashchange].delay=50;special[str_hashchange]=$.extend(special[str_hashchange],{setup:function(){if(supports_onhashchange){return false;}
$(fake_onhashchange.start);},teardown:function(){if(supports_onhashchange){return false;}
$(fake_onhashchange.stop);}});fake_onhashchange=(function(){var self={},timeout_id,last_hash=get_fragment(),fn_retval=function(val){return val;},history_set=fn_retval,history_get=fn_retval;self.start=function(){timeout_id||poll();};self.stop=function(){timeout_id&&clearTimeout(timeout_id);timeout_id=undefined;};function poll(){var hash=get_fragment(),history_hash=history_get(last_hash);if(hash!==last_hash){history_set(last_hash=hash,history_hash);$(window).trigger(str_hashchange);}else if(history_hash!==last_hash){location.href=location.href.replace(/#.*/,'')+history_hash;}
timeout_id=setTimeout(poll,$.fn[str_hashchange].delay);};window.attachEvent&&!window.addEventListener&&!supports_onhashchange&&(function(){var iframe,iframe_src;self.start=function(){if(!iframe){iframe_src=$.fn[str_hashchange].src;iframe_src=iframe_src&&iframe_src+get_fragment();iframe=$('<iframe tabindex="-1" title="empty"/>').hide().one('load',function(){iframe_src||history_set(get_fragment());poll();}).attr('src',iframe_src||'javascript:0').insertAfter('body')[0].contentWindow;doc.onpropertychange=function(){try{if(event.propertyName==='title'){iframe.document.title=doc.title;}}catch(e){}};}};self.stop=fn_retval;history_get=function(){return get_fragment(iframe.location.href);};history_set=function(hash,history_hash){var iframe_doc=iframe.document,domain=$.fn[str_hashchange].domain;if(hash!==history_hash){iframe_doc.title=doc.title;iframe_doc.open();domain&&iframe_doc.write('<script>document.domain="'+domain+'"</script>');iframe_doc.close();iframe.location.hash=hash;}};})();return self;})();})(jQuery,this);(function($){"use strict";$.extend($.rsProto,{_initFullscreen:function(){var self=this;self._fullscreenDefaults={enabled:false,keyboardNav:true,buttonFS:true,nativeFS:false,doubleTap:true};self.st.fullscreen=$.extend({},self._fullscreenDefaults,self.st.fullscreen);if(self.st.fullscreen.enabled){self.ev.one('rsBeforeSizeSet',function(){self._setupFullscreen();});}},_setupFullscreen:function(){var self=this;self._fsKeyboard=(!self.st.keyboardNavEnabled&&self.st.fullscreen.keyboardNav);if(self.st.fullscreen.nativeFS){var fullScreenApi={supportsFullScreen:false,isFullScreen:function(){return false;},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:'',prefix:''},browserPrefixes='webkit moz o ms khtml'.split(' ');if(typeof document.cancelFullScreen!='undefined'){fullScreenApi.supportsFullScreen=true;}else{for(var i=0,il=browserPrefixes.length;i<il;i++){fullScreenApi.prefix=browserPrefixes[i];if(typeof document[fullScreenApi.prefix+'CancelFullScreen']!='undefined'){fullScreenApi.supportsFullScreen=true;break;}}}
if(fullScreenApi.supportsFullScreen){self.nativeFS=true;fullScreenApi.fullScreenEventName=fullScreenApi.prefix+'fullscreenchange'+self.ns;fullScreenApi.isFullScreen=function(){switch(this.prefix){case'':return document.fullScreen;case'webkit':return document.webkitIsFullScreen;default:return document[this.prefix+'FullScreen'];}}
fullScreenApi.requestFullScreen=function(el){return(this.prefix==='')?el.requestFullScreen():el[this.prefix+'RequestFullScreen']();}
fullScreenApi.cancelFullScreen=function(el){return(this.prefix==='')?document.cancelFullScreen():document[this.prefix+'CancelFullScreen']();}
self._fullScreenApi=fullScreenApi;}else{self._fullScreenApi=false;}}
if(self.st.fullscreen.buttonFS){self._fsBtn=$('<div class="rsFullscreenBtn"><div class="rsFullscreenIcn"></div></div>').appendTo(self._controlsContainer).on('click.rs',function(){if(self.isFullscreen){self.exitFullscreen();}else{self.enterFullscreen();}});}},enterFullscreen:function(preventNative){var self=this;if(self._fullScreenApi){if(!preventNative){self._doc.on(self._fullScreenApi.fullScreenEventName,function(e){if(!self._fullScreenApi.isFullScreen()){self.exitFullscreen(true);}else{self.enterFullscreen(true);}});self._fullScreenApi.requestFullScreen($('html')[0]);return;}else{self._fullScreenApi.requestFullScreen($('html')[0]);}}
if(self._isFullscreenUpdating){return;}
self._isFullscreenUpdating=true;self._doc.on('keyup'+self.ns+'fullscreen',function(e){if(e.keyCode===27){self.exitFullscreen();}});if(self._fsKeyboard){self._bindKeyboardNav();}
var win=$(window);self._fsScrollTopOnEnter=win.scrollTop();self._fsScrollLeftOnEnter=win.scrollLeft();self._htmlStyle=$('html').attr('style');self._bodyStyle=$('body').attr('style');self._sliderStyle=self.slider.attr('style');$('body, html').css({overflow:'hidden',height:'100%',width:'100%',margin:'0',padding:'0'});self.slider.addClass('rsFullscreen');var item,i;for(i=0;i<self.numSlides;i++){item=self.slides[i];item.isRendered=false;if(item.bigImage){item.isBig=true;item.isMedLoaded=item.isLoaded;item.isMedLoading=item.isLoading;item.medImage=item.image;item.medIW=item.iW;item.medIH=item.iH;item.slideId=-99;if(item.bigImage!==item.medImage){item.sizeType='big';}
item.isLoaded=item.isBigLoaded;item.isLoading=false;item.image=item.bigImage;item.images[0]=item.bigImage;item.iW=item.bigIW;item.iH=item.bigIH;item.isAppended=item.contentAdded=false;self._updateItemSrc(item);}}
self.isFullscreen=true;self._isFullscreenUpdating=false;self.updateSliderSize();self.ev.trigger('rsEnterFullscreen');},exitFullscreen:function(preventNative){var self=this;if(self._fullScreenApi){if(!preventNative){self._fullScreenApi.cancelFullScreen($('html')[0]);return;}
self._doc.off(self._fullScreenApi.fullScreenEventName);}
if(self._isFullscreenUpdating){return;}
self._isFullscreenUpdating=true;self._doc.off('keyup'+self.ns+'fullscreen');if(self._fsKeyboard){self._doc.off('keydown'+self.ns);}
$('html').attr('style',self._htmlStyle||'');$('body').attr('style',self._bodyStyle||'');var item,i;for(i=0;i<self.numSlides;i++){item=self.slides[i];item.isRendered=false;if(item.bigImage){item.isBig=false;item.slideId=-99;item.isBigLoaded=item.isLoaded;item.isBigLoading=item.isLoading;item.bigImage=item.image;item.bigIW=item.iW;item.bigIH=item.iH;item.isLoaded=item.isMedLoaded;item.isLoading=false;item.image=item.medImage;item.images[0]=item.medImage;item.iW=item.medIW;item.iH=item.medIH;item.isAppended=item.contentAdded=false;self._updateItemSrc(item,true);if(item.bigImage!==item.medImage){item.sizeType='med';}}}
self.isFullscreen=false;var win=$(window);win.scrollTop(self._fsScrollTopOnEnter);win.scrollLeft(self._fsScrollLeftOnEnter);self._isFullscreenUpdating=false;self.slider.removeClass('rsFullscreen');self.updateSliderSize();setTimeout(function(){self.updateSliderSize();},1);self.ev.trigger('rsExitFullscreen');},_updateItemSrc:function(item,exit){var newHTML=(!item.isLoaded&&!item.isLoading)?'<a class="rsImg rsMainSlideImage" href="'+item.image+'"></a>':'<img class="rsImg rsMainSlideImage" src="'+item.image+'"/>';if(item.content.hasClass('rsImg')){item.content=$(newHTML);}else{item.content.find('.rsImg').eq(0).replaceWith(newHTML);}
if(!item.isLoaded&&!item.isLoading&&item.holder){item.holder.html(item.content);}}});$.rsModules.fullscreen=$.rsProto._initFullscreen;})(jQuery);(function($){"use strict";$.extend($.rsProto,{_initGlobalCaption:function(){var self=this;if(self.st.globalCaption){var setCurrCaptionHTML=function(){self.globalCaption.html(self.currSlide.caption);};self.ev.on('rsAfterInit',function(){self.globalCaption=$('<div class="rsGCaption"></div>').appendTo(!self.st.globalCaptionInside?self.slider:self._sliderOverflow);setCurrCaptionHTML();});self.ev.on('rsBeforeAnimStart',function(){setCurrCaptionHTML();});}}});$.rsModules.globalCaption=$.rsProto._initGlobalCaption;})(jQuery);(function($){"use strict";$.extend($.rsProto,{_initAutoHideControlNav:function(){var self=this;if(self.st.navAutoHide&&!self.hasTouch){self.ev.one('rsAfterInit',function(){if(self._controlNav){self._controlNav.addClass('rsHidden');var hoverEl=self.slider;hoverEl.one("mousemove.controlnav",function(){self._controlNav.removeClass('rsHidden');});hoverEl.hover(function(){self._controlNav.removeClass('rsHidden');},function(){self._controlNav.addClass('rsHidden');});}});}}});$.rsModules.autoHideNav=$.rsProto._initAutoHideControlNav;})(jQuery);(function($){"use strict";$.extend($.rsProto,{_initThumbs:function(){var self=this;if(self.st.controlNavigation==='thumbnails'){self._thumbsDefaults={drag:true,touch:true,orientation:'horizontal',navigation:true,arrows:true,arrowLeft:null,arrowRight:null,spacing:4,arrowsAutoHide:false,appendSpan:false,transitionSpeed:600,autoCenter:true,fitInViewport:true,firstMargin:true,paddingTop:0,paddingBottom:0};self.st.thumbs=$.extend({},self._thumbsDefaults,self.st.thumbs);self._firstThumbMoved=true;if(self.st.thumbs.firstMargin===false){self.st.thumbs.firstMargin=0;}
else if(self.st.thumbs.firstMargin===true){self.st.thumbs.firstMargin=self.st.thumbs.spacing;}
self.ev.on('rsBeforeParseNode',function(e,content,obj){content=$(content);obj.thumbnail=content.find('.rsTmb').remove();if(!obj.thumbnail.length){obj.thumbnail=content.attr('data-rsTmb');if(!obj.thumbnail){obj.thumbnail=content.find('.rsImg').attr('data-rsTmb');}
if(!obj.thumbnail){obj.thumbnail='';}else{obj.thumbnail='<img src="'+obj.thumbnail+'"/>';}}else{obj.thumbnail=$(document.createElement('div')).append(obj.thumbnail).html();}});self.ev.one('rsAfterPropsSetup',function(){self._createThumbs();});self._prevNavItem=null;self.ev.on('rsOnUpdateNav',function(){var currItem=$(self._controlNavItems[self.currSlideId]);if(currItem===self._prevNavItem){return;}
if(self._prevNavItem){self._prevNavItem.removeClass('rsNavSelected');self._prevNavItem=null;}
if(self._thumbsNavigation){self._setCurrentThumb(self.currSlideId);}
self._prevNavItem=currItem.addClass('rsNavSelected');});self.ev.on('rsOnAppendSlide',function(e,parsedSlide,index){var html='<div'+self._thumbsMargin+' class="rsNavItem rsThumb">'+self._addThumbHTML+parsedSlide.thumbnail+'</div>';if(self._useCSS3Transitions){self._thumbsContainer.css(self._vendorPref+'transition-duration','0ms');}
if(index>=self.numSlides){self._thumbsContainer.append(html);}else{self._controlNavItems.eq(index).before(html);}
self._controlNavItems=self._thumbsContainer.children();self.updateThumbsSize(true);});self.ev.on('rsOnRemoveSlide',function(e,index){var itemToRemove=self._controlNavItems.eq(index);if(itemToRemove){if(self._useCSS3Transitions){self._thumbsContainer.css(self._vendorPref+'transition-duration','0ms');}
itemToRemove.remove();self._controlNavItems=self._thumbsContainer.children();self.updateThumbsSize(true);}});}},_createThumbs:function(){var self=this,tText='rsThumbs',thumbSt=self.st.thumbs,out='',style,item,spacing=thumbSt.spacing;self._controlNavEnabled=true;self._thumbsHorizontal=(thumbSt.orientation==='vertical')?false:true;self._thumbsMargin=style=spacing?' style="margin-'+(self._thumbsHorizontal?'right':'bottom')+':'+spacing+'px;"':'';self._thumbsPosition=0;self._isThumbsAnimating=false;self._thumbsDrag=false;self._thumbsNavigation=false;self._thumbsArrows=(thumbSt.arrows&&thumbSt.navigation);var pl=(self._thumbsHorizontal?'Hor':'Ver');self.slider.addClass('rsWithThumbs'+' rsWithThumbs'+pl);out+='<div class="rsNav rsThumbs rsThumbs'+pl+'"><div class="'+tText+'Container">';self._addThumbHTML=thumbSt.appendSpan?'<span class="thumbIco"></span>':'';for(var i=0;i<self.numSlides;i++){item=self.slides[i];out+='<div'+style+' class="rsNavItem rsThumb">'+item.thumbnail+self._addThumbHTML+'</div>';}
out=$(out+'</div></div>');var o={};if(thumbSt.paddingTop){o[self._thumbsHorizontal?'paddingTop':'paddingLeft']=thumbSt.paddingTop;}
if(thumbSt.paddingBottom){o[self._thumbsHorizontal?'paddingBottom':'paddingRight']=thumbSt.paddingBottom;}
out.css(o);self._thumbsContainer=$(out).find('.'+tText+'Container');if(self._thumbsArrows){tText+='Arrow';if(thumbSt.arrowLeft){self._thumbsArrowLeft=thumbSt.arrowLeft;}else{self._thumbsArrowLeft=$('<div class="'+tText+' '+tText+'Left"><div class="'+tText+'Icn"></div></div>');out.append(self._thumbsArrowLeft);}
if(thumbSt.arrowRight){self._thumbsArrowRight=thumbSt.arrowRight;}else{self._thumbsArrowRight=$('<div class="'+tText+' '+tText+'Right"><div class="'+tText+'Icn"></div></div>');out.append(self._thumbsArrowRight);}
self._thumbsArrowLeft.click(function(){var viewportSize=Math.floor(self._thumbsViewportSize/self._thumbSize),thumbId=Math.floor(self._thumbsPosition/self._thumbSize),newPos=(thumbId+self._visibleThumbsPerView)*self._thumbSize+self.st.thumbs.firstMargin;self._animateThumbsTo(newPos>self._thumbsMinPosition?self._thumbsMinPosition:newPos);});self._thumbsArrowRight.click(function(){var viewportSize=Math.floor(self._thumbsViewportSize/self._thumbSize),thumbId=Math.floor(self._thumbsPosition/self._thumbSize),newPos=(thumbId-self._visibleThumbsPerView)*self._thumbSize+self.st.thumbs.firstMargin;self._animateThumbsTo(newPos<self._thumbsMaxPosition?self._thumbsMaxPosition:newPos);});if(thumbSt.arrowsAutoHide&&!self.hasTouch){self._thumbsArrowLeft.css('opacity',0);self._thumbsArrowRight.css('opacity',0);out.one("mousemove.rsarrowshover",function(){if(self._thumbsNavigation){self._thumbsArrowLeft.css('opacity',1);self._thumbsArrowRight.css('opacity',1);}});out.hover(function(){if(self._thumbsNavigation){self._thumbsArrowLeft.css('opacity',1);self._thumbsArrowRight.css('opacity',1);}},function(){if(self._thumbsNavigation){self._thumbsArrowLeft.css('opacity',0);self._thumbsArrowRight.css('opacity',0);}});}}
self._controlNav=out;self._controlNavItems=self._thumbsContainer.children();if(self.msEnabled&&self.st.thumbs.navigation){self._thumbsContainer.css('-ms-touch-action',self._thumbsHorizontal?'pan-y':'pan-x');}
self.slider.append(out);self._thumbsEnabled=true;self._thumbsSpacing=spacing;if(thumbSt.navigation){if(self._useCSS3Transitions){self._thumbsContainer.css(self._vendorPref+'transition-property',self._vendorPref+'transform');}}
self._controlNav.on('click.rs','.rsNavItem',function(e){if(!self._thumbsDrag){self.goTo($(this).index());}});self.ev.off('rsBeforeSizeSet.thumbs').on('rsBeforeSizeSet.thumbs',function(){self._realWrapSize=self._thumbsHorizontal?self._wrapHeight:self._wrapWidth;self.updateThumbsSize(true);});self.ev.off('rsAutoHeightChange.thumbs').on('rsAutoHeightChange.thumbs',function(e,newHeight){self.updateThumbsSize(true,newHeight);});},updateThumbsSize:function(isResize,newHeight){var self=this,firstThumb=self._controlNavItems.first(),cssObj={};var numItems=self._controlNavItems.length;self._thumbSize=(self._thumbsHorizontal?firstThumb.outerWidth():firstThumb.outerHeight())+self._thumbsSpacing;self._thumbsContainerSize=numItems*self._thumbSize-self._thumbsSpacing;cssObj[self._thumbsHorizontal?'width':'height']=self._thumbsContainerSize+self._thumbsSpacing;self._thumbsViewportSize=self._thumbsHorizontal?self._controlNav.width():(newHeight!==undefined?newHeight:self._controlNav.height());if(self._thumbsEnabled&&(self.isFullscreen||self.st.thumbs.fitInViewport)){if(self._thumbsHorizontal){self._wrapHeight=self._realWrapSize-self._controlNav.outerHeight();}else{self._wrapWidth=self._realWrapSize-self._controlNav.outerWidth();}}
if(!self._thumbsViewportSize){return;}
self._thumbsMaxPosition=-(self._thumbsContainerSize-self._thumbsViewportSize)-(self.st.thumbs.firstMargin);self._thumbsMinPosition=self.st.thumbs.firstMargin;self._visibleThumbsPerView=Math.floor(self._thumbsViewportSize/self._thumbSize);if(self._thumbsContainerSize<self._thumbsViewportSize){if(self.st.thumbs.autoCenter){self._setThumbsPosition((self._thumbsViewportSize-self._thumbsContainerSize)/2);}
if(self.st.thumbs.arrows&&self._thumbsArrowLeft){var arrDisClass='rsThumbsArrowDisabled';self._thumbsArrowLeft.addClass(arrDisClass);self._thumbsArrowRight.addClass(arrDisClass);}
self._thumbsNavigation=false;self._thumbsDrag=false;self._controlNav.off(self._downEvent);}else if(self.st.thumbs.navigation&&!self._thumbsNavigation){self._thumbsNavigation=true;if((!self.hasTouch&&self.st.thumbs.drag)||(self.hasTouch&&self.st.thumbs.touch)){self._thumbsDrag=true;self._controlNav.on(self._downEvent,function(e){self._onDragStart(e,true);});}}
self._thumbsContainer.css(cssObj);if(isResize&&newHeight){self._setCurrentThumb(self.currSlideId,true);}},setThumbsOrientation:function(newPlacement,dontUpdateSize){var self=this;if(self._thumbsEnabled){self.st.thumbs.orientation=newPlacement;self._controlNav.remove();self.slider.removeClass('rsWithThumbsHor rsWithThumbsVer');self._createThumbs();self._controlNav.off(self._downEvent);if(!dontUpdateSize){self.updateSliderSize(true);}}},_setThumbsPosition:function(pos){var self=this;self._thumbsPosition=pos;if(self._useCSS3Transitions){self._thumbsContainer.css(self._xProp,self._tPref1+(self._thumbsHorizontal?(pos+self._tPref2+0):(0+self._tPref2+pos))+self._tPref3);}else{self._thumbsContainer.css(self._thumbsHorizontal?self._xProp:self._yProp,pos);}},_animateThumbsTo:function(pos,speed,outEasing,bounceAnimPosition,bounceAnimSpeed){var self=this;if(!self._thumbsNavigation){return;}
if(!speed){speed=self.st.thumbs.transitionSpeed;}
self._thumbsPosition=pos;if(self._thumbsAnimTimeout){clearTimeout(self._thumbsAnimTimeout);}
if(self._isThumbsAnimating){if(!self._useCSS3Transitions){self._thumbsContainer.stop();}
outEasing=true;}
var animObj={};self._isThumbsAnimating=true;if(!self._useCSS3Transitions){animObj[self._thumbsHorizontal?self._xProp:self._yProp]=pos+'px';self._thumbsContainer.animate(animObj,speed,outEasing?'easeOutCubic':self.st.easeInOut);}else{animObj[(self._vendorPref+'transition-duration')]=speed+'ms';animObj[(self._vendorPref+'transition-timing-function')]=outEasing?$.rsCSS3Easing[self.st.easeOut]:$.rsCSS3Easing[self.st.easeInOut];self._thumbsContainer.css(animObj);self._setThumbsPosition(pos);}
if(bounceAnimPosition){self._thumbsPosition=bounceAnimPosition;}
self._updateThumbsArrows();self._thumbsAnimTimeout=setTimeout(function(){self._isThumbsAnimating=false;if(bounceAnimSpeed){self._animateThumbsTo(bounceAnimPosition,bounceAnimSpeed,true);bounceAnimSpeed=null;}},speed);},_updateThumbsArrows:function(){var self=this;if(self._thumbsArrows){var arrDisClass='rsThumbsArrowDisabled';if(self._thumbsPosition===self._thumbsMinPosition){self._thumbsArrowLeft.addClass(arrDisClass);}else{self._thumbsArrowLeft.removeClass(arrDisClass);}
if(self._thumbsPosition===self._thumbsMaxPosition){self._thumbsArrowRight.addClass(arrDisClass);}else{self._thumbsArrowRight.removeClass(arrDisClass);}}},_setCurrentThumb:function(id,justSet){var self=this,incr=0,newPos,nextThumbEndPos=(id*self._thumbSize+self._thumbSize*2-self._thumbsSpacing+self._thumbsMinPosition),thumbId=Math.floor(self._thumbsPosition/self._thumbSize);if(!self._thumbsNavigation){return;}
if(self._firstThumbMoved){justSet=true;self._firstThumbMoved=false;}
if(nextThumbEndPos+self._thumbsPosition>self._thumbsViewportSize){if(id===self.numSlides-1){incr=1;}
thumbId=-id+self._visibleThumbsPerView-2+incr;newPos=thumbId*self._thumbSize+(self._thumbsViewportSize%self._thumbSize)+self._thumbsSpacing-self._thumbsMinPosition;}else{if(id!==0){if((id-1)*self._thumbSize<=-self._thumbsPosition+self._thumbsMinPosition&&(id-1)<=self.numSlides-self._visibleThumbsPerView){thumbId=-id+1;newPos=thumbId*self._thumbSize+self._thumbsMinPosition;}}else{thumbId=0;newPos=self._thumbsMinPosition;}}
if(newPos!==self._thumbsPosition){var checkPos=(newPos===undefined)?self._thumbsPosition:newPos;if(checkPos>self._thumbsMinPosition){self._setThumbsPosition(self._thumbsMinPosition);}else if(checkPos<self._thumbsMaxPosition){self._setThumbsPosition(self._thumbsMaxPosition);}else if(newPos!==undefined){if(!justSet){self._animateThumbsTo(newPos);}else{self._setThumbsPosition(newPos);}}}
self._updateThumbsArrows();}});$.rsModules.thumbnails=$.rsProto._initThumbs;})(jQuery);(function($){"use strict";$.extend($.rsProto,{_initVideo:function(){var self=this;self._videoDefaults={autoHideArrows:true,autoHideControlNav:false,autoHideBlocks:false,autoHideCaption:false,disableCSS3inFF:true,youTubeCode:'<iframe src="http://www.youtube.com/embed/%id%?rel=1&showinfo=0&autoplay=1&wmode=transparent" frameborder="no"></iframe>',vimeoCode:'<iframe src="http://player.vimeo.com/video/%id%?byline=0&portrait=0&autoplay=1" frameborder="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'};self.st.video=$.extend({},self._videoDefaults,self.st.video);self.ev.on('rsBeforeSizeSet',function(){if(self._isVideoPlaying){setTimeout(function(){var content=self._currHolder;content=content.hasClass('rsVideoContainer')?content:content.find('.rsVideoContainer');if(self._videoFrameHolder){self._videoFrameHolder.css({width:content.width(),height:content.height()});}},32);}});var isFF=self._browser.mozilla;self.ev.on('rsAfterParseNode',function(e,content,obj){var jqcontent=$(content),tempEl,hasVideo;if(obj.videoURL){if(self.st.video.disableCSS3inFF&&!hasVideo&&isFF){hasVideo=true;self._useCSS3Transitions=self._use3dTransform=false;}
var wrap=$('<div class="rsVideoContainer"></div>'),playBtn=$('<div class="rsBtnCenterer"><div class="rsPlayBtn"><div class="rsPlayBtnIcon"></div></div></div>');if(jqcontent.hasClass('rsImg')){obj.content=wrap.append(jqcontent).append(playBtn);}else{obj.content.find('.rsImg').wrap(wrap).after(playBtn);}}});self.ev.on('rsAfterSlideChange',function(){self.stopVideo();});},toggleVideo:function(){var self=this;if(!self._isVideoPlaying){return self.playVideo();}else{return self.stopVideo();}},playVideo:function(){var self=this;if(!self._isVideoPlaying){var currSlide=self.currSlide;if(!currSlide.videoURL){return false;}
self._playingVideoSlide=currSlide;var content=self._currVideoContent=currSlide.content;var url=currSlide.videoURL,videoId,regExp,match;if(url.match(/youtu\.be/i)||url.match(/youtube\.com/i)){regExp=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;match=url.match(regExp);if(match&&match[7].length==11){videoId=match[7];}
if(videoId!==undefined){self._videoFrameHolder=self.st.video.youTubeCode.replace("%id%",videoId);}}else if(url.match(/vimeo\.com/i)){regExp=/(www\.)?vimeo.com\/(\d+)($|\/)/;match=url.match(regExp);if(match){videoId=match[2];}
if(videoId!==undefined){self._videoFrameHolder=self.st.video.vimeoCode.replace("%id%",videoId);}}
self.videoObj=$(self._videoFrameHolder);self.ev.trigger('rsOnCreateVideoElement',[url]);if(self.videoObj.length){self._videoFrameHolder=$('<div class="rsVideoFrameHolder"><div class="rsPreloader"></div><div class="rsCloseVideoBtn"><div class="rsCloseVideoIcn"></div></div></div>');self._videoFrameHolder.find('.rsPreloader').after(self.videoObj);content=content.hasClass('rsVideoContainer')?content:content.find('.rsVideoContainer');self._videoFrameHolder.css({width:content.width(),height:content.height()}).find('.rsCloseVideoBtn').off('click.rsv').on('click.rsv',function(e){self.stopVideo();e.preventDefault();e.stopPropagation();return false;});content.append(self._videoFrameHolder);if(self.isIPAD){content.addClass('rsIOSVideo');}
self._toggleHiddenClass(false);setTimeout(function(){self._videoFrameHolder.addClass('rsVideoActive');},10);self.ev.trigger('rsVideoPlay');self._isVideoPlaying=true;}
return true;}
return false;},stopVideo:function(){var self=this;if(self._isVideoPlaying){if(self.isIPAD){self.slider.find('.rsCloseVideoBtn').remove();}
self._toggleHiddenClass(true);setTimeout(function(){self.ev.trigger('rsOnDestroyVideoElement',[self.videoObj]);var ifr=self._videoFrameHolder.find('iframe');if(ifr.length){try{ifr.attr('src',"");}catch(ex){}}
self._videoFrameHolder.remove();self._videoFrameHolder=null;},16);self.ev.trigger('rsVideoStop');self._isVideoPlaying=false;return true;}
return false;},_toggleHiddenClass:function(remove,prevSlide){var arr=[],self=this,vst=self.st.video;if(vst.autoHideArrows){if(self._arrowLeft){arr.push(self._arrowLeft,self._arrowRight);self._arrowsAutoHideLocked=!remove;}
if(self._fsBtn){arr.push(self._fsBtn);}}
if(vst.autoHideControlNav&&self._controlNav){arr.push(self._controlNav);}
if(vst.autoHideBlocks&&self._playingVideoSlide.animBlocks){arr.push(self._playingVideoSlide.animBlocks);}
if(vst.autoHideCaption&&self.globalCaption){arr.push(self.globalCaption);}
self.slider[remove?'removeClass':'addClass']('rsVideoPlaying');if(arr.length){for(var i=0;i<arr.length;i++){if(!remove){arr[i].addClass('rsHidden');}else{arr[i].removeClass('rsHidden');}}}}});$.rsModules.video=$.rsProto._initVideo;})(jQuery);(function($){"use strict";$.rsProto._initVisibleNearby=function(){var self=this;if(self.st.visibleNearby&&self.st.visibleNearby.enabled){self._vnDefaults={enabled:true,centerArea:0.6,center:true,breakpoint:0,breakpointCenterArea:0.8,hiddenOverflow:true,navigateByCenterClick:false};self.st.visibleNearby=$.extend({},self._vnDefaults,self.st.visibleNearby);self.ev.one('rsAfterPropsSetup',function(){self._sliderVisibleNearbyWrap=self._sliderOverflow.css('overflow','visible').wrap('<div class="rsVisibleNearbyWrap"></div>').parent();if(!self.st.visibleNearby.hiddenOverflow){self._sliderVisibleNearbyWrap.css('overflow','visible');}
self._controlsContainer=self.st.controlsInside?self._sliderVisibleNearbyWrap:self.slider;});self.ev.on('rsAfterSizePropSet',function(){var centerRatio,o=self.st.visibleNearby;if(o.breakpoint&&self.width<o.breakpoint){centerRatio=o.breakpointCenterArea;}else{centerRatio=o.centerArea;}
if(self._slidesHorizontal){self._wrapWidth=self._wrapWidth*centerRatio;self._sliderVisibleNearbyWrap.css({height:self._wrapHeight,width:self._wrapWidth/centerRatio});self._minPosOffset=self._wrapWidth*(1-centerRatio)/2/centerRatio;}else{self._wrapHeight=self._wrapHeight*centerRatio;self._sliderVisibleNearbyWrap.css({height:self._wrapHeight/centerRatio,width:self._wrapWidth});self._minPosOffset=self._wrapHeight*(1-centerRatio)/2/centerRatio;}
if(!o.navigateByCenterClick){self._nextSlidePos=self._slidesHorizontal?self._wrapWidth:self._wrapHeight;}
if(o.center){self._sliderOverflow.css('margin-'+(self._slidesHorizontal?'left':'top'),self._minPosOffset);}});}};$.rsModules.visibleNearby=$.rsProto._initVisibleNearby;})(jQuery);if(typeof Object.create!=="function"){Object.create=function(obj){function F(){};F.prototype=obj;return new F();};}
(function($,window,document,undefined){var Carousel={init:function(options,el){var base=this;base.options=$.extend({},$.fn.owlCarousel.options,options);base.userOptions=options;var elem=el;var $elem=$(el);base.$elem=$elem;base.loadContent();},loadContent:function(){var base=this;if(typeof base.options.beforeInit==="function"){base.options.beforeInit.apply(this,[base.$elem]);}
if(typeof base.options.jsonPath==="string"){var url=base.options.jsonPath;function getData(data){if(typeof base.options.jsonSuccess==="function"){base.options.jsonSuccess.apply(this,[data]);}else{var content="";for(var i in data["owl"]){content+=data["owl"][i]["item"];}
base.$elem.html(content);}
base.logIn();}
$.getJSON(url,getData);}else{base.logIn();}},logIn:function(action){var base=this;base.$elem.css({opacity:0});base.orignalItems=base.options.items;base.checkBrowser();base.wrapperWidth=0;base.checkVisible;base.setVars();},setVars:function(){var base=this;if(base.$elem.children().length===0){return false}
base.baseClass();base.eventTypes();base.$userItems=base.$elem.children();base.itemsAmount=base.$userItems.length;base.wrapItems();base.$owlItems=base.$elem.find(".owl-item");base.$owlWrapper=base.$elem.find(".owl-wrapper");base.playDirection="next";base.prevItem=0;base.currentItem=0;base.customEvents();base.onStartup();},onStartup:function(){var base=this;base.updateItems();base.calculateAll();base.buildControls();base.updateControls();base.response();base.moveEvents();base.stopOnHover();base.owlStatus();if(base.options.transitionStyle!==false){base.transitionTypes(base.options.transitionStyle);}
if(base.options.autoPlay===true){base.options.autoPlay=5000;}
base.play();base.$elem.find(".owl-wrapper").css("display","block")
if(!base.$elem.is(":visible")){base.watchVisibility();}else{base.$elem.css("opacity",1);}
base.onstartup=false;base.eachMoveUpdate();if(typeof base.options.afterInit==="function"){base.options.afterInit.apply(this,[base.$elem]);}},eachMoveUpdate:function(){var base=this;if(base.options.lazyLoad===true){base.lazyLoad();}
if(base.options.autoHeight===true){base.autoHeight();}
if(base.options.addClassActive===true){base.addClassActive();}
if(typeof base.options.afterAction==="function"){base.options.afterAction.apply(this,[base.$elem]);}},updateVars:function(){var base=this;if(typeof base.options.beforeUpdate==="function"){base.options.beforeUpdate.apply(this,[base.$elem]);}
base.watchVisibility();base.updateItems();base.calculateAll();base.updatePosition();base.updateControls();base.eachMoveUpdate();if(typeof base.options.afterUpdate==="function"){base.options.afterUpdate.apply(this,[base.$elem]);}},reload:function(elements){var base=this;setTimeout(function(){base.updateVars();},0)},watchVisibility:function(){var base=this;if(base.$elem.is(":visible")===false){base.$elem.css({opacity:0});clearInterval(base.autoPlayInterval);clearInterval(base.checkVisible);}else{return false;}
base.checkVisible=setInterval(function(){if(base.$elem.is(":visible")){base.reload();base.$elem.animate({opacity:1},200);clearInterval(base.checkVisible);}},500);},wrapItems:function(){var base=this;base.$userItems.wrapAll("<div class=\"owl-wrapper\">").wrap("<div class=\"owl-item\"></div>");base.$elem.find(".owl-wrapper").wrap("<div class=\"owl-wrapper-outer\">");base.wrapperOuter=base.$elem.find(".owl-wrapper-outer");base.$elem.css("display","block");},baseClass:function(){var base=this;var hasBaseClass=base.$elem.hasClass(base.options.baseClass);var hasThemeClass=base.$elem.hasClass(base.options.theme);base.$elem.data("owl-originalStyles",base.$elem.attr("style")).data("owl-originalClasses",base.$elem.attr("class"));if(!hasBaseClass){base.$elem.addClass(base.options.baseClass);}
if(!hasThemeClass){base.$elem.addClass(base.options.theme);}},updateItems:function(){var base=this;if(base.options.responsive===false){return false;}
if(base.options.singleItem===true){base.options.items=base.orignalItems=1;base.options.itemsDesktop=false;base.options.itemsDesktopSmall=false;base.options.itemsTablet=false;base.options.itemsTabletSmall=false;base.options.itemsMobile=false;return false;}
var width=$(base.options.responsiveBaseWidth).width();if(width>(base.options.itemsDesktop[0]||base.orignalItems)){base.options.items=base.orignalItems}
if(width<=base.options.itemsDesktop[0]&&base.options.itemsDesktop!==false){base.options.items=base.options.itemsDesktop[1];}
if(width<=base.options.itemsDesktopSmall[0]&&base.options.itemsDesktopSmall!==false){base.options.items=base.options.itemsDesktopSmall[1];}
if(width<=base.options.itemsTablet[0]&&base.options.itemsTablet!==false){base.options.items=base.options.itemsTablet[1];}
if(width<=base.options.itemsTabletSmall[0]&&base.options.itemsTabletSmall!==false){base.options.items=base.options.itemsTabletSmall[1];}
if(width<=base.options.itemsMobile[0]&&base.options.itemsMobile!==false){base.options.items=base.options.itemsMobile[1];}
if(base.options.items>base.itemsAmount){base.options.items=base.itemsAmount;}},response:function(){var base=this,smallDelay;if(base.options.responsive!==true){return false}
var lastWindowWidth=$(window).width();base.resizer=function(){if($(window).width()!==lastWindowWidth){if(base.options.autoPlay!==false){clearInterval(base.autoPlayInterval);}
clearTimeout(smallDelay);smallDelay=setTimeout(function(){lastWindowWidth=$(window).width();base.updateVars();},base.options.responsiveRefreshRate);}}
$(window).resize(base.resizer)},updatePosition:function(){var base=this;if(base.browser.support3d===true){if(base.positionsInArray[base.currentItem]>base.maximumPixels){base.transition3d(base.positionsInArray[base.currentItem]);}else{base.transition3d(0);base.currentItem=0;}}else{if(base.positionsInArray[base.currentItem]>base.maximumPixels){base.css2slide(base.positionsInArray[base.currentItem]);}else{base.css2slide(0);base.currentItem=0;}}
if(base.options.autoPlay!==false){base.checkAp();}},appendItemsSizes:function(){var base=this;var roundPages=0;var lastItem=base.itemsAmount-base.options.items;base.$owlItems.each(function(index){var $this=$(this);$this.css({"width":base.itemWidth}).data("owl-item",Number(index));if(index%base.options.items===0||index===lastItem){if(!(index>lastItem)){roundPages+=1;}}
$this.data("owl-roundPages",roundPages)});},appendWrapperSizes:function(){var base=this;var width=0;var width=base.$owlItems.length*base.itemWidth;base.$owlWrapper.css({"width":width*2,"left":0});base.appendItemsSizes();},calculateAll:function(){var base=this;base.calculateWidth();base.appendWrapperSizes();base.loops();base.max();},calculateWidth:function(){var base=this;base.itemWidth=Math.round(base.$elem.width()/base.options.items)},max:function(){var base=this;base.maximumItem=base.itemsAmount-base.options.items;var maximum=(base.itemsAmount*base.itemWidth)-base.options.items*base.itemWidth;maximum=maximum*-1
base.maximumPixels=maximum;return maximum;},min:function(){return 0;},loops:function(){var base=this;base.positionsInArray=[0];var elWidth=0;for(var i=0;i<base.itemsAmount;i++){elWidth+=base.itemWidth;base.positionsInArray.push(-elWidth)}},buildControls:function(){var base=this;if(base.options.navigation===true||base.options.pagination===true){base.owlControls=$("<div class=\"owl-controls\"/>").toggleClass("clickable",!base.browser.isTouch).appendTo(base.$elem);}
if(base.options.pagination===true){base.buildPagination();}
if(base.options.navigation===true){base.buildButtons();}},buildButtons:function(){var base=this;var buttonsWrapper=$("<div class=\"owl-buttons\"/>")
base.owlControls.append(buttonsWrapper);base.buttonPrev=$("<div/>",{"class":"owl-prev","html":base.options.navigationText[0]||""});base.buttonNext=$("<div/>",{"class":"owl-next","html":base.options.navigationText[1]||""});buttonsWrapper.append(base.buttonPrev).append(base.buttonNext);buttonsWrapper.on("touchend.owlControls mouseup.owlControls","div[class^=\"owl\"]",function(event){event.preventDefault();if($(this).hasClass("owl-next")){base.next();}else{base.prev();}})},buildPagination:function(){var base=this;base.paginationWrapper=$("<div class=\"owl-pagination\"/>");base.owlControls.append(base.paginationWrapper);base.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(event){event.preventDefault();if(Number($(this).data("owl-page"))!==base.currentItem){base.goTo(Number($(this).data("owl-page")),true);}});},updatePagination:function(){var base=this;if(base.options.pagination===false){return false;}
base.paginationWrapper.html("");var counter=0;var lastPage=base.itemsAmount-base.itemsAmount%base.options.items;for(var i=0;i<base.itemsAmount;i++){if(i%base.options.items===0){counter+=1;if(lastPage===i){var lastItem=base.itemsAmount-base.options.items;}
var paginationButton=$("<div/>",{"class":"owl-page"});var paginationButtonInner=$("<span></span>",{"text":base.options.paginationNumbers===true?counter:"","class":base.options.paginationNumbers===true?"owl-numbers":""});paginationButton.append(paginationButtonInner);paginationButton.data("owl-page",lastPage===i?lastItem:i);paginationButton.data("owl-roundPages",counter);base.paginationWrapper.append(paginationButton);}}
base.checkPagination();},checkPagination:function(){var base=this;if(base.options.pagination===false){return false;}
base.paginationWrapper.find(".owl-page").each(function(i,v){if($(this).data("owl-roundPages")===$(base.$owlItems[base.currentItem]).data("owl-roundPages")){base.paginationWrapper.find(".owl-page").removeClass("active");$(this).addClass("active");}});},checkNavigation:function(){var base=this;if(base.options.navigation===false){return false;}
if(base.options.rewindNav===false){if(base.currentItem===0&&base.maximumItem===0){base.buttonPrev.addClass("disabled");base.buttonNext.addClass("disabled");}else if(base.currentItem===0&&base.maximumItem!==0){base.buttonPrev.addClass("disabled");base.buttonNext.removeClass("disabled");}else if(base.currentItem===base.maximumItem){base.buttonPrev.removeClass("disabled");base.buttonNext.addClass("disabled");}else if(base.currentItem!==0&&base.currentItem!==base.maximumItem){base.buttonPrev.removeClass("disabled");base.buttonNext.removeClass("disabled");}}},updateControls:function(){var base=this;base.updatePagination();base.checkNavigation();if(base.owlControls){if(base.options.items===base.itemsAmount){base.owlControls.hide();}else{base.owlControls.show();}}},destroyControls:function(){var base=this;if(base.owlControls){base.owlControls.remove();}},next:function(speed){var base=this;if(base.isTransition){return false;}
base.storePrevItem=base.currentItem;base.currentItem+=base.options.scrollPerPage===true?base.options.items:1;if(base.currentItem>base.maximumItem+(base.options.scrollPerPage==true?(base.options.items-1):0)){if(base.options.rewindNav===true){base.currentItem=0;speed="rewind";}else{base.currentItem=base.maximumItem;return false;}}
base.goTo(base.currentItem,speed);},prev:function(speed){var base=this;if(base.isTransition){return false;}
base.storePrevItem=base.currentItem;if(base.options.scrollPerPage===true&&base.currentItem>0&&base.currentItem<base.options.items){base.currentItem=0}else{base.currentItem-=base.options.scrollPerPage===true?base.options.items:1;}
if(base.currentItem<0){if(base.options.rewindNav===true){base.currentItem=base.maximumItem;speed="rewind"}else{base.currentItem=0;return false;}}
base.goTo(base.currentItem,speed);},goTo:function(position,speed,drag){var base=this;if(base.isTransition){return false;}
base.getPrevItem();if(typeof base.options.beforeMove==="function"){base.options.beforeMove.apply(this,[base.$elem]);}
if(position>=base.maximumItem){position=base.maximumItem;}
else if(position<=0){position=0;}
base.currentItem=base.owl.currentItem=position;if(base.options.transitionStyle!==false&&drag!=="drag"&&base.options.items===1&&base.browser.support3d===true){base.swapSpeed(0)
if(base.browser.support3d===true){base.transition3d(base.positionsInArray[position]);}else{base.css2slide(base.positionsInArray[position],1);}
base.singleItemTransition();base.afterGo();return false;}
var goToPixel=base.positionsInArray[position];if(base.browser.support3d===true){base.isCss3Finish=false;if(speed===true){base.swapSpeed("paginationSpeed");setTimeout(function(){base.isCss3Finish=true;},base.options.paginationSpeed);}else if(speed==="rewind"){base.swapSpeed(base.options.rewindSpeed);setTimeout(function(){base.isCss3Finish=true;},base.options.rewindSpeed);}else{base.swapSpeed("slideSpeed");setTimeout(function(){base.isCss3Finish=true;},base.options.slideSpeed);}
base.transition3d(goToPixel);}else{if(speed===true){base.css2slide(goToPixel,base.options.paginationSpeed);}else if(speed==="rewind"){base.css2slide(goToPixel,base.options.rewindSpeed);}else{base.css2slide(goToPixel,base.options.slideSpeed);}}
base.afterGo();},getPrevItem:function(){var base=this;base.prevItem=base.owl.prevItem=base.storePrevItem===undefined?base.currentItem:base.storePrevItem;base.storePrevItem=undefined;},jumpTo:function(position){var base=this;base.getPrevItem();if(typeof base.options.beforeMove==="function"){base.options.beforeMove.apply(this,[base.$elem]);}
if(position>=base.maximumItem||position===-1){position=base.maximumItem;}
else if(position<=0){position=0;}
base.swapSpeed(0)
if(base.browser.support3d===true){base.transition3d(base.positionsInArray[position]);}else{base.css2slide(base.positionsInArray[position],1);}
base.currentItem=base.owl.currentItem=position;base.afterGo();},afterGo:function(){var base=this;base.checkPagination();base.checkNavigation();base.eachMoveUpdate();if(typeof base.options.afterMove==="function"){base.options.afterMove.apply(this,[base.$elem]);}
if(base.options.autoPlay!==false){base.checkAp();}},stop:function(){var base=this;base.apStatus="stop";clearInterval(base.autoPlayInterval);},checkAp:function(){var base=this;if(base.apStatus!=="stop"){base.play();}},play:function(){var base=this;base.apStatus="play";if(base.options.autoPlay===false){return false;}
clearInterval(base.autoPlayInterval);base.autoPlayInterval=setInterval(function(){base.next(true);},base.options.autoPlay);},swapSpeed:function(action){var base=this;if(action==="slideSpeed"){base.$owlWrapper.css(base.addCssSpeed(base.options.slideSpeed));}else if(action==="paginationSpeed"){base.$owlWrapper.css(base.addCssSpeed(base.options.paginationSpeed));}else if(typeof action!=="string"){base.$owlWrapper.css(base.addCssSpeed(action));}},addCssSpeed:function(speed){var base=this;return{"-webkit-transition":"all "+speed+"ms ease","-moz-transition":"all "+speed+"ms ease","-o-transition":"all "+speed+"ms ease","transition":"all "+speed+"ms ease"};},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"","transition":""};},doTranslate:function(pixels){return{"-webkit-transform":"translate3d("+pixels+"px, 0px, 0px)","-moz-transform":"translate3d("+pixels+"px, 0px, 0px)","-o-transform":"translate3d("+pixels+"px, 0px, 0px)","-ms-transform":"translate3d("+pixels+"px, 0px, 0px)","transform":"translate3d("+pixels+"px, 0px,0px)"};},transition3d:function(value){var base=this;base.$owlWrapper.css(base.doTranslate(value));},css2move:function(value){var base=this;base.$owlWrapper.css({"left":value})},css2slide:function(value,speed){var base=this;base.isCssFinish=false;base.$owlWrapper.stop(true,true).animate({"left":value},{duration:speed||base.options.slideSpeed,complete:function(){base.isCssFinish=true;}});},checkBrowser:function(){var base=this;var translate3D="translate3d(0px, 0px, 0px)",tempElem=document.createElement("div");tempElem.style.cssText="  -moz-transform:"+translate3D+"; -ms-transform:"+translate3D+"; -o-transform:"+translate3D+"; -webkit-transform:"+translate3D+"; transform:"+translate3D;var regex=/translate3d\(0px, 0px, 0px\)/g,asSupport=tempElem.style.cssText.match(regex),support3d=(asSupport!==null&&asSupport.length===1);var isTouch="ontouchstart"in window||navigator.msMaxTouchPoints;base.browser={"support3d":support3d,"isTouch":isTouch}},moveEvents:function(){var base=this;if(base.options.mouseDrag!==false||base.options.touchDrag!==false){base.gestures();base.disabledEvents();}},eventTypes:function(){var base=this;var types=["s","e","x"];base.ev_types={};if(base.options.mouseDrag===true&&base.options.touchDrag===true){types=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"];}else if(base.options.mouseDrag===false&&base.options.touchDrag===true){types=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"];}else if(base.options.mouseDrag===true&&base.options.touchDrag===false){types=["mousedown.owl","mousemove.owl","mouseup.owl"];}
base.ev_types["start"]=types[0];base.ev_types["move"]=types[1];base.ev_types["end"]=types[2];},disabledEvents:function(){var base=this;base.$elem.on("dragstart.owl",function(event){event.preventDefault();});base.$elem.on("mousedown.disableTextSelect",function(e){return $(e.target).is('input, textarea, select, option');});},gestures:function(){var base=this;var locals={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null}
base.isCssFinish=true;function getTouches(event){if(event.touches){return{x:event.touches[0].pageX,y:event.touches[0].pageY}}else{if(event.pageX!==undefined){return{x:event.pageX,y:event.pageY}}else{return{x:event.clientX,y:event.clientY}}}}
function swapEvents(type){if(type==="on"){$(document).on(base.ev_types["move"],dragMove);$(document).on(base.ev_types["end"],dragEnd);}else if(type==="off"){$(document).off(base.ev_types["move"]);$(document).off(base.ev_types["end"]);}}
function dragStart(event){var event=event.originalEvent||event||window.event;if(base.isCssFinish===false&&!base.options.dragBeforeAnimFinish){return false;}
if(base.isCss3Finish===false&&!base.options.dragBeforeAnimFinish){return false;}
if(base.options.autoPlay!==false){clearInterval(base.autoPlayInterval);}
if(base.browser.isTouch!==true&&!base.$owlWrapper.hasClass("grabbing")){base.$owlWrapper.addClass("grabbing")}
base.newPosX=0;base.newRelativeX=0;$(this).css(base.removeTransition());var position=$(this).position();locals.relativePos=position.left;locals.offsetX=getTouches(event).x-position.left;locals.offsetY=getTouches(event).y-position.top;swapEvents("on");locals.sliding=false;locals.targetElement=event.target||event.srcElement;}
function dragMove(event){var event=event.originalEvent||event||window.event;base.newPosX=getTouches(event).x-locals.offsetX;base.newPosY=getTouches(event).y-locals.offsetY;base.newRelativeX=base.newPosX-locals.relativePos;if(typeof base.options.startDragging==="function"&&locals.dragging!==true&&base.newRelativeX!==0){locals.dragging=true;base.options.startDragging.apply(this);}
if(base.newRelativeX>8||base.newRelativeX<-8&&base.browser.isTouch===true){event.preventDefault?event.preventDefault():event.returnValue=false;locals.sliding=true;}
if((base.newPosY>10||base.newPosY<-10)&&locals.sliding===false){$(document).off("touchmove.owl");}
var minSwipe=function(){return base.newRelativeX/5;}
var maxSwipe=function(){return base.maximumPixels+base.newRelativeX/5;}
base.newPosX=Math.max(Math.min(base.newPosX,minSwipe()),maxSwipe());if(base.browser.support3d===true){base.transition3d(base.newPosX);}else{base.css2move(base.newPosX);}}
function dragEnd(event){var event=event.originalEvent||event||window.event;event.target=event.target||event.srcElement;locals.dragging=false;if(base.browser.isTouch!==true){base.$owlWrapper.removeClass("grabbing");}
if(base.newRelativeX!==0){var newPosition=base.getNewPosition();base.goTo(newPosition,false,"drag");if(locals.targetElement===event.target&&base.browser.isTouch!==true){$(event.target).on("click.disable",function(ev){ev.stopImmediatePropagation();ev.stopPropagation();ev.preventDefault();$(event.target).off("click.disable");});var handlers=$._data(event.target,"events")["click"];var owlStopEvent=handlers.pop();handlers.splice(0,0,owlStopEvent);}}
swapEvents("off");}
base.$elem.on(base.ev_types["start"],".owl-wrapper",dragStart);},getNewPosition:function(){var base=this,newPosition;var newPosition=base.improveClosest();if(newPosition>base.maximumItem){base.currentItem=base.maximumItem;newPosition=base.maximumItem;}else if(base.newPosX>=0){newPosition=0;base.currentItem=0;}
return newPosition;},improveClosest:function(){var base=this;var array=base.positionsInArray;var goal=base.newPosX;var closest=null;$.each(array,function(i,v){if(goal-(base.itemWidth/20)>array[i+1]&&goal-(base.itemWidth/20)<v&&base.moveDirection()==="left"){closest=v;base.currentItem=i;}
else if(goal+(base.itemWidth/20)<v&&goal+(base.itemWidth/20)>array[i+1]&&base.moveDirection()==="right"){closest=array[i+1];base.currentItem=i+1;}});return base.currentItem;},moveDirection:function(){var base=this,direction;if(base.newRelativeX<0){direction="right"
base.playDirection="next"}else{direction="left"
base.playDirection="prev"}
return direction},customEvents:function(){var base=this;base.$elem.on("owl.next",function(){base.next();});base.$elem.on("owl.prev",function(){base.prev();});base.$elem.on("owl.play",function(event,speed){base.options.autoPlay=speed;base.play();base.hoverStatus="play";});base.$elem.on("owl.stop",function(){base.stop();base.hoverStatus="stop";});base.$elem.on("owl.goTo",function(event,item){base.goTo(item)});base.$elem.on("owl.jumpTo",function(event,item){base.jumpTo(item)});},stopOnHover:function(){var base=this;if(base.options.stopOnHover===true&&base.browser.isTouch!==true&&base.options.autoPlay!==false){base.$elem.on("mouseover",function(){base.stop();});base.$elem.on("mouseout",function(){if(base.hoverStatus!=="stop"){base.play();}});}},lazyLoad:function(){var base=this;if(base.options.lazyLoad===false){return false;}
for(var i=0;i<base.itemsAmount;i++){var $item=$(base.$owlItems[i]);if($item.data("owl-loaded")==="loaded"){continue;}
var itemNumber=$item.data("owl-item"),$lazyImg=$item.find(".lazyOwl"),follow;if(typeof $lazyImg.data("src")!=="string"){$item.data("owl-loaded","loaded");continue;}
if($item.data("owl-loaded")===undefined){$lazyImg.hide();$item.addClass("loading").data("owl-loaded","checked");}
if(base.options.lazyFollow===true){follow=itemNumber>=base.currentItem;}else{follow=true;}
if(follow&&itemNumber<base.currentItem+base.options.items&&$lazyImg.length){base.lazyPreload($item,$lazyImg);}}},lazyPreload:function($item,$lazyImg){var base=this,iterations=0;$lazyImg[0].src=$lazyImg.data("src");checkLazyImage();function checkLazyImage(){iterations+=1;if(base.completeImg($lazyImg.get(0))){showImage();}else if(iterations<=100){setTimeout(checkLazyImage,100);}else{showImage();}}
function showImage(){$item.data("owl-loaded","loaded").removeClass("loading");$lazyImg.removeAttr("data-src");base.options.lazyEffect==="fade"?$lazyImg.fadeIn(400):$lazyImg.show();}},autoHeight:function(){var base=this;var $currentimg=$(base.$owlItems[base.currentItem]).find("img");if($currentimg.get(0)!==undefined){var iterations=0;checkImage();}else{addHeight();}
function checkImage(){iterations+=1;if(base.completeImg($currentimg.get(0))){addHeight();}else if(iterations<=100){setTimeout(checkImage,100);}else{base.wrapperOuter.css("height","");}}
function addHeight(){var $currentItem=$(base.$owlItems[base.currentItem]).height();base.wrapperOuter.css("height",$currentItem+"px");if(!base.wrapperOuter.hasClass("autoHeight")){setTimeout(function(){base.wrapperOuter.addClass("autoHeight");},0);}}},completeImg:function(img){if(!img.complete){return false;}
if(typeof img.naturalWidth!=="undefined"&&img.naturalWidth==0){return false;}
return true;},addClassActive:function(){var base=this;base.$owlItems.removeClass("active");for(var i=base.currentItem;i<base.currentItem+base.options.items;i++){$(base.$owlItems[i]).addClass("active");}},transitionTypes:function(className){var base=this;base.outClass="owl-"+className+"-out";base.inClass="owl-"+className+"-in";},singleItemTransition:function(){var base=this;base.isTransition=true;var outClass=base.outClass,inClass=base.inClass,$currentItem=base.$owlItems.eq(base.currentItem),$prevItem=base.$owlItems.eq(base.prevItem),prevPos=Math.abs(base.positionsInArray[base.currentItem])+base.positionsInArray[base.prevItem],origin=Math.abs(base.positionsInArray[base.currentItem])+base.itemWidth/2;base.$owlWrapper.addClass('owl-origin').css({"-webkit-transform-origin":origin+"px","-moz-perspective-origin":origin+"px","perspective-origin":origin+"px"});function transStyles(prevPos,zindex){return{"position":"relative","left":prevPos+"px"};}
var animEnd='webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend';$prevItem.css(transStyles(prevPos,10)).addClass(outClass).on(animEnd,function(){base.endPrev=true;$prevItem.off(animEnd);base.clearTransStyle($prevItem,outClass);});$currentItem.addClass(inClass).on(animEnd,function(){base.endCurrent=true;$currentItem.off(animEnd);base.clearTransStyle($currentItem,inClass);});},clearTransStyle:function(item,classToRemove){var base=this;item.css({"position":"","left":""}).removeClass(classToRemove);if(base.endPrev&&base.endCurrent){base.$owlWrapper.removeClass('owl-origin');base.endPrev=false;base.endCurrent=false;base.isTransition=false;}},owlStatus:function(){var base=this;base.owl={"userOptions":base.userOptions,"baseElement":base.$elem,"userItems":base.$userItems,"owlItems":base.$owlItems,"currentItem":base.currentItem,"prevItem":base.prevItem,"isTouch":base.browser.isTouch,"browser":base.browser}},clearEvents:function(){var base=this;base.$elem.off(".owl owl mousedown.disableTextSelect");$(document).off(".owl owl");$(window).off("resize",base.resizer);},unWrap:function(){var base=this;if(base.$elem.children().length!==0){base.$owlWrapper.unwrap();base.$userItems.unwrap().unwrap();if(base.owlControls){base.owlControls.remove();}}
base.clearEvents();base.$elem.attr("style",base.$elem.data("owl-originalStyles")||"").attr("class",base.$elem.data("owl-originalClasses"));},destroy:function(){var base=this;base.unWrap();base.$elem.removeData();},reinit:function(newOptions){var base=this;var options=$.extend({},base.userOptions,newOptions);base.unWrap();base.init(options,base.$elem);},addItem:function(htmlString,targetPosition){var base=this,position;if(!htmlString){return false}
if(base.$elem.children().length===0){base.$elem.append(htmlString);base.setVars();return false;}
base.unWrap();if(targetPosition===undefined||targetPosition===-1){position=-1;}else{position=targetPosition;}
if(position>=base.$userItems.length||position===-1){base.$userItems.eq(-1).after(htmlString)}else{base.$userItems.eq(position).before(htmlString)}
base.setVars();},removeItem:function(targetPosition){var base=this,position;if(base.$elem.children().length===0){return false}
if(targetPosition===undefined||targetPosition===-1){position=-1;}else{position=targetPosition;}
base.unWrap();base.$userItems.eq(position).remove();base.setVars();}};$.fn.owlCarousel=function(options){return this.each(function(){if($(this).data("owl-init")===true){return false;}
$(this).data("owl-init",true);var carousel=Object.create(Carousel);carousel.init(options,this);$.data(this,"owlCarousel",carousel);});};$.fn.owlCarousel.options={items:5,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:false,itemsMobile:[479,1],singleItem:false,slideSpeed:200,paginationSpeed:800,rewindSpeed:1000,autoPlay:false,stopOnHover:false,navigation:false,navigationText:["prev","next"],rewindNav:true,scrollPerPage:false,pagination:true,paginationNumbers:false,responsive:true,responsiveRefreshRate:200,responsiveBaseWidth:window,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:false,lazyFollow:true,lazyEffect:"fade",autoHeight:false,jsonPath:false,jsonSuccess:false,dragBeforeAnimFinish:true,mouseDrag:true,touchDrag:true,addClassActive:false,transitionStyle:false,beforeUpdate:false,afterUpdate:false,beforeInit:false,afterInit:false,beforeMove:false,afterMove:false,afterAction:false,startDragging:false};})(jQuery,window,document);/*!
 * jQuery Smart Banner
 * Copyright (c) 2012 Arnold Daniels <arnold@jasny.net>
 * Based on 'jQuery Smart Web App Banner' by Kurt Zenisek @ kzeni.com
 */!function($){var SmartBanner=function(options){this.options=$.extend({},$.smartbanner.defaults,options)
var standalone=navigator.standalone,UA=navigator.userAgent
if(this.options.force){this.type=this.options.force}else if(UA.match(/iPhone|iPod/i)!=null||(UA.match(/iPad/)&&this.options.iOSUniversalApp)){if(UA.match(/Safari/i)!=null&&(UA.match(/CriOS/i)!=null||window.Number(UA.substr(UA.indexOf('OS ')+3,3).replace('_','.'))<6))this.type='ios'}else if(UA.match(/\bSilk\/(.*\bMobile Safari\b)?/)||UA.match(/\bKF\w/)||UA.match('Kindle Fire')){this.type='kindle'}else if(UA.match(/Android/i)!=null){this.type='android'}else if(UA.match(/Windows NT 6.2/i)!=null&&UA.match(/Touch/i)!==null){this.type='windows'}
if(!this.type||standalone||this.getCookie('sb-closed')||this.getCookie('sb-installed')){return}
this.scale=this.options.scale=='auto'?$(window).width()/window.screen.width:this.options.scale
if(this.scale<1)this.scale=1
var meta=$(this.type=='android'?'meta[name="google-play-app"]':this.type=='ios'?'meta[name="apple-itunes-app"]':this.type=='kindle'?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');if(meta.length==0)return
if(this.type=='windows'){this.pfn=$('meta[name="msApplication-PackageFamilyName"]').attr('content');this.appId=meta.attr('content')[1]}else{this.appId=/app-id=([^\s,]+)/.exec(meta.attr('content'))[1]}
this.title=this.options.title?this.options.title:meta.data('title')||$('title').text().replace(/\s*[|\-·].*$/,'')
this.author=this.options.author?this.options.author:meta.data('author')||($('meta[name="author"]').length?$('meta[name="author"]').attr('content'):window.location.hostname)
this.iconUrl=meta.data('icon-url');this.price=meta.data('price');this.create()
this.show()
this.listen()}
SmartBanner.prototype={constructor:SmartBanner,create:function(){var iconURL,link=(this.options.url?this.options.url:(this.type=='windows'?'ms-windows-store:PDP?PFN='+this.pfn:(this.type=='android'?'market://details?id=':(this.type=='kindle'?'amzn://apps/android?asin=':'https://itunes.apple.com/'+this.options.appStoreLanguage+'/app/id')))+this.appId),price=this.price||this.options.price,inStore=price?price+' - '+(this.type=='android'?this.options.inGooglePlay:this.type=='kindle'?this.options.inAmazonAppStore:this.type=='ios'?this.options.inAppStore:this.options.inWindowsStore):'',gloss=this.options.iconGloss===null?(this.type=='ios'):this.options.iconGloss
if(this.options.url)
link=this.options.url
else{if(this.type=='android'){link='market://details?id='+this.appId
if(this.options.GooglePlayParams)
link=link+'&referrer='+this.options.GooglePlayParams}
else
link='https://itunes.apple.com/'+this.options.appStoreLanguage+'/app/id'+this.appId}
var banner='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+'</strong><span>'+this.author+'</span><span>'+inStore+'</span></div><a href="'+link+'" class="sb-button"><span>'+this.options.button+'</span></a><a href="#" class="sb-close"><span>&times;</span></a></div></div>';(this.options.layer)?$(this.options.appendToSelector).append(banner):$(this.options.appendToSelector).prepend(banner);if(this.options.icon){iconURL=this.options.icon}else if(this.iconUrl){iconURL=this.iconUrl;}else if($('link[rel="apple-touch-icon-precomposed"]').length>0){iconURL=$('link[rel="apple-touch-icon-precomposed"]').attr('href')
if(this.options.iconGloss===null)gloss=false}else if($('link[rel="apple-touch-icon"]').length>0){iconURL=$('link[rel="apple-touch-icon"]').attr('href')}else if($('meta[name="msApplication-TileImage"]').length>0){iconURL=$('meta[name="msApplication-TileImage"]').attr('content')}else if($('meta[name="msapplication-TileImage"]').length>0){iconURL=$('meta[name="msapplication-TileImage"]').attr('content')}
if(iconURL){$('#smartbanner .sb-icon').css('background-image','url('+iconURL+')')
if(gloss)$('#smartbanner .sb-icon').addClass('gloss')}else{$('#smartbanner').addClass('no-icon')}
this.bannerHeight=$('#smartbanner').outerHeight()+2
if(this.scale>1){$('#smartbanner').css('margin-top',parseFloat($('#smartbanner').css('margin-top'))*this.scale).css('height',parseFloat($('#smartbanner').css('height'))*this.scale).hide()
$('#smartbanner .sb-container').css('-webkit-transform','scale('+this.scale+')').css('-msie-transform','scale('+this.scale+')').css('-moz-transform','scale('+this.scale+')').css('width',$(window).width()/this.scale)}},listen:function(){$('#smartbanner .sb-close').on('click',$.proxy(this.close,this))
$('#smartbanner .sb-button').on('click',$.proxy(this.install,this))},show:function(){var banner=$('#smartbanner');banner.stop();if(this.options.layer){banner.animate({marginTop:0,display:'block'},this.options.speedIn).addClass('shown').show();}else{if($.support.transition){banner.animate({marginTop:0},this.options.speedIn).addClass('shown');}else{banner.slideDown(this.options.speedIn).addClass('shown');}}},hide:function(){var banner=$('#smartbanner');banner.stop();if($.support.transition){banner.css('margin-top',-1*this.bannerHeight*this.scale).removeClass('shown');}
else{banner.slideUp(this.options.speedOut).removeClass('shown');}},close:function(e){e.preventDefault()
this.hide()
this.setCookie('sb-closed','true',this.options.daysHidden);},install:function(e){if(this.options.hideOnInstall){this.hide()}
this.setCookie('sb-installed','true',this.options.daysReminder)},setCookie:function(name,value,exdays){var exdate=new Date()
exdate.setDate(exdate.getDate()+exdays)
value=encodeURI(value)+((exdays==null)?'':'; expires='+exdate.toUTCString())
document.cookie=name+'='+value+'; path=/;'},getCookie:function(name){var i,x,y,ARRcookies=document.cookie.split(";")
for(i=0;i<ARRcookies.length;i++){x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="))
y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1)
x=x.replace(/^\s+|\s+$/g,"")
if(x==name){return decodeURI(y)}}
return null}}
$.smartbanner=function(option){var $window=$(window),data=$window.data('smartbanner'),options=typeof option=='object'&&option
if(!data)$window.data('smartbanner',(data=new SmartBanner(options)))
if(typeof option=='string')data[option]()}
$.smartbanner.defaults={title:null,author:null,price:'FREE',appStoreLanguage:'us',inAppStore:'On the App Store',inGooglePlay:'In Google Play',inAmazonAppStore:'In the Amazon Appstore',inWindowsStore:'In the Windows Store',GooglePlayParams:null,icon:null,iconGloss:null,button:'VIEW',url:null,scale:'auto',speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:true,layer:false,iOSUniversalApp:true,appendToSelector:'body'}
$.smartbanner.Constructor=SmartBanner;function transitionEnd(){var el=document.createElement('smartbanner')
var transEndEventNames={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd otransitionend',transition:'transitionend'}
for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]}}}
return false}
if($.support.transition!==undefined)
return
$.fn.emulateTransitionEnd=function(duration){var called=false,$el=this
$(this).one($.support.transition.end,function(){called=true})
var callback=function(){if(!called)$($el).trigger($.support.transition.end)}
setTimeout(callback,duration)
return this}
$(function(){$.support.transition=transitionEnd()})}(window.jQuery);(function(){var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){prototype[name]=typeof prop[name]=="function"&&typeof _super[name]=="function"&&fnTest.test(prop[name])?(function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret;};})(name,prop[name]):prop[name];}
function Class(){if(!initializing&&this.init)
this.init.apply(this,arguments);}
Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=arguments.callee;return Class;};})();/*! Swig https://paularmstrong.github.com/swig | https://github.com/paularmstrong/swig/blob/master/LICENSE *//*! Cross-Browser Split 1.0.1 (c) Steven Levithan <stevenlevithan.com>; MIT License An ECMA-compliant, uniform cross-browser split method *//*! Underscore.js (c) 2011 Jeremy Ashkenas | https://github.com/documentcloud/underscore/blob/master/LICENSE *//*! DateZ (c) 2011 Tomo Universalis | https://github.com/TomoUniversalis/DateZ/blob/master/LISENCE */(function(){var str='{{ a }}',splitter;if(str.split(/(\{\{.*?\}\})/).length===0){splitter=function(str,separator,limit){if(Object.prototype.toString.call(separator)!=='[object RegExp]'){return splitter._nativeSplit.call(str,separator,limit);}
var output=[],lastLastIndex=0,flags=(separator.ignoreCase?'i':'')+(separator.multiline?'m':'')+(separator.sticky?'y':''),separator2,match,lastIndex,lastLength;separator=RegExp(separator.source,flags+'g');str=str.toString();if(!splitter._compliantExecNpcg){separator2=RegExp('^'+separator.source+'$(?!\\s)',flags);}
if(limit===undefined||limit<0){limit=Infinity;}else{limit=Math.floor(+limit);if(!limit){return[];}}
function fixExec(){var i=1;for(i;i<arguments.length-2;i+=1){if(arguments[i]===undefined){match[i]=undefined;}}}
match=separator.exec(str);while(match){lastIndex=match.index+match[0].length;if(lastIndex>lastLastIndex){output.push(str.slice(lastLastIndex,match.index));if(!splitter._compliantExecNpcg&&match.length>1){match[0].replace(separator2,fixExec);}
if(match.length>1&&match.index<str.length){Array.prototype.push.apply(output,match.slice(1));}
lastLength=match[0].length;lastLastIndex=lastIndex;if(output.length>=limit){break;}}
if(separator.lastIndex===match.index){separator.lastIndex+=1;}
match=separator.exec(str);}
if(lastLastIndex===str.length){if(lastLength||!separator.test('')){output.push('');}}else{output.push(str.slice(lastLastIndex));}
return output.length>limit?output.slice(0,limit):output;};splitter._compliantExecNpcg=/()??/.exec('')[1]===undefined;splitter._nativeSplit=String.prototype.split;String.prototype.split=function(separator,limit){return splitter(this,separator,limit);};}}());swig=(function(){var swig={},dateformat={},filters={},helpers={},parser={},tags={};(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var
push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var
nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj;};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports){exports=module.exports=_;}
exports._=_;}else{root._=_;}
_.VERSION='1.5.1';var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context);}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return;}}else{for(var key in obj){if(_.has(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return;}}}};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list));});return results;};var reduceError='Reduce of empty array with no initial value';_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator);}
each(obj,function(value,index,list){if(!initial){memo=value;initial=true;}else{memo=iterator.call(context,memo,value,index,list);}});if(!initial)throw new TypeError(reduceError);return memo;};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);}
var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length;}
each(obj,function(value,index,list){index=keys?keys[--length]:--length;if(!initial){memo=obj[index];initial=true;}else{memo=iterator.call(context,memo,obj[index],index,list);}});if(!initial)throw new TypeError(reduceError);return memo;};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true;}});return result;};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results.push(value);});return results;};_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list);},context);};_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker;});return!!result;};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker;});return!!result;};_.contains=_.include=function(obj,target){if(obj==null)return false;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;return any(obj,function(value){return value===target;});};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args);});};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key];});};_.where=function(obj,attrs,first){if(_.isEmpty(attrs))return first?void 0:[];return _[first?'find':'filter'](obj,function(value){for(var key in attrs){if(attrs[key]!==value[key])return false;}
return true;});};_.findWhere=function(obj,attrs){return _.where(obj,attrs,true);};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.max.apply(Math,obj);}
if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity,value:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>result.computed&&(result={value:value,computed:computed});});return result.value;};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.min.apply(Math,obj);}
if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity,value:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed});});return result.value;};_.shuffle=function(obj){var rand;var index=0;var shuffled=[];each(obj,function(value){rand=_.random(index++);shuffled[index-1]=shuffled[rand];shuffled[rand]=value;});return shuffled;};var lookupIterator=function(value){return _.isFunction(value)?value:function(obj){return obj[value];};};_.sortBy=function(obj,value,context){var iterator=lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)};}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1;}
return left.index<right.index?-1:1;}),'value');};var group=function(obj,value,context,behavior){var result={};var iterator=lookupIterator(value==null?_.identity:value);each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value);});return result;};_.groupBy=function(obj,value,context){return group(obj,value,context,function(result,key,value){(_.has(result,key)?result[key]:(result[key]=[])).push(value);});};_.countBy=function(obj,value,context){return group(obj,value,context,function(result,key){if(!_.has(result,key))result[key]=0;result[key]++;});};_.sortedIndex=function(array,obj,iterator,context){iterator=iterator==null?_.identity:lookupIterator(iterator);var value=iterator.call(context,obj);var low=0,high=array.length;while(low<high){var mid=(low+high)>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid;}
return low;};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj);};_.size=function(obj){if(obj==null)return 0;return(obj.length===+obj.length)?obj.length:_.keys(obj).length;};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;return(n!=null)&&!guard?slice.call(array,0,n):array[0];};_.initial=function(array,n,guard){return slice.call(array,0,array.length-((n==null)||guard?1:n));};_.last=function(array,n,guard){if(array==null)return void 0;if((n!=null)&&!guard){return slice.call(array,Math.max(array.length-n,0));}else{return array[array.length-1];}};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,(n==null)||guard?1:n);};_.compact=function(array){return _.filter(array,_.identity);};var flatten=function(input,shallow,output){if(shallow&&_.every(input,_.isArray)){return concat.apply(output,input);}
each(input,function(value){if(_.isArray(value)||_.isArguments(value)){shallow?push.apply(output,value):flatten(value,shallow,output);}else{output.push(value);}});return output;};_.flatten=function(array,shallow){return flatten(array,shallow,[]);};_.without=function(array){return _.difference(array,slice.call(arguments,1));};_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted)){context=iterator;iterator=isSorted;isSorted=false;}
var initial=iterator?_.map(array,iterator,context):array;var results=[];var seen=[];each(initial,function(value,index){if(isSorted?(!index||seen[seen.length-1]!==value):!_.contains(seen,value)){seen.push(value);results.push(array[index]);}});return results;};_.union=function(){return _.uniq(_.flatten(arguments,true));};_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0;});});};_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value);});};_.zip=function(){var length=_.max(_.pluck(arguments,"length").concat(0));var results=new Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(arguments,''+i);}
return results;};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,l=list.length;i<l;i++){if(values){result[list[i]]=values[i];}else{result[list[i][0]]=list[i][1];}}
return result;};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,l=array.length;if(isSorted){if(typeof isSorted=='number'){i=(isSorted<0?Math.max(0,l+isSorted):isSorted);}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1;}}
if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;i<l;i++)if(array[i]===item)return i;return-1;};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var hasIndex=from!=null;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf){return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item);}
var i=(hasIndex?from:array.length);while(i--)if(array[i]===item)return i;return-1;};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0;}
step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step;}
return range;};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;args=slice.call(arguments,2);return bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self;};};_.partial=function(func){var args=slice.call(arguments,1);return function(){return func.apply(this,args.concat(slice.call(arguments)));};};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length===0)throw new Error("bindAll must be passed function names");each(funcs,function(f){obj[f]=_.bind(obj[f],obj);});return obj;};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:(memo[key]=func.apply(this,arguments));};};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args);},wait);};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)));};_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;options||(options={});var later=function(){previous=options.leading===false?0:new Date;timeout=null;result=func.apply(context,args);};return function(){var now=new Date;if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining);}
return result;};};_.debounce=function(func,wait,immediate){var result;var timeout=null;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)result=func.apply(context,args);};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args);return result;};};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;memo=func.apply(this,arguments);func=null;return memo;};};_.wrap=function(func,wrapper){return function(){var args=[func];push.apply(args,arguments);return wrapper.apply(this,args);};};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)];}
return args[0];};};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments);}};};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError('Invalid object');var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);return keys;};_.values=function(obj){var values=[];for(var key in obj)if(_.has(obj,key))values.push(obj[key]);return values;};_.pairs=function(obj){var pairs=[];for(var key in obj)if(_.has(obj,key))pairs.push([key,obj[key]]);return pairs;};_.invert=function(obj){var result={};for(var key in obj)if(_.has(obj,key))result[obj[key]]=key;return result;};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key);}
return names.sort();};_.extend=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){obj[prop]=source[prop];}}});return obj;};_.pick=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));each(keys,function(key){if(key in obj)copy[key]=obj[key];});return copy;};_.omit=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj){if(!_.contains(keys,key))copy[key]=obj[key];}
return copy;};_.defaults=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){if(obj[prop]===void 0)obj[prop]=source[prop];}}});return obj;};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj);};_.tap=function(obj,interceptor){interceptor(obj);return obj;};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case'[object String]':return a==String(b);case'[object Number]':return a!=+a?b!=+b:(a==0?1/a==1/b:a==+b);case'[object Date]':case'[object Boolean]':return+a==+b;case'[object RegExp]':return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase;}
if(typeof a!='object'||typeof b!='object')return false;var length=aStack.length;while(length--){if(aStack[length]==a)return bStack[length]==b;}
var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&(aCtor instanceof aCtor)&&_.isFunction(bCtor)&&(bCtor instanceof bCtor))){return false;}
aStack.push(a);bStack.push(b);var size=0,result=true;if(className=='[object Array]'){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break;}}}else{for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break;}}
if(result){for(key in b){if(_.has(b,key)&&!(size--))break;}
result=!size;}}
aStack.pop();bStack.pop();return result;};_.isEqual=function(a,b){return eq(a,b,[],[]);};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true;};_.isElement=function(obj){return!!(obj&&obj.nodeType===1);};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=='[object Array]';};_.isObject=function(obj){return obj===Object(obj);};each(['Arguments','Function','String','Number','Date','RegExp'],function(name){_['is'+name]=function(obj){return toString.call(obj)=='[object '+name+']';};});if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,'callee'));};}
if(typeof(/./)!=='function'){_.isFunction=function(obj){return typeof obj==='function';};}
_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj));};_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj;};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=='[object Boolean]';};_.isNull=function(obj){return obj===null;};_.isUndefined=function(obj){return obj===void 0;};_.has=function(obj,key){return hasOwnProperty.call(obj,key);};_.noConflict=function(){root._=previousUnderscore;return this;};_.identity=function(value){return value;};_.times=function(n,iterator,context){var accum=Array(Math.max(0,n));for(var i=0;i<n;i++)accum[i]=iterator.call(context,i);return accum;};_.random=function(min,max){if(max==null){max=min;min=0;}
return min+Math.floor(Math.random()*(max-min+1));};var entityMap={escape:{'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','/':'&#x2F;'}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp('['+_.keys(entityMap.escape).join('')+']','g'),unescape:new RegExp('('+_.keys(entityMap.unescape).join('|')+')','g')};_.each(['escape','unescape'],function(method){_[method]=function(string){if(string==null)return'';return(''+string).replace(entityRegexes[method],function(match){return entityMap[method][match];});};});_.result=function(object,property){if(object==null)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value;};_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args));};});};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+'';return prefix?prefix+id:id;};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'",'\\':'\\','\r':'r','\n':'n','\t':'t','\u2028':'u2028','\u2029':'u2029'};var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join('|')+'|$','g');var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,function(match){return'\\'+escapes[match];});if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'";}
if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'";}
if(evaluate){source+="';\n"+evaluate+"\n__p+='";}
index=offset+match.length;return match;});source+="';\n";if(!settings.variable)source='with(obj||{}){\n'+source+'}\n';source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+
source+"return __p;\n";try{render=new Function(settings.variable||'obj','_',source);}catch(e){e.source=source;throw e;}
if(data)return render(data,_);var template=function(data){return render.call(this,data,_);};template.source='function('+(settings.variable||'obj')+'){\n'+source+'}';return template;};_.chain=function(obj){return _(obj).chain();};var result=function(obj){return this._chain?_(obj).chain():obj;};_.mixin(_);each(['pop','push','reverse','shift','sort','splice','unshift'],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name=='shift'||name=='splice')&&obj.length===0)delete obj[0];return result.call(this,obj);};});each(['concat','join','slice'],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments));};});_.extend(_.prototype,{chain:function(){this._chain=true;return this;},value:function(){return this._wrapped;}});}).call(this);(function(exports){var config={allowErrors:false,autoescape:true,cache:true,encoding:'utf8',filters:filters,root:'/',tags:tags,extensions:{},tzOffset:0},_config=_.extend({},config),CACHE={};exports.init=function(options){CACHE={};_config=_.extend({},config,options);_config.filters=_.extend(filters,options.filters);_config.tags=_.extend(tags,options.tags);dateformat.defaultTZOffset=_config.tzOffset;};function TemplateError(error){return{render:function(){return'<pre>'+error.stack+'</pre>';}};}
function createRenderFunc(code){return new Function('_context','_parents','_filters','_','_ext',['_parents = _parents ? _parents.slice() : [];','_context = _context || {};','var j = _parents.length,','  _output = "",','  _this = this;','while (j--) {','   if (_parents[j] === this.id) {','     return "Circular import of template " + this.id + " in " + _parents[_parents.length-1];','   }','}','_parents.push(this.id);',code,'return _output;'].join(''));}
function createTemplate(data,id){var template={compileFile:exports.compileFile,blocks:{},type:parser.TEMPLATE,id:id},tokens,code,render;if(_config.allowErrors){tokens=parser.parse.call(template,data,_config.tags,_config.autoescape);}else{try{tokens=parser.parse.call(template,data,_config.tags,_config.autoescape);}catch(e){return new TemplateError(e);}}
template.tokens=tokens;code=parser.compile.call(template);if(code!==false){render=createRenderFunc(code);}else{render=function(_context,_parents,_filters,_,_ext){template.tokens=tokens;code=parser.compile.call(template,'',_context);var fn=createRenderFunc(code);return fn.call(this,_context,_parents,_filters,_,_ext);};}
template.render=function(context,parents){if(_config.allowErrors){return render.call(this,context,parents,_config.filters,_,_config.extensions);}
try{return render.call(this,context,parents,_config.filters,_,_config.extensions);}catch(e){return new TemplateError(e);}};return template;}
function getTemplate(source,options){var key=options.filename||source;if(_config.cache||options.cache){if(!CACHE.hasOwnProperty(key)){CACHE[key]=createTemplate(source,key);}
return CACHE[key];}
return createTemplate(source,key);}
exports.compileFile=function(filepath,forceAllowErrors){var tpl,get;if(_config.cache&&CACHE.hasOwnProperty(filepath)){return CACHE[filepath];}
if(typeof window!=='undefined'){throw new TemplateError({stack:'You must pre-compile all templates in-browser. Use `swig.compile(template);`.'});}
get=function(){var excp,getSingle,c;getSingle=function(prefix){var file=((/^\//).test(filepath)||(/^.:/).test(filepath))?filepath:prefix+'/'+filepath,data;try{data=fs.readFileSync(file,config.encoding);tpl=getTemplate(data,{filename:filepath});}catch(e){excp=e;}};if(typeof _config.root==="string"){getSingle(_config.root);}
if(_config.root instanceof Array){c=0;while(tpl===undefined&&c<_config.root.length){getSingle(_config.root[c]);c=c+1;}}
if(tpl===undefined){throw excp;}};if(_config.allowErrors||forceAllowErrors){get();}else{try{get();}catch(error){tpl=new TemplateError(error);}}
return tpl;};exports.compile=function(source,options){var tmpl=getTemplate(source,options||{});return function(source,options){return tmpl.render(source,options);};};})(swig);(function(exports){var KEYWORDS=/^(Array|ArrayBuffer|Boolean|Date|Error|eval|EvalError|Function|Infinity|Iterator|JSON|Math|Namespace|NaN|Number|Object|QName|RangeError|ReferenceError|RegExp|StopIteration|String|SyntaxError|TypeError|undefined|uneval|URIError|XML|XMLList|break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|this|throw|try|typeof|var|void|while|with)(?=(\.|$))/;exports.isStringLiteral=function(string){if(typeof string!=='string'){return false;}
var first=string.substring(0,1),last=string.charAt(string.length-1,1),teststr;if((first===last)&&(first==="'"||first==='"')){teststr=string.substr(1,string.length-2).split('').reverse().join('');if((first==="'"&&(/'(?!\\)/).test(teststr))||(last==='"'&&(/"(?!\\)/).test(teststr))){throw new Error('Invalid string literal. Unescaped quote ('+string[0]+') found.');}
return true;}
return false;};exports.isLiteral=function(string){var literal=false;if((/^\d+([.]\d+)?$/).test(string)){literal=true;}else if(exports.isStringLiteral(string)){literal=true;}
return literal;};exports.isValidName=function(string){return((typeof string==='string')&&string.substr(0,2)!=='__'&&(/^([$A-Za-z_]+[$A-Za-z_0-9]*)(\.?([$A-Za-z_]+[$A-Za-z_0-9]*))*$/).test(string)&&!KEYWORDS.test(string));};exports.isValidShortName=function(string){return string.substr(0,2)!=='__'&&(/^[$A-Za-z_]+[$A-Za-z_0-9]*$/).test(string)&&!KEYWORDS.test(string);};exports.isValidBlockName=function(string){return(/^[A-Za-z]+[A-Za-z_0-9]*$/).test(string);};function stripWhitespace(input){return input.replace(/^\s+|\s+$/g,'');}
exports.stripWhitespace=stripWhitespace;function filterVariablePath(props){var filtered=[],literal='',i=0;for(i;i<props.length;i+=1){if(props[i]&&props[i].charAt(0)!==props[i].charAt(props[i].length-1)&&(props[i].indexOf('"')===0||props[i].indexOf("'")===0)){literal=props[i];continue;}
if(props[i]==='.'&&literal){literal+='.';continue;}
if(props[i].indexOf('"')===props[i].length-1||props[i].indexOf("'")===props[i].length-1){literal+=props[i];filtered.push(literal);literal='';}else{filtered.push(props[i]);}}
return _.compact(filtered);}
function check(variable,context){if(_.isArray(variable)){return'(true)';}
variable=variable.replace(/^this/,'_this.__currentContext');if(exports.isLiteral(variable)){return'(true)';}
var props=variable.split(/(\.|\[|\])/),chain='',output=[],inArr=false,prevDot=false;if(typeof context==='string'&&context.length){props.unshift(context);}
props=_.reject(props,function(val){return val==='';});props=filterVariablePath(props);_.each(props,function(prop){if(prop==='.'){prevDot=true;return;}
if(prop==='['){inArr=true;return;}
if(prop===']'){inArr=false;return;}
if(!chain){chain=prop;}else if(inArr){if(!exports.isStringLiteral(prop)){if(prevDot){output[output.length-1]=_.last(output).replace(/\] !== "undefined"$/,'_'+prop+'] !== "undefined"');chain=chain.replace(/\]$/,'_'+prop+']');return;}
chain+='[___'+prop+']';}else{chain+='['+prop+']';}}else{chain+='.'+prop;}
prevDot=false;output.push('typeof '+chain+' !== "undefined"');});return'('+output.join(' && ')+')';}
exports.check=check;exports.escapeVarName=function(variable,context,args){if(variable===''){return'';}
if(_.isArray(variable)){_.each(variable,function(val,key){variable[key]=exports.escapeVarName(val,context);});return variable;}
variable=variable.replace(/^this/,'_this.__currentContext');if(exports.isLiteral(variable)){return variable;}
if(typeof context==='string'&&context.length){variable=context+'.'+variable;}
var chain='',props=variable.split(/(\.|\[|\])/),inArr=false,prevDot=false;props=_.reject(props,function(val){return val==='';});props=filterVariablePath(props);_.each(props,function(prop){if(prop==='.'){prevDot=true;return;}
if(prop==='['){inArr=true;return;}
if(prop===']'){inArr=false;return;}
if(!chain){chain=prop;}else if(inArr){if(!exports.isStringLiteral(prop)){if(prevDot){chain=chain.replace(/\]$/,'_'+prop+']');}else{chain+='[___'+prop+']';}}else{chain+='['+prop+']';}}else{chain+='.'+prop;}
prevDot=false;});return'(typeof '+chain+' === \'function\') ? '+chain+'('+args+') : '+chain;};exports.wrapArgs=function(args){if(!args){return{declarations:'',args:''};}
var declarations='';args=_.map(args.split(','),function(value){var varname,stripped=value.replace(/^\s+|\s+$/g,'');try{varname='__'+parser.parseVariable(stripped).name.replace(/\W/g,'_');}catch(e){return value;}
if(exports.isValidName(stripped)){declarations+=exports.setVar(varname,parser.parseVariable(stripped));return varname;}
return value;});return{declarations:declarations,args:(args&&args.length)?args.join(','):'""'};};exports.wrapMethod=function(variable,filter,context){var output='(function () {\n',args,wrappedArgs;variable=variable||'""';if(!filter){return variable;}
wrappedArgs=exports.wrapArgs(filter.args,output);output+=wrappedArgs.declarations;output+='return ';output+=(context)?context+'["':'';output+=filter.name;output+=(context)?'"]':'';output+='(';output+=wrappedArgs.args;output+=');\n';return output+'})()';};exports.wrapFilter=function(variable,filter){var output='',args='';variable=variable||'""';if(!filter){return variable;}
if(filters.hasOwnProperty(filter.name)){args=(filter.args)?variable+', '+filter.args:variable;output+=exports.wrapMethod(variable,{name:filter.name,args:args},'_filters');}else{throw new Error('Filter "'+filter.name+'" not found');}
return output;};exports.wrapFilters=function(variable,filters,context,escape,args){var output=exports.escapeVarName(variable,context,args);if(filters&&filters.length>0){_.each(filters,function(filter){switch(filter.name){case'raw':escape=false;return;case'e':case'escape':escape=filter.args||escape;return;default:output=exports.wrapFilter(output,filter,'_filters');break;}});}
output=output||'""';if(escape){output='_filters.escape.call(this, '+output+', '+escape+')';}
return output;};exports.setVar=function(varName,argument,args){var out='',props,output,inArr,wrappedArgs;if((/\[/).test(argument.name)){props=argument.name.split(/(\[|\])/);output=[];inArr=false;_.each(props,function(prop){if(prop===''){return;}
if(prop==='['){inArr=true;return;}
if(prop===']'){inArr=false;return;}
if(inArr&&!exports.isStringLiteral(prop)){out+=exports.setVar('___'+prop.replace(/\W/g,'_'),{name:prop,filters:[],escape:true});}});}
wrappedArgs=exports.wrapArgs(args);out+=wrappedArgs.declarations;out+='var '+varName+' = "";\n'+'if ('+check(argument.name,'_context')+') {\n'+'  '+varName+' = '+exports.wrapFilters(argument.name,argument.filters,'_context',argument.escape,wrappedArgs.args)+';\n'+'} else if ('+check(argument.name)+') {\n'+'  '+varName+' = '+exports.wrapFilters(argument.name,argument.filters,null,argument.escape,wrappedArgs.args)+';\n'+'}\n';if(argument.filters.length){out+=' else if (true) {\n';out+='  '+varName+' = '+exports.wrapFilters('',argument.filters,null,argument.escape,wrappedArgs.args)+';\n';out+='}\n';}
return out;};exports.parseIfArgs=function(args,parser){var operators=['==','<','>','!=','<=','>=','===','!==','&&','||','in','and','or','mod','%'],errorString='Bad if-syntax in `{% if '+args.join(' ')+' %}...',startParen=/^\(+/,endParen=/\)+$/,tokens=[],prevType,last,closing=0;_.each(args,function(value,index){var endsep=0,startsep=0,operand;if(startParen.test(value)){startsep=value.match(startParen)[0].length;closing+=startsep;value=value.replace(startParen,'');while(startsep){startsep-=1;tokens.push({type:'separator',value:'('});}}
if((/^\![^=]/).test(value)||(value==='not')){if(value==='not'){value='';}else{value=value.substr(1);}
tokens.push({type:'operator',value:'!'});}
if(endParen.test(value)&&value.indexOf('(')===-1){if(!closing){throw new Error(errorString);}
endsep=value.match(endParen)[0].length;value=value.replace(endParen,'');closing-=endsep;}
if(value==='in'){last=tokens.pop();prevType='inindex';}else if(_.indexOf(operators,value)!==-1){if(prevType==='operator'){throw new Error(errorString);}
value=value.replace('and','&&').replace('or','||').replace('mod','%');tokens.push({value:value});prevType='operator';}else if(value!==''){if(prevType==='value'){throw new Error(errorString);}
operand=parser.parseVariable(value);if(prevType==='inindex'){tokens.push({preout:last.preout+exports.setVar('__op'+index,operand),value:'(((_.isArray(__op'+index+') || typeof __op'+index+' === "string") && _.indexOf(__op'+index+', '+last.value+') !== -1) || (typeof __op'+index+' === "object" && '+last.value+' in __op'+index+'))'});last=null;}else{tokens.push({preout:exports.setVar('__op'+index,operand),value:'__op'+index});}
prevType='value';}
while(endsep){endsep-=1;tokens.push({type:'separator',value:')'});}});if(closing>0){throw new Error(errorString);}
return tokens;};})(helpers);(function(exports){var _months={full:['January','February','March','April','May','June','July','August','September','October','November','December'],abbr:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']},_days={full:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],abbr:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],alt:{'-1':'Yesterday',0:'Today',1:'Tomorrow'}};exports.defaultTZOffset=0;exports.DateZ=function(){var members={'default':['getUTCDate','getUTCDay','getUTCFullYear','getUTCHours','getUTCMilliseconds','getUTCMinutes','getUTCMonth','getUTCSeconds','toISOString','toGMTString','toUTCString','valueOf','getTime'],z:['getDate','getDay','getFullYear','getHours','getMilliseconds','getMinutes','getMonth','getSeconds','getYear','toDateString','toLocaleDateString','toLocaleTimeString'],'string':['toLocaleString','toString','toTimeString'],zSet:['setDate','setFullYear','setHours','setMilliseconds','setMinutes','setMonth','setSeconds','setTime','setYear'],set:['setUTCDate','setUTCFullYear','setUTCHours','setUTCMilliseconds','setUTCMinutes','setUTCMonth','setUTCSeconds'],'static':['UTC','parse']},d=this,i;d.date=d.dateZ=(arguments.length>1)?new Date(Date.UTC.apply(Date,arguments)+((new Date()).getTimezoneOffset()*60000)):(arguments.length===1)?new Date(new Date(arguments['0'])):new Date();d.timezoneOffset=d.dateZ.getTimezoneOffset();function zeroPad(i){return(i<10)?'0'+i:i;}
function _toTZString(){var hours=zeroPad(Math.floor(Math.abs(d.timezoneOffset)/60)),minutes=zeroPad(Math.abs(d.timezoneOffset)-hours*60),prefix=(d.timezoneOffset<0)?'+':'-',abbr=(d.tzAbbreviation===undefined)?'':' ('+d.tzAbbreviation+')';return'GMT'+prefix+hours+minutes+abbr;}
_.each(members.z,function(name){d[name]=function(){return d.dateZ[name]();};});_.each(members.string,function(name){d[name]=function(){return d.dateZ[name].apply(d.dateZ,[]).replace(/GMT[+\-]\\d{4} \\(([a-zA-Z]{3,4})\\)/,_toTZString());};});_.each(members['default'],function(name){d[name]=function(){return d.date[name]();};});_.each(members['static'],function(name){d[name]=function(){return Date[name].apply(Date,arguments);};});_.each(members.zSet,function(name){d[name]=function(){d.dateZ[name].apply(d.dateZ,arguments);d.date=new Date(d.dateZ.getTime()-d.dateZ.getTimezoneOffset()*60000+d.timezoneOffset*60000);return d;};});_.each(members.set,function(name){d[name]=function(){d.date[name].apply(d.date,arguments);d.dateZ=new Date(d.date.getTime()+d.date.getTimezoneOffset()*60000-d.timezoneOffset*60000);return d;};});if(exports.defaultTZOffset){this.setTimezoneOffset(exports.defaultTZOffset);}};exports.DateZ.prototype={getTimezoneOffset:function(){return this.timezoneOffset;},setTimezoneOffset:function(offset,abbr){this.timezoneOffset=offset;if(abbr){this.tzAbbreviation=abbr;}
this.dateZ=new Date(this.date.getTime()+this.date.getTimezoneOffset()*60000-this.timezoneOffset*60000);return this;}};exports.d=function(input){return(input.getDate()<10?'0':'')+input.getDate();};exports.D=function(input){return _days.abbr[input.getDay()];};exports.j=function(input){return input.getDate();};exports.l=function(input){return _days.full[input.getDay()];};exports.N=function(input){var d=input.getDay();return(d>=1)?d+1:7;};exports.S=function(input){var d=input.getDate();return(d%10===1&&d!==11?'st':(d%10===2&&d!==12?'nd':(d%10===3&&d!==13?'rd':'th')));};exports.w=function(input){return input.getDay();};exports.z=function(input,offset,abbr){var year=input.getFullYear(),e=new exports.DateZ(year,input.getMonth(),input.getDate(),12,0,0),d=new exports.DateZ(year,0,1,12,0,0);e.setTimezoneOffset(offset,abbr);d.setTimezoneOffset(offset,abbr);return Math.round((e-d)/86400000);};exports.W=function(input){var target=new Date(input.valueOf()),dayNr=(input.getDay()+6)%7,fThurs;target.setDate(target.getDate()-dayNr+3);fThurs=target.valueOf();target.setMonth(0,1);if(target.getDay()!==4){target.setMonth(0,1+((4-target.getDay())+7)%7);}
return 1+Math.ceil((fThurs-target)/604800000);};exports.F=function(input){return _months.full[input.getMonth()];};exports.m=function(input){return(input.getMonth()<9?'0':'')+(input.getMonth()+1);};exports.M=function(input){return _months.abbr[input.getMonth()];};exports.n=function(input){return input.getMonth()+1;};exports.t=function(input){return 32-(new Date(input.getFullYear(),input.getMonth(),32).getDate());};exports.L=function(input){return new Date(input.getFullYear(),1,29).getDate()===29;};exports.o=function(input){var target=new Date(input.valueOf());target.setDate(target.getDate()-((input.getDay()+6)%7)+3);return target.getFullYear();};exports.Y=function(input){return input.getFullYear();};exports.y=function(input){return(input.getFullYear().toString()).substr(2);};exports.a=function(input){return input.getHours()<12?'am':'pm';};exports.A=function(input){return input.getHours()<12?'AM':'PM';};exports.B=function(input){var hours=input.getUTCHours(),beats;hours=(hours===23)?0:hours+1;beats=Math.abs(((((hours*60)+input.getUTCMinutes())*60)+input.getUTCSeconds())/86.4).toFixed(0);return('000'.concat(beats).slice(beats.length));};exports.g=function(input){var h=input.getHours();return h===0?12:(h>12?h-12:h);};exports.G=function(input){return input.getHours();};exports.h=function(input){var h=input.getHours();return((h<10||(12<h&&22>h))?'0':'')+((h<12)?h:h-12);};exports.H=function(input){var h=input.getHours();return(h<10?'0':'')+h;};exports.i=function(input){var m=input.getMinutes();return(m<10?'0':'')+m;};exports.s=function(input){var s=input.getSeconds();return(s<10?'0':'')+s;};exports.O=function(input){var tz=input.getTimezoneOffset();return(tz<0?'-':'+')+(tz/60<10?'0':'')+Math.abs((tz/60))+'00';};exports.Z=function(input){return input.getTimezoneOffset()*60;};exports.c=function(input){return input.toISOString();};exports.r=function(input){return input.toUTCString();};exports.U=function(input){return input.getTime()/1000;};})(dateformat);(function(exports){exports.add=function(input,addend){if(_.isArray(input)&&_.isArray(addend)){return input.concat(addend);}
if(typeof input==='object'&&typeof addend==='object'){return _.extend(input,addend);}
if(_.isNumber(input)&&_.isNumber(addend)){return input+addend;}
return input+addend;};exports.addslashes=function(input){if(typeof input==='object'){_.each(input,function(value,key){input[key]=exports.addslashes(value);});return input;}
return input.replace(/\\/g,'\\\\').replace(/\'/g,"\\'").replace(/\"/g,'\\"');};exports.capitalize=function(input){if(typeof input==='object'){_.each(input,function(value,key){input[key]=exports.capitalize(value);});return input;}
return input.toString().charAt(0).toUpperCase()+input.toString().substr(1).toLowerCase();};exports.date=function(input,format,offset,abbr){var l=format.length,date=new dateformat.DateZ(input),cur,i=0,out='';if(offset){date.setTimezoneOffset(offset,abbr);}
for(i;i<l;i+=1){cur=format.charAt(i);if(dateformat.hasOwnProperty(cur)){out+=dateformat[cur](date,offset,abbr);}else{out+=cur;}}
return out;};exports['default']=function(input,def){return(typeof input!=='undefined'&&(input||typeof input==='number'))?input:def;};exports.escape=exports.e=function(input,type){type=type||'html';if(typeof input==='string'){if(type==='js'){var i=0,code,out='';input=input.replace(/\\/g,'\\u005C');for(i;i<input.length;i+=1){code=input.charCodeAt(i);if(code<32){code=code.toString(16).toUpperCase();code=(code.length<2)?'0'+code:code;out+='\\u00'+code;}else{out+=input[i];}}
return out.replace(/&/g,'\\u0026').replace(/</g,'\\u003C').replace(/>/g,'\\u003E').replace(/\'/g,'\\u0027').replace(/"/g,'\\u0022').replace(/\=/g,'\\u003D').replace(/-/g,'\\u002D').replace(/;/g,'\\u003B');}
return input.replace(/&(?!amp;|lt;|gt;|quot;|#39;)/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');}
return input;};exports.first=function(input){if(typeof input==='object'&&!_.isArray(input)){return'';}
if(typeof input==='string'){return input.substr(0,1);}
return _.first(input);};exports.join=function(input,separator){if(_.isArray(input)){return input.join(separator);}
if(typeof input==='object'){var out=[];_.each(input,function(value,key){out.push(value);});return out.join(separator);}
return input;};exports.json_encode=function(input,indent){return JSON.stringify(input,null,indent||0);};exports.last=function(input){if(typeof input==='object'&&!_.isArray(input)){return'';}
if(typeof input==='string'){return input.charAt(input.length-1);}
return _.last(input);};exports.length=function(input){if(typeof input==='object'){return _.keys(input).length;}
return input.length;};exports.lower=function(input){if(typeof input==='object'){_.each(input,function(value,key){input[key]=exports.lower(value);});return input;}
return input.toString().toLowerCase();};exports.replace=function(input,search,replacement,flags){var r=new RegExp(search,flags);return input.replace(r,replacement);};exports.reverse=function(input){if(_.isArray(input)){return input.reverse();}
return input;};exports.striptags=function(input){if(typeof input==='object'){_.each(input,function(value,key){input[key]=exports.striptags(value);});return input;}
return input.toString().replace(/(<([^>]+)>)/ig,'');};exports.title=function(input){if(typeof input==='object'){_.each(input,function(value,key){input[key]=exports.title(value);});return input;}
return input.toString().replace(/\w\S*/g,function(str){return str.charAt(0).toUpperCase()+str.substr(1).toLowerCase();});};exports.uniq=function(input){return _.uniq(input);};exports.upper=function(input){if(typeof input==='object'){_.each(input,function(value,key){input[key]=exports.upper(value);});return input;}
return input.toString().toUpperCase();};exports.url_encode=function(input){return encodeURIComponent(input);};exports.url_decode=function(input){return decodeURIComponent(input);};})(filters);(function(exports){var variableRegexp=/^\{\{[^\r]*?\}\}$/,logicRegexp=/^\{%[^\r]*?%\}$/,commentRegexp=/^\{#[^\r]*?#\}$/,TEMPLATE=exports.TEMPLATE=0,LOGIC_TOKEN=1,VAR_TOKEN=2;exports.TOKEN_TYPES={TEMPLATE:TEMPLATE,LOGIC:LOGIC_TOKEN,VAR:VAR_TOKEN};function getMethod(input){return helpers.stripWhitespace(input).match(/^[\w\.]+/)[0];}
function doubleEscape(input){return input.replace(/\\/g,'\\\\');}
function getArgs(input){return doubleEscape(helpers.stripWhitespace(input).replace(/^[\w\.]+\(|\)$/g,''));}
function getContextVar(varName,context){var a=varName.split(".");while(a.length){context=context[a.splice(0,1)[0]];}
return context;}
function getTokenArgs(token,parts){parts=_.map(parts,doubleEscape);var i=0,l=parts.length,arg,ender,out=[];function concat(from,ending){var end=new RegExp('\\'+ending+'$'),i=from,out='';while(!(end).test(out)&&i<parts.length){out+=' '+parts[i];parts[i]=null;i+=1;}
if(!end.test(out)){throw new Error('Malformed arguments '+out+' sent to tag.');}
return out.replace(/^ /,'');}
for(i;i<l;i+=1){arg=parts[i];if(arg===null||(/^\s+$/).test(arg)){continue;}
if(((/^\"/).test(arg)&&!(/\"[\]\}]?$/).test(arg))||((/^\'/).test(arg)&&!(/\'[\]\}]?$/).test(arg))||((/^\{/).test(arg)&&!(/\}$/).test(arg))||((/^\[/).test(arg)&&!(/\]$/).test(arg))){switch(arg.substr(0,1)){case"'":ender="'";break;case'"':ender='"';break;case'[':ender=']';break;case'{':ender='}';break;}
out.push(concat(i,ender));continue;}
out.push(arg);}
return out;}
function findSubBlocks(topToken,blocks){_.each(topToken.tokens,function(token,index){if(token.name==='block'){blocks[token.args[0]]=token;findSubBlocks(token,blocks);}});}
function getParentBlock(token){var block;if(token.parentBlock){block=token.parentBlock;}else if(token.parent){block=getParentBlock(_.last(token.parent));}
return block;}
exports.parseVariable=function(token,escape){if(!token){return{type:null,name:'',filters:[],escape:escape};}
var filters=[],parts=token.replace(/^\{\{\s*|\s*\}\}$/g,'').split('|'),varname=parts.shift(),args=null,part;if((/\(/).test(varname)){args=getArgs(varname.replace(/^\w+\./,''));varname=getMethod(varname);}
_.each(parts,function(part,i){if(part&&((/^[\w\.]+\(/).test(part)||(/\)$/).test(part))&&!(/^[\w\.]+\([^\)]*\)$/).test(part)){parts[i]+=((parts[i+1])?'|'+parts[i+1]:'');parts[i+1]=false;}});parts=_.without(parts,false);_.each(parts,function(part){var filter_name=getMethod(part);if((/\(/).test(part)){filters.push({name:filter_name,args:getArgs(part)});}else{filters.push({name:filter_name,args:''});}});return{type:VAR_TOKEN,name:varname,args:args,filters:filters,escape:escape};};exports.parse=function(data,tags,autoescape){var rawtokens=helpers.stripWhitespace(data).split(/(\{%[^\r]*?%\}|\{\{.*?\}\}|\{#[^\r]*?#\})/),escape=!!autoescape,last_escape=escape,stack=[[]],index=0,i=0,j=rawtokens.length,token,parts,tagname,lines=1,curline=1,newlines=null,lastToken,rawStart=/^\{\% *raw *\%\}/,rawEnd=/\{\% *endraw *\%\}$/,inRaw=false,stripAfter=false,stripBefore=false,stripStart=false,stripEnd=false;for(i;i<j;i+=1){token=rawtokens[i];curline=lines;newlines=token.match(/\n/g);stripAfter=false;stripBefore=false;stripStart=false;stripEnd=false;if(newlines){lines+=newlines.length;}
if(inRaw!==false&&!rawEnd.test(token)){inRaw+=token;continue;}
if(token.length===0||commentRegexp.test(token)){continue;}else if(/^\s+$/.test(token)){token=token.replace(/ +/,' ').replace(/\n+/,'\n');}else if(variableRegexp.test(token)){token=exports.parseVariable(token,escape);}else if(logicRegexp.test(token)){if(rawEnd.test(token)){token=inRaw+token.replace(rawEnd,'');inRaw=false;stack[index].push(token);continue;}
if(rawStart.test(token)){inRaw=token.replace(rawStart,'');continue;}
parts=token.replace(/^\{%\s*|\s*%\}$/g,'').split(' ');if(parts[0]==='-'){stripBefore=true;parts.shift();}
tagname=parts.shift();if(_.last(parts)==='-'){stripAfter=true;parts.pop();}
if(index>0&&(/^end/).test(tagname)){lastToken=_.last(stack[stack.length-2]);if('end'+lastToken.name===tagname){if(lastToken.name==='autoescape'){escape=last_escape;}
lastToken.strip.end=stripBefore;lastToken.strip.after=stripAfter;stack.pop();index-=1;continue;}
throw new Error('Expected end tag for "'+lastToken.name+'", but found "'+tagname+'" at line '+lines+'.');}
if(!tags.hasOwnProperty(tagname)){throw new Error('Unknown logic tag at line '+lines+': "'+tagname+'".');}
if(tagname==='autoescape'){last_escape=escape;escape=(!parts.length||parts[0]==='true')?((parts.length>=2)?parts[1]:true):false;}
token={type:LOGIC_TOKEN,line:curline,name:tagname,compile:tags[tagname],parent:_.uniq(stack[stack.length-2]||[]),strip:{before:stripBefore,after:stripAfter,start:false,end:false}};token.args=getTokenArgs(token,parts);if(tags[tagname].ends){token.strip.after=false;token.strip.start=stripAfter;stack[index].push(token);stack.push(token.tokens=[]);index+=1;continue;}}
stack[index].push(token);}
if(inRaw!==false){throw new Error('Missing expected end tag for "raw" on line '+curline+'.');}
if(index!==0){lastToken=_.last(stack[stack.length-2]);throw new Error('Missing end tag for "'+lastToken.name+'" that was opened on line '+lastToken.line+'.');}
return stack[index];};function precompile(indent,context){var filepath,extendsHasVar,preservedTokens=[];if(this.type===TEMPLATE){_.each(this.tokens,function(token,index){if(!extendsHasVar){if(token.name==='extends'){filepath=token.args[0];if(!helpers.isStringLiteral(filepath)){if(!context){extendsHasVar=true;return;}
filepath="\""+getContextVar(filepath,context)+"\"";}
if(!helpers.isStringLiteral(filepath)||token.args.length>1){throw new Error('Extends tag on line '+token.line+' accepts exactly one string literal as an argument.');}
if(index>0){throw new Error('Extends tag must be the first tag in the template, but "extends" found on line '+token.line+'.');}
token.template=this.compileFile(filepath.replace(/['"]/g,''),true);this.parent=token.template;this.blocks=_.extend({},this.parent.blocks,this.blocks);}else if(token.name==='block'){var blockname=token.args[0],parentBlockIndex;if(!helpers.isValidBlockName(blockname)||token.args.length!==1){throw new Error('Invalid block tag name "'+blockname+'" on line '+token.line+'.');}
this.blocks[blockname]=token;findSubBlocks(token,this.blocks);if(this.parent){token.parentBlock=this.parent.blocks[blockname];parentBlockIndex=_.indexOf(this.parent.tokens,this.parent.blocks[blockname]);if(parentBlockIndex>=0){this.parent.tokens[parentBlockIndex]=token;}}}else if(token.type===LOGIC_TOKEN){preservedTokens.push(token);}}},this);if(extendsHasVar){return false;}
if(this.parent&&this.parent.tokens){this.tokens=preservedTokens.concat(this.parent.tokens);}}}
exports.compile=function compile(indent,context,template){var code='',wrappedInMethod,blockname,parentBlock;indent=indent||'';if(this.type===TEMPLATE){template=this;}
if(!this.blocks){this.blocks={};}
if(precompile.call(this,indent,context)===false){return false;}
_.each(this.tokens,function(token,index){var name,key,args,prev,next;if(typeof token==='string'){prev=this.tokens[index-1];next=this.tokens[index+1];if(prev&&prev.strip&&prev.strip.after){token=token.replace(/^\s+/,'');}
if(next&&next.strip&&next.strip.before){token=token.replace(/\s+$/,'');}
code+='_output += "'+doubleEscape(token).replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/"/g,'\\"')+'";\n';return code;}
if(typeof token!=='object'){return;}
if(token.type===VAR_TOKEN){name=token.name.replace(/\W/g,'_');key=(helpers.isLiteral(name))?'["'+name+'"]':'.'+name;args=(token.args&&token.args.length)?token.args:'';code+='if (typeof _context !== "undefined" && typeof _context'+key+' === "function") {\n';wrappedInMethod=helpers.wrapMethod('',{name:name,args:args},'_context');code+='  _output = (typeof _output === "undefined") ? '+wrappedInMethod+': _output + '+wrappedInMethod+';\n';if(helpers.isValidName(name)){code+='} else if (typeof '+name+' === "function") {\n';wrappedInMethod=helpers.wrapMethod('',{name:name,args:args});code+='  _output = (typeof _output === "undefined") ? '+wrappedInMethod+': _output + '+wrappedInMethod+';\n';}
code+='} else {\n';code+=helpers.setVar('__'+name,token,args);code+='  _output = (typeof _output === "undefined") ? __'+name+': _output + __'+name+';\n';code+='}\n';}
if(token.type!==LOGIC_TOKEN){return;}
if(token.name==='block'){blockname=token.args[0];if(!template.blocks.hasOwnProperty(blockname)){throw new Error('Unrecognized nested block.  Block \"'+blockname+'\" at line '+token.line+' of \"'+template.id+'\" is not in template block list.');}
code+=compile.call(template.blocks[token.args[0]],indent+'  ',context,template);}else if(token.name==='parent'){parentBlock=getParentBlock(token);if(!parentBlock){throw new Error('No parent block found for parent tag at line '+
token.line+'.');}
code+=compile.call(parentBlock,indent+'  ',context);}else if(token.hasOwnProperty("compile")){if(token.strip.start&&token.tokens.length&&typeof token.tokens[0]==='string'){token.tokens[0]=token.tokens[0].replace(/^\s+/,'');}
if(token.strip.end&&token.tokens.length&&typeof _.last(token.tokens)==='string'){token.tokens[token.tokens.length-1]=_.last(token.tokens).replace(/\s+$/,'');}
code+=token.compile(indent+'  ',exports);}else{code+=compile.call(token,indent+'  ',context);}},this);return code;};})(parser);tags['autoescape']=(function(){module={};module.exports=function(indent,parser){return parser.compile.apply(this,[indent]);};module.exports.ends=true;return module.exports;})();tags['block']=(function(){module={};module.exports={ends:true};return module.exports;})();tags['else']=(function(){module={};module.exports=function(indent,parser){var last=_.last(this.parent).name,thisArgs=_.clone(this.args),ifarg,args,out;if(last==='for'){if(thisArgs.length){throw new Error('"else" tag cannot accept arguments in the "for" context.');}
return'} if (__loopLength === 0) {\n';}
if(last!=='if'){throw new Error('Cannot call else tag outside of "if" or "for" context.');}
ifarg=thisArgs.shift();args=(helpers.parseIfArgs(thisArgs,parser));out='';if(ifarg){out+='} else if (\n';out+='  (function () {\n';_.each(args,function(token){if(token.hasOwnProperty('preout')&&token.preout){out+=token.preout+'\n';}});out+='return (\n';_.each(args,function(token){out+=token.value+' ';});out+=');\n';out+='  })()\n';out+=') {\n';return out;}
return indent+'\n} else {\n';};return module.exports;})();tags['extends']=(function(){module={};module.exports={};return module.exports;})();tags['filter']=(function(){module={};module.exports=function(indent,parser){var thisArgs=_.clone(this.args),name=thisArgs.shift(),args=(thisArgs.length)?thisArgs.join(', '):'',value='(function () {\n';value+='  var _output = "";\n';value+=parser.compile.apply(this,[indent+'  '])+'\n';value+='  return _output;\n';value+='})()\n';return'_output += '+helpers.wrapFilter(value.replace(/\n/g,''),{name:name,args:args})+';\n';};module.exports.ends=true;return module.exports;})();tags['for']=(function(){module={};module.exports=function(indent,parser){var thisArgs=_.clone(this.args),operand1=thisArgs[0],operator=thisArgs[1],operand2=parser.parseVariable(thisArgs[2]),out='',loopShared;indent=indent||'';if(typeof operator!=='undefined'&&operator!=='in'){throw new Error('Invalid syntax in "for" tag');}
if(!helpers.isValidShortName(operand1)){throw new Error('Invalid arguments ('+operand1+') passed to "for" tag');}
loopShared='loop.index = __loopIndex + 1;\n'+'loop.index0 = __loopIndex;\n'+'loop.revindex = __loopLength - loop.index0;\n'+'loop.revindex0 = loop.revindex - 1;\n'+'loop.first = (__loopIndex === 0);\n'+'loop.last = (__loopIndex === __loopLength - 1);\n'+'_context["'+operand1+'"] = __loopIter[loop.key];\n'+
parser.compile.apply(this,[indent+'   ']);out='(function () {\n'+'  var loop = {}, __loopKey, __loopIndex = 0, __loopLength = 0, __keys = [],'+'    __ctx_operand = _context["'+operand1+'"],\n'+'    loop_cycle = function() {\n'+'      var args = _.toArray(arguments), i = loop.index0 % args.length;\n'+'      return args[i];\n'+'    };\n'+
helpers.setVar('__loopIter',operand2)+'  else {\n'+'    return;\n'+'  }\n'+'  if (_.isArray(__loopIter)) {\n'+'    __loopIndex = 0; __loopLength = __loopIter.length;\n'+'    for (; __loopIndex < __loopLength; __loopIndex += 1) {\n'+'       loop.key = __loopIndex;\n'+
loopShared+'    }\n'+'  } else if (typeof __loopIter === "object") {\n'+'    __keys = _.keys(__loopIter);\n'+'    __loopLength = __keys.length;\n'+'    __loopIndex = 0;\n'+'    for (; __loopIndex < __loopLength; __loopIndex += 1) {\n'+'       loop.key = __keys[__loopIndex];\n'+
loopShared+'    }\n'+'  }\n'+'  _context["'+operand1+'"] = __ctx_operand;\n'+'})();\n';return out;};module.exports.ends=true;return module.exports;})();tags['if']=(function(){module={};module.exports=function(indent,parser){var thisArgs=_.clone(this.args),args=(helpers.parseIfArgs(thisArgs,parser)),out='(function () {\n';_.each(args,function(token){if(token.hasOwnProperty('preout')&&token.preout){out+=token.preout+'\n';}});out+='\nif (\n';_.each(args,function(token){out+=token.value+' ';});out+=') {\n';out+=parser.compile.apply(this,[indent+'  ']);out+='\n}\n';out+='})();\n';return out;};module.exports.ends=true;return module.exports;})();tags['import']=(function(){module={};module.exports=function(indent,parser){if(this.args.length!==3){}
var thisArgs=_.clone(this.args),file=thisArgs[0],as=thisArgs[1],name=thisArgs[2],out='';if(!helpers.isLiteral(file)&&!helpers.isValidName(file)){throw new Error('Invalid attempt to import "'+file+'".');}
if(as!=='as'){throw new Error('Invalid syntax {% import "'+file+'" '+as+' '+name+' %}');}
out+='_.extend(_context, (function () {\n';out+='var _context = {}, __ctx = {}, _output = "";\n'+
helpers.setVar('__template',parser.parseVariable(file))+'_this.compileFile(__template).render(__ctx, _parents);\n'+'_.each(__ctx, function (item, key) {\n'+'  if (typeof item === "function") {\n'+'    _context["'+name+'_" + key] = item;\n'+'  }\n'+'});\n'+'return _context;\n';out+='})());\n';return out;};return module.exports;})();tags['include']=(function(){module={};module.exports=function(indent,parser){var args=_.clone(this.args),template=args.shift(),context='_context',ignore=false,out='',ctx;indent=indent||'';if(!helpers.isLiteral(template)&&!helpers.isValidName(template)){throw new Error('Invalid arguments passed to \'include\' tag.');}
if(args.length){if(_.last(args)==='only'){context='{}';args.pop();}
if(args.length>1&&args[0]==='ignore'&args[1]==='missing'){args.shift();args.shift();ignore=true;}
if(args.length&&args[0]!=='with'){throw new Error('Invalid arguments passed to \'include\' tag.');}
if(args[0]==='with'){args.shift();if(!args.length){throw new Error('Context for \'include\' tag not provided, but expected after \'with\' token.');}
ctx=args.shift();context='_context["'+ctx+'"] || '+ctx;}}
out='(function () {\n'+
helpers.setVar('__template',parser.parseVariable(template))+'\n'+'  var includeContext = '+context+';\n';if(ignore){out+='try {\n';}
out+='  if (typeof __template === "string") {\n';out+='    _output += _this.compileFile(__template).render(includeContext, _parents);\n';out+='  }\n';if(ignore){out+='} catch (e) {}\n';}
out+='})();\n';return out;};return module.exports;})();tags['macro']=(function(){module={};module.exports=function(indent,parser){var thisArgs=_.clone(this.args),macro=thisArgs.shift(),args='',out='';if(thisArgs.length){args=JSON.stringify(thisArgs).replace(/^\[|\'|\"|\]$/g,'');}
out+='_context.'+macro+' = function ('+args+') {\n';out+='  var _output = "";\n';out+=parser.compile.apply(this,[indent+'  ']);out+='  return _output;\n';out+='};\n';return out;};module.exports.ends=true;return module.exports;})();tags['parent']=(function(){module={};module.exports={};return module.exports;})();tags['raw']=(function(){module={};module.exports={ends:true};return module.exports;})();tags['set']=(function(){module={};module.exports=function(indent,parser){var thisArgs=_.clone(this.args),varname=helpers.escapeVarName(thisArgs.shift(),'_context'),value;if(thisArgs.shift()!=='='){throw new Error('Invalid token "'+thisArgs[1]+'" in {% set '+thisArgs[0]+' %}. Missing "=".');}
value=thisArgs[0];if(helpers.isLiteral(value)||(/^\{|^\[/).test(value)||value==='true'||value==='false'){return' '+varname+' = '+value+';';}
value=parser.parseVariable(value);return' '+varname+' = '+'(function () {\n'+'  var _output;\n'+
parser.compile.apply({tokens:[value]},[indent])+'\n'+'  return _output;\n'+'})();\n';};return module.exports;})();tags['spaceless']=(function(){module={};module.exports=function(indent,parser){var output=[],i=this.tokens.length-1;for(i;i>=0;i-=1){this.tokens[i]=this.tokens[i].replace(/^\s+/gi,"").replace(/>\s+</gi,"><").replace(/\s+$/gi,"");}
output.push(parser.compile.call(this,indent+'    '));return output.join('');};module.exports.ends=true;return module.exports;})();return swig;})();NU.namespace('NU.Config.RoyalSlider.default');NU.Config.RoyalSlider.nuDefault={fullscreen:{enabled:true,nativeFS:false},deeplinking:{enabled:true,prefix:'slider-',change:true},controlNavigation:'none',autoScaleSlider:true,autoScaleSliderWidth:640,autoScaleSliderHeight:360,imageScalePadding:0,loop:false,imageScaleMode:'fit',navigateByClick:true,numImagesToPreload:0,arrowsNav:true,arrowsNavAutoHide:true,arrowsNavHideOnTouch:true,keyboardNavEnabled:true,fadeinLoadedSlide:true,globalCaption:true,globalCaptionInside:false,transitionType:'fade',transitionSpeed:200,thumbs:{fitInViewport:false,appendSpan:true,firstMargin:true,paddingBottom:0}};NU.Config.RoyalSlider.nuDefault=$.extend(NU.Config.RoyalSlider.nuDefault,{imageScaleMode:'fit'});NU.Config.RoyalSlider.dagVanNu=jQuery.extend({},NU.Config.RoyalSlider.nuDefault,{fullscreen:{enabled:false},deeplinking:{enabled:false},imageScaleMode:'fit'});NU.CoreData={init:function(){this.initSwig();this.initBlockRefresher();this.initBlockAjax();this.initResolutionVariables();},initSwig:function(){var filters={numeric:function(value){if(value){return parseInt(value);}else{return 0;}}};var tags={cycle:function(indent){var cOpts=this.args;var cIdx=0;for(var i=0;i<cOpts.length;i++){cOpts[i]=cOpts[i].replace(/^['"](.*)['"]$/,"\$1");}
window.__swig_cycle_get_value=function(){var _ret=cOpts[cIdx++];if(cIdx>=cOpts.length){cIdx=0;}
return _ret;}
window.__swig_cycle_reset=function(){cIdx=0;}
return['','(function () {','		 _output += window.__swig_cycle_get_value();','})();'].join("\n");},verbatim:(function(){module={};module.exports=function(indent,parser){return parser.compile.call(this,indent);};module.exports.ends=true;return module.exports;})(),load:function(){}};if(typeof swig!="undefined"&&swig.init){swig.init({allowErrors:true,cache:true,encoding:'utf8',filters:filters,tags:tags,extensions:{}});NU.log('Loaded swig');}else{NU.log('Skipped loading of swig. Not present or non-compatible version');}},initResolutionVariables:function(){if(typeof defineResolutionVariables!="undefined"){$(window).on('resize',defineResolutionVariables);NU.log('loaded resolution variables');}},initBlockAjax:function(){var blockSelector='.block';var linkSelector='a.ajax';var contentSelector='.block-content > ul';var timesClicked=0;jQuery('.block').on('click',linkSelector,function(e){e.preventDefault();var el=jQuery(this);var block=el.parents(blockSelector);var url=el.data('url');timesClicked++;jQuery.getJSON(url,function(response){if(response){var html=response.html;block.find(contentSelector).each(function(i,el){var ajaxContent=$(contentSelector,html),ajaxButton=$(linkSelector,html).eq(i);$(el).append($(ajaxContent[i]).children('li'));ajaxButton.attr('data-trackeventlabel',ajaxButton.attr('data-trackeventlabel')+timesClicked).click(function(event){NU.TrackEvent.doTrack(this,event);});block.find(linkSelector).eq(i).replaceWith(ajaxButton);block.trigger('block-ajaxappended');});}});});NU.log('loaded ajax blocks');},initBlockRefresher:function(){jQuery('.block').each(function(i,e){var element=jQuery(e);var url=element.data('url');var refresh=parseInt(element.data('refresh'));if(url&&refresh){refresh=Math.max(5,refresh);refresh=refresh*1000;setInterval(function(){jQuery.getJSON(url,function(response){if(response){var html=response.html;element.html(html);element.trigger('blockRefreshed',response);NU.log(['block refreshed',element]);}})},refresh);}});NU.log('loaded block refresher');}};$(function(){NU.CoreData.init();});var stage_debug;NU.CoreUi={init:function(){this.initCrossBrowserStuff();this.initLazyUnveil();this.initRoyalslider('.block.slideshow .royalSlider',NU.Config.RoyalSlider.nuDefault);this.initRoyalslider('.block.highlight .royalSlider',NU.Config.RoyalSlider.dagVanNu);this.initRoyalslider('.block.video .royalSlider',NU.Config.RoyalSlider.rsVideo);this.initSmartBanner();this.initOwlCarousel();this.initTabs('body',jQuery);this.initTabsOnRefresh();this.initMixedTabs();this.initCollapsibles();this.initHashSharing();},init_after_consent:function(){this.initTogglePanes();this.initTogglePaneListeners();this.initSearch();},initResolutionVariables:function(){$(window).on('resize',defineResolutionVariables);NU.log('loaded resolution variables');},initCrossBrowserStuff:function(){function isIE(){return((navigator.appName=='Microsoft Internet Explorer')||((navigator.appName=='Netscape')&&(new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})").exec(navigator.userAgent)!=null)));}
if(isIE()){$('img[src*="svg"]').attr('src',function(){return $(this).attr('src').replace('.svg','.png');});}
NU.log('loaded cross-browser optimizations');},initLazyUnveil:function(){$('.lazy-unveil').unveil(300);jQuery('.block').on('block-reloaded blockRefreshed block-ajaxappended',function(){$(this).find('.lazy-unveil').unveil(300);});NU.log('loaded lazy unveil');},initRoyalslider:function(element,options){var element=element||'.block.slideshow .royalSlider';jQuery(element).each(function(){var imageSlider=jQuery(this),config;if(typeof options==="object"){config=options;}else{config=NU.Config.RoyalSlider.nuDefault;}
if(imageSlider.attr('data-style')){var sliderStyle=imageSlider.attr('data-style');if(NU.Config.RoyalSlider[sliderStyle]){config=NU.Config.RoyalSlider[sliderStyle];}}
var prefix=imageSlider.attr('data-slug');if(prefix){if(prefix.length>40){prefix='slide';}
config.deeplinking.prefix=prefix+'-';}
var imageSliderJQ=imageSlider.royalSlider(config);var sliderInstance=imageSliderJQ.data('royalSlider');if(sliderInstance){var sliderOverflow=imageSliderJQ.find('.rsOverflow');$('<div class="rsActionBar left"><div class="rsActionBarBtn rsSlideCount"></div></div>'+'<div class="rsActionBar right"><div class="rsActionBarBtn rsShareBtn"><span>Deel</span> <i class="icon-share rsActionbarIcn"></i></div>'+'<div class="rsActionBarBtn rsImageOnlyBtn"><i class="fa fa-eye rsActionbarIcn"></i></div>'+'</div>'+'<div class="rsActionBar center"><div class="rsSlideshowTitle"><span>'+imageSliderJQ.data('slideshowtitle')+'</span></div></div>').appendTo(sliderOverflow);var slideCountEl=$('.rsSlideCount',sliderOverflow);var blockContent=$(this).parents('.block-content:first');var shareBtn=blockContent.find('.rsShareBtn');var imageOnlyBtn=blockContent.find('.rsImageOnlyBtn');var closeBtn=blockContent.find('.rsCloseShareOverlayBtn');var fullScreenBtn=blockContent.find('.rsFullscreenBtn');fullScreenBtn.on('click',function(e){blockContent.toggleClass('slideshowIsFullscreen');});$(document).keyup(function(e){e.preventDefault();blockContent.removeClass('slideshowIsFullscreen');});shareBtn.on('click',function(e){e.preventDefault();blockContent.addClass('overlayActive');});imageOnlyBtn.on('click',function(e){e.preventDefault();$('i',imageOnlyBtn).toggleClass('fa-eye').toggleClass('fa-eye-slash');imageSliderJQ.toggleClass('rsImageOnly');setTimeout(function(){sliderInstance.updateSliderSize(true);},10);});closeBtn.on('click',function(e){e.preventDefault();blockContent.removeClass('overlayActive');});function updCount(){slideCountEl.html((sliderInstance.currSlideId+1)+' / '+sliderInstance.numSlides);var slideshow_label='slideshow';if(imageSlider.attr('data-slug'))
slideshow_label+='_'+imageSlider.attr('data-slug');if(typeof ga!="undefined"){if(!sliderInstance.currSlideId==0){ga('send','event',slideshow_label,'showphoto',(sliderInstance.currSlideId+1),{'nonInteraction':1});}}}
sliderInstance.ev.on('rsAfterSlideChange',updCount);updCount();sliderInstance.ev.on('rsEnterFullscreen',function(){NU.log('_trackEvent','slideshow','klik','groter');if(typeof ga!="undefined"){ga('send','event','slideshow','klik','groter',{'nonInteraction':1});}});sliderInstance.ev.on('rsExitFullscreen',function(){NU.log('_trackEvent','slideshow','klik','kleiner');if(typeof ga!="undefined"){ga('send','event','slideshow','klik','kleiner',{'nonInteraction':1});}});sliderInstance.ev.on('rsOnCreateVideoElement',function(e,url){var match=url.match(/^(?:https?:\/\/)?(?:www\.)?([^\/]+)/i);if(match[1]=='media.zie.nl'||match[1]=='embed.kijk.nl'){sliderInstance.videoObj=$('<iframe src="'+url+'" scrolling="no" allowfullscreen></iframe>');}
var videoBlock=imageSliderJQ.parents('.block.video .block-wrapper');if(videoBlock.hasClass('has-related')){if(!videoBlock.hasClass('video-playing')){videoBlock.addClass('video-playing');}}
NU.log('_trackEvent','video','klik','afspelen');if(typeof ga!="undefined"){ga('send','event','video','klik','afspelen',{'nonInteraction':1});}});sliderInstance.ev.on('rsAfterSlideChange',function(event){NU.log('afterSlideChange');if(sliderInstance._isVideoPlaying){sliderInstance.stopVideo();}
window.setTimeout(function(){sliderInstance.playVideo();},200);});}});NU.log('loaded Royalslider');},initSmartBanner:function(){if(jQuery.isFunction(jQuery.smartbanner)){jQuery.smartbanner({title:app_name,author:'Sanoma Media',price:'GRATIS',appStoreLanguage:'nl',inAppStore:'in de App Store',inGooglePlay:'op Google Play',button:'bekijk',scale:'auto',speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,iOSUniversalApp:true,appendToSelector:'.block.smartbanner .block-content'});}
NU.log('loaded smartbanner');},initTabs:function(findInElement,$){$(findInElement).find('.tabs').not('.mixed-tabs').each(function(){var tabContainer=$(this),triggers=tabContainer.find('.tabtrigger ul li'),constrain=tabContainer.data('tab-constrain'),readCookie=!tabContainer.data('cookieless'),blockname=$.trim(tabContainer.closest('.block').attr('class'))||'anonymous',setindex;blockname=blockname.replace(/\s/,'_');var eventname=null;var eventdata=null;triggers.children('a').off('click.tabtrigger').on('click.tabtrigger',function(event){event.preventDefault();var index=$(this).data('tab');eventname=$(this).parents('.tabs').data('eventname');eventdata=$(this).data('eventdata');if(constrain){switchTabs(tabContainer,index);}else{switchTabs('.tabs',index);}
if(readCookie){if(!constrain){$.cookie('tab_index_unconstrained',index,{expires:365,path:'/'});}else if(readCookie){$.cookie('tab_index_'+blockname,index,{expires:365,path:'/'});}}
triggerEvent(eventname,eventdata);});if(readCookie){if(!constrain){setindex=$.cookie('tab_index_unconstrained');}else{setindex=$.cookie('tab_index_'+blockname);}
if(typeof setindex!='undefined'&&setindex!=null){switchTabs(tabContainer,setindex);triggerEvent(eventname,eventdata);}}
if(tabContainer.find('.tab.active').length!=1||(triggers.length>0&&triggers.filter('.active').length!=1)){var index=triggers.eq(0).children('a').data('tab');switchTabs(tabContainer,index);}});function triggerEvent(eventname,eventdata)
{if(eventname&&eventdata){$(document).trigger(eventname,eventdata);}}
function switchTabs(element,index){var unconstrained=(element=='.tabs');$(element).each(function(){var tabContainer=$(this),triggers=tabContainer.find('.tabtrigger ul li'),tabs=tabContainer.find('.tab');if(!tabContainer.data('forced-template')&&!(unconstrained&&tabContainer.data('tab-constrain'))){tabs.filter('.active').removeClass('active');var activeTab=tabs.filter('.tab-'+index).addClass('active');NU.log(activeTab);triggers.filter('.active').removeClass('active');triggers.filter(function(){return $(this).children('a').data("tab")==index;}).addClass('active');}});}
NU.log('loaded the tabs');},initTabsOnRefresh:function(){var core=this;jQuery('.block').on('block-reloaded blockRefreshed',function(){core.initTabs(this,jQuery);});NU.log('loaded tabs on refresh');},initMixedTabs:function(){jQuery('.tabs.mixed-tabs .tabtrigger a').click(function(e){e.preventDefault();var tab=jQuery(this);var parent=tab.parentsUntil('.mixed-tabs').parent();if(parent.data('forced-template')){return;}
var scope=parent;if(!parent.data('tab-constrain')){scope=jQuery('.mixed-tabs').not('[data-tab-constrain]').not('[data-forced-template]');}
var targetTab=tab.data('tab');var targetCls=tab.data('tab-class');var otherCls=[];parent.find('.tabtrigger a[data-tab-class]').not(tab).each(function(){otherCls.push(jQuery(this).data('tab-class'));});var newTabs=scope.find('.tabtrigger a[data-tab="'+targetTab+'"]');if(targetCls){newTabs=scope.find('.tabtrigger a[data-tab="'+targetTab+'"][data-tab-class="'+targetCls+'"]');}
var otherTabs=scope.find('.tabtrigger a').not(newTabs);newTabs.parent().addClass('active');otherTabs.parent().removeClass('active');scope.find('.tab.tab-'+targetTab).each(function(){var parent=jQuery(this).parent();if(parent.data('forced-template')){return;}
parent.find('.tab').not(jQuery(this)).removeClass('active');jQuery(this).addClass('active');if(targetCls){for(var i in otherCls){jQuery(this).removeClass(otherCls[i]);}
jQuery(this).addClass(targetCls);}});$.cookie('mixed_tabs_mode',targetTab+':'+targetCls,{expires:356,path:'/'});});if(jQuery.cookie('mixed_tabs_mode')){var parts=jQuery.cookie('mixed_tabs_mode').split(':');if(parts[1]){jQuery('body .mixed-tabs .tabtrigger a[data-tab="'+parts[0]+'"][data-tab-class="'+parts[1]+'"]').click();}else{jQuery('body .mixed-tabs .tabtrigger a[data-tab="'+parts[0]+'"]').click();}}
NU.log('loaded mixed tabs');},initTogglePanes:function(){jQuery('body').on('click','.panetrigger',function(e){e.preventDefault();var trigger=jQuery(this),toggleId=trigger.data('toggle-id');if(toggleId){$(".togglepanes[data-toggle-id='"+toggleId+"']").toggleClass('flipped').trigger('togglepaneToggle');}else{trigger.closest('.togglepanes').toggleClass('flipped').trigger('togglepaneToggle');}});NU.log('loaded togglepanes');},initTogglePaneListeners:function(){$('.togglepanes.hasiframe').on('togglepaneToggle',function(){NU.log('togglepane toggled',this);var iframe=$(this).find('iframe'),source=iframe.data("src");if(source){iframe.attr("src",source);}
NU.log('Iframe loaded');});if($(window).width()>=992){$('.infographic-wrapper .togglepanes .panetrigger').click();}},initCollapsibles:function(){jQuery('body').on('click','.collapsible .block-title',function(e){e.preventDefault();var currentBlock=jQuery(this).parentsUntil('.block').parent();var currentBlockContent=currentBlock.find('.block-wrapper');$(currentBlockContent).toggleClass('collapsed');});jQuery('body').on('click','.collapsible .collapse-trigger',function(e){e.preventDefault();var currentBlock=jQuery(this).parentsUntil('.collapsible').parent();$(currentBlock).toggleClass('collapsed');});jQuery('body').on('click','.card.collapsible .card-content',function(e){e.preventDefault();var currentBlock=jQuery(this).parentsUntil('.card').parent();var currentBlockContent=currentBlock.find('.card-wrapper');$(currentBlockContent).toggleClass('collapsed');});NU.log('loaded collapsibles');},initHashSharing:function(){jQuery('.social-buttons a').on('click',function(){var hash=window.location.hash;if(hash){var href;var new_hash=hash.replace('#','%23');var original_href=jQuery(this).data('original_href');if(!original_href){original_href=jQuery(this).attr('href');jQuery(this).data('original_href',original_href);}
href=original_href.replace('.html','.html'+new_hash);jQuery(this).attr('href',href);}});NU.log('loaded hash-sharing');},initOwlCarousel:function(){jQuery('.carousel').has('.owl-carousel').each(function(){var elm=jQuery(this);var slider=elm.find('.owl-carousel').owlCarousel({items:1,singleItem:true,autoPlay:false,pagination:false,stopOnHover:true,lazyLoad:true});elm.find('.prev').click(function(){var slider=elm.data('slider');if(slider){slider.trigger('owl.prev');}});elm.find('.next').click(function(){var slider=elm.data('slider');if(slider){slider.trigger('owl.next');}});elm.data('slider',slider);});NU.log('loaded owl carousel');},initSearch:function(){jQuery('.search-box-molecule').each(function(){var elm=jQuery(this);elm.find('.search-button').click(function(){elm.toggleClass('closed');});elm.find('button[type="submit"]').click(function(event){if(elm.find('.search-input input').val()==''){event.preventDefault();elm.addClass('active');elm.find('.search-input input')[0].focus();}});elm.find('.search-input input').focus(function(){elm.addClass('active');elm.addClass('expanded');}).blur(function(){elm.removeClass('active');if(jQuery(this).val()==''){elm.removeClass('expanded');}}).change(function(){var value=jQuery(this).val();if(value.substr(0,1)==':'){value=value.substr(1);}else{return;}
var eggs=['comicsans','flipped','downunder','sudo'];var body=jQuery('body');if(eggs.indexOf(value)>=0){body.addClass('tricks').addClass(value);}
else if(value=='reset'){for(var i=0;i<eggs.length;i++){body.removeClass(eggs[i]);}}});});}};$('document').ready(function(){NU.CoreUi.init();});ConsentUtility.consent_ready(function(){NU.CoreUi.init_after_consent();});if(typeof console=="undefined"){var console={log:function(message){},error:function(message){}};}
if(typeof window.hasOwnProperty=="undefined"){window.hasOwnProperty=function(obj){return(this[obj])?true:false;}}
var _gaq=_gaq||[],NU=NU||{},stage_debug=false,stage_tracking=true,app_stage=app_stage||"unknown";switch(app_stage){case'styleguide':stage_debug=true;stage_tracking=false;break;case'dev':stage_debug=true;stage_tracking=false;break;case'production':default:stage_debug=false;stage_tracking=true;break;}
NU.namespace=function(str,root){var chunks=str.split('.');if(!root)
root=window;var current=root;for(var i=0;i<chunks.length;i++){if(!current.hasOwnProperty(chunks[i]))
current[chunks[i]]={};current=current[chunks[i]];}
return current;};NU.logHistory=[];NU._log=function(type,arguments){var now=new Date();var timestamp=now.getHours()+":"+now.getMinutes()+":"+now.getSeconds();var args=Array.prototype.slice.call(arguments);args.unshift(timestamp.toString());if(stage_debug&&window.console){if(type=='error'){console.error.apply(console,args);}else{try{console[type].call(console,args);}
catch(e){try{console[type](console,args);}
catch(f){}}}}
args.unshift(type);this.logHistory.push(args);};NU.log=function(){NU._log('log',arguments);};NU.error=function(){NU._log('error',arguments);};NU.replayHistory=function(){if(window.console){var log=this.logHistory.splice(0,this.logHistory.length);for(var i=0,m=log.length;i<m;i++){var type=log[i].shift();if(type=='error'){console.error.apply(console,log[i]);}else{try{console[type].call(console,log[i]);}
catch(e){try{console[type](console,log[i]);}
catch(f){}}}}
return m;}};NU.BlockManager={registered:{},init:function(){$.each(this.registered,function(namespace,callback){jQuery('.block.'+namespace).each(function(i,block){NU.log('Block initialize',namespace,$(block).attr('id'));try{new callback($(block));}catch(e){NU.error(namespace,$(block).attr('id'),e.stack);}});});},register:function(namespace,callback){this.registered[namespace]=callback;}}
NU.BlockStore={};NU.Block=Class.extend({container:null,_currentAjaxRequests:[],defaultConfig:{cssClasses:{hide:'dispnone'},wrapper:{selector:'.block-wrapper'}},config:{},init:function(container){if(!container){throw'Block initialization needs a html container attached';}
this.container=container;this.setData('block',this);this.initConfig();this.initialize();},initialize:function(){},initConfig:function(){this.config=jQuery.extend(true,{},this.defaultConfig,this.config)},log:function(){var args=Array.prototype.slice.call(arguments);args.unshift(this.getData('id'));args.unshift(this.getData('type'));NU.log.apply(this,args)},error:function(){var args=Array.prototype.slice.call(arguments);args.unshift(this.getData('id'));args.unshift(this.getData('type'));NU.error.apply(this,args);},getData:function(key){if(!key){return this.error('getData: no key given')}else{var data=this.container.data(key);if(data){return JSON.parse(JSON.stringify(data));}}},setData:function(key,value){return this.container.data(key,value);},getId:function(){return this.getData('id');},getContext:function(key){if(key){var context=this.getData('context')[key];}else{var context=this.getData('context');}
context=this.filterContext(context);return context;},filterContext:function(context){return context;},setContext:function(data,key){if(key){var context=this.getContext();context[key]=data;return this.setData('context',context);}else{return this.setData('context',data);}},reloadBlock:function(){var self=this;var url=this.container.data('url');if(!url){throw'Called reload, but no url found within the container element';}
self.log('Reloading block');jQuery.getJSON(url,function(response){if(response.html){self.container.html(response.html);}
if(response.data){self.container.data(response.data)}
self.trigger('block-reloaded');self.log(['Block reloaded',self.container]);self.initialize();self.log('initialize called');});},trigger:function(){var args=Array.prototype.slice.call(arguments);this.container.trigger.apply(this.container,args);},bind:function(eventtype,callback){var self=this;this.container.bind(eventtype,function(){var args=Array.prototype.slice.call(arguments);callback.apply(self,args)});},getTemplate:function(selector){if(typeof selector==="string"){selector=this.container.find(selector);}
var source=selector.html();return swig.compile(source);},renderTemplate:function(selector,context){try{var tpl=this.getTemplate(selector);var html=tpl(context);return html;}catch(err){this.error(err.message);}},sortDictByKey:function(dict,key){var newList=[];for(var i in dict){if(dict.hasOwnProperty(i)){newList.push(dict[i]);}}
newList.sort(function(a,b){if(a[key]>b[key]){return 1}
if(a[key]<b[key]){return-1}
return 0;});return newList;},sortDictByKeyReversed:function(dict,key){var newList=this.sortDictByKey(dict,key);newList.reverse();return newList},ajax:function(options){var self=this;var callbackStorage=NU.namespace('NU.BlockStore.ajax.callbacks');if(!callbackStorage[options.url]){callbackStorage[options.url]={}}
var current=callbackStorage[options.url];jQuery.extend(true,current,jQuery.extend({running:false,callbacks:[]},current));current.callbacks.push(options);if(!current.running){current.running=true;jQuery.ajax({url:options.url,dataType:options.dataType||'jsonp',complete:function(){current.running=false;current.callbacks=[];},success:function(json){jQuery.each(current.callbacks,function(url,options){options.success(JSON.parse(JSON.stringify(json)));});},error:function(e,status,error){jQuery.each(callbackStorage,function(options){options.error(e,status,error);});}});}},hideBlock:function(){this.container.find(this.config.wrapper.selector).addClass(this.config.cssClasses.hide);},showBlock:function(){this.container.find(this.config.wrapper.selector).removeClass(this.config.cssClasses.hide);},filterDataByKey:function(data,key,filter){var filtered=[];jQuery.each(data,function(i,row){if(filter.indexOf(row[key])>=0){filtered[filtered.length]=row;}});return filtered;}});jQuery(function(){NU.BlockManager.init();});var render_consent_social=function(elm){jQuery(elm).find('.apply-hover').bind('mouseover',function(){jQuery(this).addClass('hover')});jQuery(elm).find('.apply-hover').bind('mouseout',function(){jQuery(this).removeClass('hover')});jQuery(elm).find('.apply-dialog').bind('click',function(e){e.preventDefault();e.stopPropagation();ConsentUtility.redirect_to_dialog_url();});};ConsentUtility.add_post_render_callback(render_consent_social);(function(){"use strict";var ignore_urls="google.com googleadservices.com";function addEvent(element,type,handler)
{if(element.addEventListener)
{element.addEventListener(type,handler,false);}
else
{if(!handler.$$guid)handler.$$guid=addEvent.guid++;if(!element.events)element.events={};var handlers=element.events[type];if(!handlers)
{handlers=element.events[type]={};if(element["on"+type])
{handlers[0]=element["on"+type];}}
handlers[handler.$$guid]=handler;element["on"+type]=handleEvent;}}
addEvent.guid=1;function handleEvent(event)
{var returnValue=true;event=event||fixEvent(((this.ownerDocument||this.document||this).parentWindow||window).event);var handlers=this.events[event.type];for(var i in handlers)
{this.$$handleEvent=handlers[i];if(this.$$handleEvent(event)===false)
{returnValue=false;}}
return returnValue;}
function fixEvent(event)
{event.preventDefault=fixEvent.preventDefault;event.stopPropagation=fixEvent.stopPropagation;return event;}
fixEvent.preventDefault=function()
{this.returnValue=false;}
fixEvent.stopPropagation=function()
{this.cancelBubble=true;}
var domain=document.domain+"";ignore_urls=domain+" "+ignore_urls;domain=domain.replace(/.+\.([\w\-]+\.[a-z]+)$/i,"$1");ignore_urls=domain+" "+ignore_urls;ignore_urls=ignore_urls.replace(/^\s+/,'').replace(/\s+$/,'');ignore_urls=ignore_urls.split(" ");function notLinkToOwnDomain(txt)
{for(var i=0;i<ignore_urls.length;i++)
{if(txt.indexOf(ignore_urls[i])>-1){return false;}}
return true;}
var elm=document.getElementsByTagName("a");for(var i=0;i<elm.length;i++)
{var path=elm[i].href+"";if(path==""){continue;}
if((notLinkToOwnDomain(path)&&path.indexOf("javascript:")==-1)||elm[i].rel.indexOf("clickout")>-1||path.indexOf("#clickout")>-1)
{addEvent(elm[i],'click',function(){var h=(this.href).replace(/^https?:\/\//,'');if(typeof ga=='function'&&typeof _gaq=='undefined')
{ga('send','event','default','clickout',h,0);}
else if(typeof _gaq=='object')
{_gaq.push(['_trackEvent','default','clickout',h,0]);}});}}}());var _ga=_ga||{};_ga.trackSocial=function(opt_pageUrl,opt_trackerName){_ga.trackFacebook(opt_pageUrl,opt_trackerName);_ga.trackTwitter(opt_pageUrl,opt_trackerName);};_ga.trackFacebook=function(opt_pageUrl,opt_trackerName){var trackerName=_ga.buildTrackerName_(opt_trackerName);try{if(FB&&FB.Event&&FB.Event.subscribe){FB.Event.subscribe('edge.create',function(targetUrl){ga('send','social','facebook','like',targetUrl,opt_pageUrl);});FB.Event.subscribe('edge.remove',function(targetUrl){ga('send','social','facebook','unlike',targetUrl,opt_pageUrl);});FB.Event.subscribe('message.send',function(targetUrl){ga('send','social','facebook','send',targetUrl,opt_pageUrl);});}}catch(e){}};_ga.buildTrackerName_=function(opt_trackerName){return opt_trackerName?opt_trackerName+'.':'';};_ga.trackTwitter=function(opt_pageUrl,opt_trackerName){var trackerName=_ga.buildTrackerName_(opt_trackerName);try{if(twttr&&twttr.events&&twttr.events.bind){twttr.events.bind('tweet',function(event){if(event){var targetUrl;if(event.target&&event.target.nodeName=='IFRAME'){targetUrl=_ga.extractParamFromUri_(event.target.src,'url');}
ga('send','social','twitter','tweet',targetUrl,opt_pageUrl);}});}}catch(e){}};_ga.extractParamFromUri_=function(uri,paramName){if(!uri){return;}
var uri=uri.split('#')[0];var parts=uri.split('?');if(parts.length==1){return;}
var query=decodeURI(parts[1]);paramName+='=';var params=query.split('&');for(var i=0,param;param=params[i];++i){if(param.indexOf(paramName)===0){return unescape(param.split('=')[1]);}}
return;};_ga.trackSocial();(function($){var inviewObjects={},viewportSize,viewportOffset,d=document,w=window,documentElement=d.documentElement,expando=$.expando,t;$.event.special.inview={add:function(data){inviewObjects[data.guid+"-"+this[expando]]={data:data,$element:$(this)};},remove:function(data){try{delete inviewObjects[data.guid+"-"+this[expando]];}catch(e){}}};function getViewportSize(){var mode,domObject,size={height:w.innerHeight,width:w.innerWidth};if(!size.height){mode=d.compatMode;if(mode||!$.support.boxModel){domObject=mode==='CSS1Compat'?documentElement:d.body;size={height:domObject.clientHeight,width:domObject.clientWidth};}}
return size;}
function getViewportOffset(){return{top:w.pageYOffset||documentElement.scrollTop||d.body.scrollTop,left:w.pageXOffset||documentElement.scrollLeft||d.body.scrollLeft};}
function checkInView(){var $elements=$(),elementsLength,i=0;$.each(inviewObjects,function(i,inviewObject){var selector=inviewObject.data.selector,$element=inviewObject.$element;$elements=$elements.add(selector?$element.find(selector):$element);});elementsLength=$elements.length;if(elementsLength){viewportSize=viewportSize||getViewportSize();viewportOffset=viewportOffset||getViewportOffset();for(;i<elementsLength;i++){if(!$.contains(documentElement,$elements[i])){continue;}
var element=$elements[i],$element=$(element),elementSize={height:$element.height(),width:$element.width()},elementOffset=$element.offset(),inView=$element.data('inview'),visiblePartX,visiblePartY,visiblePartsMerged;if(!viewportOffset||!viewportSize){return;}
if(element.offsetWidth>0&&element.offsetHeight>0&&element.style.display!="none"&&elementOffset.top+elementSize.height>viewportOffset.top&&elementOffset.top<viewportOffset.top+viewportSize.height&&elementOffset.left+elementSize.width>viewportOffset.left&&elementOffset.left<viewportOffset.left+viewportSize.width){visiblePartX=(viewportOffset.left>elementOffset.left?'right':(viewportOffset.left+viewportSize.width)<(elementOffset.left+elementSize.width)?'left':'both');visiblePartY=(viewportOffset.top>elementOffset.top?'bottom':(viewportOffset.top+viewportSize.height)<(elementOffset.top+elementSize.height)?'top':'both');visiblePartsMerged=visiblePartX+"-"+visiblePartY;if(!inView||inView!==visiblePartsMerged){$element.data('inview',visiblePartsMerged).trigger('inview',[true,visiblePartX,visiblePartY]);}}else if(inView){$element.data('inview',false).trigger('inview',[false]);}}}}
$(w).bind("scroll resize",function(){viewportSize=viewportOffset=null;clearTimeout(t);t=setTimeout(function(){checkInView();},200);});if(!documentElement.addEventListener&&documentElement.attachEvent){documentElement.attachEvent("onfocusin",function(){viewportOffset=null;});}})(jQuery);var NU=NU||{};$(function(){var scrollPosition=0,body=$('body'),_excluded_domains=["nu.nl","google.com","googleadservices.com",window.location.hostname];body.on('click.trackevent','.trackevent',function(event){NU.TrackEvent.doTrack(this,event);NU.TrackEvent.doSacTrack(this,event);});body.on('click.trackevent','.tracksocial',function(event){var network=NU.TrackSocial.GetCurrentNetwork(this);var action=NU.TrackSocial.GetCurrentAction(this);var target=NU.TrackSocial.GetCurrentTarget(this);NU.log('_trackSocial',network,action,target);ga('send','social',network,action,target);});body.on('click.trackevent','a',function(event){var element=$(this);if(element.is('.trackevent, .tracksocial, .spklw-post-link')){return true;}
if(jQuery.inArray($(this)[0].hostname,_excluded_domains)>-1||jQuery.inArray('www.'+$(this)[0].hostname,_excluded_domains)>-1){NU.log('IGNORED: _trackevent to external link ignored due to blacklist')}else if($(this)[0].hostname){var trackeventlabel=$(this).data('trackeventlabel')||"external_link_"+$.trim($(this).text());$(this).data('trackeventlabel',trackeventlabel);NU.TrackEvent.doTrack(this,event);}});$('.overlay').on('show.overlay',function(){NU.TrackEvent.VirtualPageTrack('/videopopup/'+$('.overlay').find('.overlay-title').text());});$('.trackview').one('inview',function(event,isVisible){if(isVisible){var category=NU.TrackEvent.GetCurrentCategory(this);var label=NU.TrackEvent.GetLabel(this,'scroll',event);NU.log('_trackEvent',category,'scroll',label,{'nonInteraction':1});ga('send','event',category,'scroll',label,{'nonInteraction':1});}});if(window.location.pathname=='/'){$('.zone[data-zone="main"]').find('.block.articlelist, .block.filelist, .block.videolist').one('inview',function(event,isVisible){if(isVisible){var label=$.trim($(this).find('.block-title h2').text())||"algemeen";NU.log('_trackEvent','homepage','scroll',label,{'nonInteraction':1});ga('send','event','homepage','scroll',label,{'nonInteraction':1});}});}
if(typeof SANOMASEARCH==="object"){if(window.location.search.length>0&&/^\/(search|zoeken)$/i.test(window.location.pathname)){var query=/(?:\?|&)q=(.+?)(?:&|$)/gi.exec(window.location.search),page=/(?:\?|&)page=(.+?)(?:&|$)/gi.exec(window.location.search);query=query?query[1]:"";page=page?parseInt(page[1],10):1;NU.log('_trackevent','searchpage','search',query,page,{'nonInteraction':1});ga('send','event','searchpage','search',query,page,{'nonInteraction':1});$(window).load(function(event){SANOMASEARCH.events.subscribe("search",function(event,info){NU.log('_trackEvent','searchpage','search',info.query,info.page,{'nonInteraction':1});ga('send','event','searchpage','search',info.query,info.page,{'nonInteraction':1});});});}}});NU.TrackSocial={GetCurrentNetwork:function(element){var network=$(element).data('tracksocialnetwork');if(network){return network;}
return'';},GetCurrentAction:function(element){var action=$(element).data('tracksocialaction');if(action){return action;}
return'';},GetCurrentTarget:function(element){var action=$(element).data('tracksocialtarget');if(action){return action;}
return'';}};NU.TrackEvent={GetCurrentAction:function(element){var action=$(element).data('trackeventaction');if(action){return action;}
var zone=$(element).parents('.zone').data('zone');if(zone==null){zone="id:"+$(element).parents('*[id]:first').attr('id');}
var block=$(element).parents('.block[data-type]:first');if(block.length==0){return zone;}
var blockposition=block.data('position');var block_type=block.data('type');return zone+'_'+block_type+'_'+blockposition;},GetCurrentCategory:function(element){var category=$(element).data('trackeventcategory');if(category)
return category;var pagetype=$('body').data('pagetype');if(pagetype){var section=$('body').data('section');if(section){return pagetype+'-'+section;}
return pagetype;}
return'home';},GetLabel:function(element,action,event){var blocklabel='';var block=$(element).parents('.block[data-type]:first');if(block.length>0){var block_type=block.data('type');blocklabel=block_type;if(block_type=='html'){var url=$(event.target).attr('href');if(typeof url=='undefined'){var innerlink=$(event.target).parents('a[href]:first');if(!innerlink.hasClass('trackevent')){url=innerlink.attr('href');}}
if(url){blocklabel+=+'_'+url.replace("'","");}}else{var links=block.find('.trackevent:visible');var index=0;jQuery.each(links,function(i,el){if(el==element){index=i;return false;}});blocklabel+='_'+(index+1);}}
var custom_label=$(element).data('trackeventlabel');if(custom_label==null||custom_label==''){custom_label=$(element).attr('href')||$(element).attr('title');}
if(custom_label){custom_label=custom_label.replace("'","");}
if(blocklabel){return blocklabel+(custom_label?'_'+custom_label:'');}
return custom_label;},GetSelector:function(element){var parent=$(element).closest('[data-sac-marker]'),index=$('a',parent).index(element),selector="[data-sac-marker='"+parent.data('sac-marker')+"']";if(index>0){return selector+" a:eq("+index+")";}
return selector;},doSacTrack:function(element,event){var trackObject={targetPage:$(element).attr('href'),selector:this.GetSelector(element),text:$.trim($(element).find('.title').text())||$.trim($(element).text()),custom_label:$(element).data('trackeventlabel'),currentPage:window.location.href,timestamp:new Date()};if(typeof sat==='object'&&typeof sat.event==='function'){sat.event(event.type,trackObject);NU.log('sat.event',trackObject);}else{NU.log('FAILED (sat unavailable): sat.event',trackObject);}},doTrack:function(element,event,category,action,label){category=category||this.GetCurrentCategory(element);action=action||this.GetCurrentAction(element);label=label||this.GetLabel(element,action,event);NU.log('_trackEvent',category,action,label);ga('send','event',category,action,label);},VirtualPageTrack:function(path){NU.log('_trackPageview',path);ga('send','pageview',path);},AddToABtestGroup:function(value){NU.log('_adding user to test group in GA',value);ga('set','dimension4',value);ga('send','event','ab-test',value,0,{'nonInteraction':1});}};NU.VideoUtilities={init:function(){var self=this;self.bind('.video-link');$('body').on('click keydown','.spklw-post-link',function(event){if(event.type=='keydown'&&!(event.which==13||event.which==32)){return true;}
var video=self.createZieVideoFromAnchor(this);NU.TrackEvent.doTrack('','','video','opened from related',video.title);if(video){video.play();event.preventDefault();$(this).blur();}});},bind:function(element){if(!element){return false;}
$('body').on('click keydown',element,function(event){var item=$(this),embedCode,thumbnail_media_id,type,id,kijk_options,video;if(event.type=='keydown'&&!(event.which==13||event.which==32)){return true;}
if(item.data('video')){item.data('video').play();item.blur();event.preventDefault();return;}
type=item.data('type');id=item.data('video_id');embedCode=item.data('encodedEmbedCode');if((!type&&!id)&&!embedCode){return true;}
thumbnail_media_id=item.find('img').data('src')||"";thumbnail_media_id=thumbnail_media_id.match(/^https?:\/\/media\.nu\.nl\/m\/([^_]*)_wd\d{3,4}\.jpe?g/i);thumbnail_media_id=thumbnail_media_id&&thumbnail_media_id.length>1?thumbnail_media_id[1]:"";kijk_options=item.data('kijkOptions');if(id&&type){var video_opts={title:item.data('title'),video_id:id,thumbnail_media_id:thumbnail_media_id,related_playlist_slug:item.data('related_playlist_slug'),private:item.is('.private'),url:item.attr('href'),type:type,account_page_slug:item.data('account_page_slug'),id:item.data('id')};if(type=='kijk'&&kijk_options){video_opts['kijk_options']=kijk_options;}
video=new NU.Video(video_opts);}else{video=new NU.Video({title:item.data('title'),embedcode:atob(embedCode),thumbnail_media_id:thumbnail_media_id,related_playlist_slug:item.data('related_playlist_slug'),private:item.is('.private'),url:item.attr('href'),type:type,account_page_slug:item.data('account_page_slug'),id:item.data('id')});}
item.data('video',video);video.play();event.preventDefault();item.blur();});},createZieVideoFromAnchor:function(a){var id,regex=/^https?:\/\/(www\.)?zie\.nl\/video\/[^\/]+\/[^\/]+\//i;a=$(a);if(!regex.test(a.attr('href'))){return false;}
id=a.attr('href').replace(regex,'').replace(/\?.*$/i,'').replace(/#$/i,'');return new NU.Video({title:a.find('.spklw-post-title').text()||a.text(),video_id:id,url:a.attr('href'),type:'zie'});},parseVideoResults:function(json){var data=json['results']&&json['results'].length>0?json['results'][0]:json,videos=[],merge_objects=function(object1,object2){var result={};for(var attr in object1){result[attr]=object1[attr];}
for(var attr in object2){result[attr]=object2[attr];}
return result;};data.title=data.title||'';if('undefined'!==typeof data.videos){for(var i=0,max=data.videos.length;i<max;i++){videos.push(new NU.Video(data.videos[i]));}}else{if('string'===typeof data[0]['map_video_object']){for(var i=0,max=data.length;i<max;i++){try{videos.push(new NU.Video(merge_objects(data[i],JSON.parse(data[i]['map_video_object']))));}catch(e){}}}else{for(var i=0,max=data.length;i<max;i++){videos.push(new NU.Video(data.videos[i]));}}}
return{title:data.title,videos:videos};},sortVisitedVideos:function(videos){var unvisited_videos=[],visited_videos=[],v;for(var i=0,max=videos.length;i<max;i++){v=videos[i];if(NU.videoService.isVideoPlayed(v)){visited_videos.push(v);}else{unvisited_videos.push(v);}}
return unvisited_videos.concat(visited_videos);}};$(function(){NU.VideoUtilities.init();});NU.Video=function(video_properties){var self=this,_related_playlist_slug;self.play=function(){var sprinkle_url=sprinkle_url||"",consent_granted=ConsentUtility.has_all_optins();consent_granted=consent_granted&&consent_granted[0];if(!consent_granted){NU.log('Video: no consent.',self);try{ConsentUtility.redirect_to_dialog_url();}catch(e){alert('Videos kunnen niet worden afgespeeld met uw huidige cookie voorkeuren.');}
return false;}
if(self.private&&!$('body').is('.isloggedin')){NU.log('Video: not loggedin for private video.',self);self.getRelatedItems();if(NU.videoOverlay.isVisible()){NU.videoOverlay.isVisible(false);}
$('body').one('NU.account.login',function(event){self.play();});NU.account.interactions.login(self.account_page_slug);return false;}
NU.log('Video: play.',self);NU.videoOverlay.isLoading(true);NU.videoOverlay.startPlayback(self);};self.getRelatedItems=function(callback){if(!_related_playlist_slug||(self.related_videos&&self.related_videos.length>0)){if(typeof callback==='function'){callback.apply(self);}}else{var url='/api/playlists/slug/'+_related_playlist_slug;$.getJSON(url,function(data){data=NU.VideoUtilities.parseVideoResults(data);self.related_videos=NU.VideoUtilities.sortVisitedVideos(data.videos);}).always(function(){if(typeof callback==='function'){callback.apply(self);}});}};self.get_thumbnail=function(){return self.thumbnail_url;};(function(a){var iframe_attributes={allowfullscreen:true,scrolling:'no',frameBorder:0,seamless:true},video_urls={zie:'http://media.zie.nl/e/?v={0}&autoplay=1',kijk:'http://embed.kijk.nl/?video={0}&autoplay=1&consent=true',youtube:'http://www.youtube.com/embed/{0}?wmode=opaque&autoplay=true'},thumbnail_urls={zie:'http://media.zie.nl/m/{0}_pm.jpg',youtube:'https://i.ytimg.com/vi/{0}/mqdefault.jpg',placeholder:'/static/img/placeholders/wd640-p.jpg'};if(typeof a==='string'){self.embedcode=a;self.title='';return self;}
if(typeof a!=='object'){return false;}
if(a.video_id){self.video_id=a.video_id}else if(a.video_media_id){self.video_id=a.video_media_id;}
switch(a.type){case"embed":case"source":self.embedcode=$(a.embedcode);break;case"zie":case"kijk":case"youtube":iframe_attributes.src=video_urls[a.type].replace('{0}',self.video_id);if(a.kijk_options){iframe_attributes.src+=a.kijk_options;}
self.embedcode=$('<iframe></iframe>').attr(iframe_attributes);break;}
if(a.thumbnail_media_id){self.thumbnail_url='http://media.nu.nl/m/'+a.thumbnail_media_id+'_wd640.jpg/'}else{switch(a.type){case"zie":case"youtube":self.thumbnail_url=thumbnail_urls[a.type].replace('{0}',self.video_id);break;default:self.thumbnail_url=thumbnail_urls['placeholder'];}}
if(a.related_playlist_slug){_related_playlist_slug=a.related_playlist_slug}
if(a.title){self.title=a.title}
if(a.type){self.type=a.type}
if(a.video_url){self.url=a.video_url}
if(a.id){self.id=a.id}else if(a.objectid){self.id=a.objectid;}
if(a.branded){self.branded=a.branded;}else{self.branded=false;}
self.private=a.private;self.account_page_slug=self.private?a.account_page_slug:"";}(video_properties))};NU.videoService=new function(){var self=this,_delay=30000,_timer,_video_history_store=new StorageAdapter('NU.Video.history','local',{'ttl':'4w'}),_video_history=_video_history_store()||[];self.isVideoPlayed=function(video){var type=video.type||"unkown",video_id=video.video_id||"",embedcode=video.embedcode||"";for(var i=0,m=_video_history.length;i<m;i++){if(type==_video_history[i].type&&video_id==_video_history[i].video_id&&_isHTMLmatching(embedcode,_video_history[i].embedcode)){return true;}}
return false;};self.videoPlayStarted=function(video){window.clearTimeout(_timer);_timer=window.setTimeout(function(){_addVideoToHistory(video);},_delay);};self.videoPlayEnded=function(){window.clearTimeout(_timer);};var _addVideoToHistory=function(video){var lightweight_video={type:video.type||"unknown",video_id:video.video_id||"",embedcode:video.embedcode[0].outerHTML||""};_video_history.unshift(lightweight_video);_video_history=_video_history.slice(0,50);_video_history_store(_video_history);};var _isHTMLmatching=function(){var is_unique=true,elements=arguments;for(var i=1,m=elements.length;i<m;i++){is_unique=is_unique&&!($(elements[i]).is(elements[0]));}
return is_unique;}};var NU=NU||{};NU.Overlay=function(overlayName){var self=this,_body=$('body'),_overlay={outer:$('.overlay'),inner:$('.overlay .overlay-content'),adspot:$('#overlay_leaderboard_adspot'),title:$('.overlay .overlay-title')},_title,_content,_isActive=false,_loading=false,_hide;overlayName=overlayName||"";self.listening_element=_overlay.outer;_overlay.outer.find('.overlay-close').on('click keydown',function(event){if(event.type=='keydown'&&!(event.which==13||event.which==32)){return true;}
self.hide();});$(window).one('keydown.overlay',function(event){if(event.which==27&&_isActive){self.hide();}
ga('send','event',overlayName,'close popup','esc');});self.show=function(){_isActive=true;_body.addClass('overlay-active');self.listening_element.trigger('show.overlay');};self.hide=function(prevent_trigger){_hide();self.listening_element.trigger('hide.overlay');};_hide=function(){_isActive=false;_body.removeClass('overlay-active');_overlay.inner.contents().remove();_overlay.adspot.empty();};self.showLoader=function(){_hide();_isLoading=true;_body.addClass('overlay-loading');self.listening_element.trigger('loading.overlay');};self.hideLoader=function(){_isLoading=false;_body.removeClass('overlay-loading');self.listening_element.trigger('loading_complete.overlay');};self._directAccessToDOM=function(){return _overlay.inner;};self.getTitle=function(){return _title;};self.setTitle=function(newTitle){_title=newTitle;_overlay.title.empty().append(newTitle);};self.getContent=function(){return _content;};self.setContent=function(newContent){_content=newContent;_overlay.inner.empty().append(newContent);};self.isVisible=function(visibility){if(arguments.length!=1){return _isActive}
if(!!visibility){self.show();}else{self.hide();}
return _isActive;};self.isLoading=function(loading){if(arguments.length!=1){return _loading;}
if(!!loading){self.showLoader();}else{self.hideLoader();}
return _loading;};return self;};NU.videoOverlay=new function(){var self=this,_relatedItemsSource=(function(o){var options=[];for(var i=0,m=o.length;i<m;i++){if('undefined'!==typeof o[i]['url']&&(/^(https?:)?\/\//i).test(o[i]['url'])){options.push(o[i])}}
if(options.length==1){return options[0];}else if(options.length>1){return(new AbTest('videoOverlay.relatedItemsSource_2',options)).get();}
return{slug:'',url:''};})(NU.relatedVideoProviders),_mediatool_base_url=mediatool_base_url||"",_content={title:"",embedcode:"",video:{},recommended_videos:[],recommended_videos_title:"Aanbevolen videos"},_wrappers={outer:'<div class="video_combination"></div>',video:'<div class="player"></div>',recommended:'<div class="video_recommended"><div class="inner"><h3></h3><div class="videos"></div></div></div>',related:'<div class="video_related">'+'<div class="inner">'+'<div class="videos"></div>'+'<a href="#" class="video_control to_left"><span>&lt;</span></a>'+'<a href="#" class="video_control to_right"><span>&gt;</span></a>'+'</div>'+'</div>',related_sprinkle:'<div data-spklw-widget="widget-55f9561041f3a" style="margin-top: 5px;"></div>'+'<script src="'+_relatedItemsSource['url']+'" data-spklw-automatic-initialization async></script>'},_templates={video_item:'<a class="media-wrapper trackevent video-link" data-trackeventcategory="video">'+'<div class="media">'+'<img src="" draggable="false">'+'<div class="media-icon"></div>'+'</div>'+'<div class="media-footer">'+'<span class="title"></span>'+'<span class="branded-notice">'+'<span class="branded-name-short"></span>'+'</span>'+'<div class="branded-logo"><img src="" draggable="false"></div>'+'</div>'+'</a>'},videoOverlay=new NU.Overlay('videopopup');_insertContent=function(){var content=$(_wrappers.outer).toggleClass('recommended_enabled',(!!_content.recommended_videos&&_content.recommended_videos.length>0)).toggleClass('related_enabled',(!!_content.video.related_videos&&_content.video.related_videos.length>0)).append((function(){if(_relatedItemsSource['slug']=='plista'){return[$(_wrappers.video).append(_content.embedcode),_renderRecommendedItems()];}
return[$(_wrappers.video).append(_content.embedcode),_renderRelatedItems(),_renderRecommendedItems()];})());videoOverlay.setContent(content);videoOverlay.isVisible(true);_onAfterInsertion(videoOverlay._directAccessToDOM(),true);},_renderRecommendedItems=function(){var recommendedBlock=$(_wrappers.recommended),video_items=[];_content.recommended_videos=NU.VideoUtilities.sortVisitedVideos(_content.recommended_videos);recommendedBlock.find('h3').text(_content.recommended_videos_title);for(var i=0,max=_content.recommended_videos.length;i<max;i++){video_items.push(_renderItem(_content.recommended_videos[i],'opened from populair'));}
recommendedBlock.find('.videos').append(video_items);return recommendedBlock;},_renderRelatedItems=function(){if(_relatedItemsSource['slug']=='sprinkle'){return $(_wrappers.related_sprinkle);}
var relatedBlock=$(_wrappers.related),video_items=[];if(_content.video.related_videos){_content.video.related_videos=NU.VideoUtilities.sortVisitedVideos(_content.video.related_videos);for(var i=0,max=_content.video.related_videos.length;i<max;i++){video_items.push(_renderItem(_content.video.related_videos[i],'opened from related'));}
relatedBlock.find('.videos').append(video_items);}
return relatedBlock;},_renderItem=function(video_item,tracking_label){var element=$(_templates.video_item).find('.media > img').attr('src',video_item.thumbnail_url).end().find('.title').html(video_item.title).end().data('video',video_item).data('trackeventlabel',video_item.title).data('trackeventaction',tracking_label);if(_compareVideo(video_item,_content.video)){return'';}
if(NU.videoService.isVideoPlayed(video_item)){element.addClass('visited');}
if(!!video_item.branded){element.addClass('branded').find('.branded-name-short').text(video_item.branded.sponsored_by_short);if(!video_item.branded.hide_logo){element.addClass('show_logo').find('.branded-logo > img').attr('src','http://'+_mediatool_base_url+'/m/{id}_wd320.jpg'.replace('{id}',video_item.branded.logo_media_id));}else{element.addClass('hide_logo').find('.branded-logo').remove();}}else{element.find('.branded-notice, .branded-logo').remove();}
return element;},_onAfterInsertion=function(overlay,load_ads){var video_container=overlay.find('.video_related .videos'),video_container_width=(video_container.children().length*video_container.children(':last-child').outerWidth(true)),width=overlay.find('.video_related').width(),max=0,min=width-65-video_container_width,current_offset=0,retry_counter=0;video_container.css('width',video_container_width);function _scroll(direction){var offset=parseInt(video_container.css('margin-left'),10);width=overlay.find('.video_related').width();min=width-65-video_container_width;if(video_container.is('.in_transition')){return;}
video_container.addClass('in_transition');window.setTimeout(function(){video_container.removeClass('in_transition');},400);if(direction==2){offset+=(.8*width);}else{offset-=(.8*width);}
offset=Math.max(offset,min);offset=Math.min(offset,max);video_container.css('margin-left',offset);}
overlay.find('.video_related').find('.video_control').on('click keydown',function(event){if(event.type=='keydown'&&!(event.which==13||event.which==32)){return true;}
event.preventDefault();if($(this).is('.to_left')){_scroll(2);}else{_scroll(4);}});if(!$('html').hasClass('lt-ie9')){video_container.hammer().on('panstart',function(event){width=overlay.find('.video_related').width();min=width-65-video_container_width;current_offset=parseInt(video_container.css('margin-left'),10);}).on('pan',function(event){var offset=current_offset+event.gesture.deltaX;offset=Math.max(offset,min);offset=Math.min(offset,max);video_container.css('margin-left',offset+'px');}).on('swipe',function(event){});}
function checkSprinkleVideoCount(){if(!!$(".overlay .spklw-swiper-slide")&&$(".overlay .spklw-swiper-slide").length>0){overlay.find('.video_combination').addClass('related_enabled');}else if(retry_counter<20){retry_counter++;window.setTimeout(function(){checkSprinkleVideoCount();},50);}}
if(_relatedItemsSource['slug']=='sprinkle'){checkSprinkleVideoCount();}
if(load_ads&&'function'===typeof window['loadOverlay']){try{loadOverlay('overlay_leaderboard_adspot');NU.log('NU.videoOverlay: Loaded ad succesfully.');}catch(err){NU.log('NU.videoOverlay: Loading ad resulted in ERROR');}}},_compareVideo=function(a,b){return a.type==b.type&&a.thumbnail_url==b.thumbnail_url&&a.title==b.title;};self.playVideo=function(video){_content.video=video;_content.embedcode=video.embedcode;_content.title=video.title;videoOverlay.setTitle(_content.title);_insertContent();videoOverlay.listening_element.one('hide.overlay',function(){NU.videoService.videoPlayEnded(video);});};self.addRecommendedItems=function(){var recommendedPlaylistStore=new StorageAdapter('NU.Video.recommendedItems','local',{'ttl':'30m'}),recommendedPlaylist=recommendedPlaylistStore(),url='/api/playlists/slug/recommended?order_by=random';if(recommendedPlaylist){recommendedPlaylist=NU.VideoUtilities.parseVideoResults(recommendedPlaylist);_content.recommended_videos=NU.VideoUtilities.sortVisitedVideos(recommendedPlaylist.videos);_content.recommended_videos_title=recommendedPlaylist.title;return;}
$.getJSON(url,function(data){recommendedPlaylistStore(data);data=NU.VideoUtilities.parseVideoResults(data);_content.recommended_videos=NU.VideoUtilities.sortVisitedVideos(data.videos);_content.recommended_videos_title=data.title;});};self.addRelatedItems=function(data){data=NU.VideoUtilities.parseVideoResults(data);_content.video.related_videos=data.videos;_content.recommended_videos_title=data.title;NU.log('NU.videoOverlay: Added related items from: '+
(_relatedItemsSource['slug']||'related playlist in CMS')+'. Videos found: '+_content.video.related_videos.length);if(_content.video.related_videos.length<1){return;}
var relatedHTML=_renderRelatedItems(),overlay=videoOverlay._directAccessToDOM();overlay.find('.video_combination').addClass('related_enabled').find('.player').after(relatedHTML);_onAfterInsertion(overlay,false);};self.startPlayback=function(video){NU.log('NU.videoOverlay: Starting playback. Loading related items from: '+(_relatedItemsSource['slug']||'related playlist in CMS'));if(_relatedItemsSource['slug']){if(_relatedItemsSource['slug']=='plista'){$.cachedScript(_relatedItemsSource.url.replace('{id}',(video.id||'')).replace('{callback}','NU.videoOverlay.addRelatedItems'));}
NU.videoOverlay.isLoading(false);NU.videoOverlay.playVideo(video);NU.videoService.videoPlayStarted(video);}else{video.getRelatedItems(function(){NU.videoOverlay.isLoading(false);NU.videoOverlay.playVideo(video);NU.videoService.videoPlayStarted(video);});}};self.getTitle=function(){return _content.title;};self.setTitle=function(newTitle){_content.title=newTitle;videoOverlay.title=newTitle;};self.isLoading=videoOverlay.isLoading;self.isVisible=videoOverlay.isVisible;self.addRecommendedItems();};(function(window,document,location,setTimeout,decodeURIComponent,encodeURIComponent){var global=this;var channelId=Math.floor(Math.random()*10000);var emptyFn=Function.prototype;var reURI=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/;var reParent=/[\-\w]+\/\.\.\//;var reDoubleSlash=/([^:])\/\//g;var namespace="";var easyXDM={};var _easyXDM=window.easyXDM;var IFRAME_PREFIX="easyXDM_";var HAS_NAME_PROPERTY_BUG;var useHash=false;var flashVersion;var HAS_FLASH_THROTTLED_BUG;function isHostMethod(object,property){var t=typeof object[property];return t=='function'||(!!(t=='object'&&object[property]))||t=='unknown';}
function isHostObject(object,property){return!!(typeof(object[property])=='object'&&object[property]);}
function isArray(o){return Object.prototype.toString.call(o)==='[object Array]';}
function hasFlash(){var name="Shockwave Flash",mimeType="application/x-shockwave-flash";if(!undef(navigator.plugins)&&typeof navigator.plugins[name]=="object"){var description=navigator.plugins[name].description;if(description&&!undef(navigator.mimeTypes)&&navigator.mimeTypes[mimeType]&&navigator.mimeTypes[mimeType].enabledPlugin){flashVersion=description.match(/\d+/g);}}
if(!flashVersion){var flash;try{flash=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");flashVersion=Array.prototype.slice.call(flash.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1);flash=null;}
catch(notSupportedException){}}
if(!flashVersion){return false;}
var major=parseInt(flashVersion[0],10),minor=parseInt(flashVersion[1],10);HAS_FLASH_THROTTLED_BUG=major>9&&minor>0;return true;}
var on,un;if(isHostMethod(window,"addEventListener")){on=function(target,type,listener){target.addEventListener(type,listener,false);};un=function(target,type,listener){target.removeEventListener(type,listener,false);};}
else if(isHostMethod(window,"attachEvent")){on=function(object,sEvent,fpNotify){object.attachEvent("on"+sEvent,fpNotify);};un=function(object,sEvent,fpNotify){object.detachEvent("on"+sEvent,fpNotify);};}
else{throw new Error("Browser not supported");}
var domIsReady=false,domReadyQueue=[],readyState;if("readyState"in document){readyState=document.readyState;domIsReady=readyState=="complete"||(~navigator.userAgent.indexOf('AppleWebKit/')&&(readyState=="loaded"||readyState=="interactive"));}
else{domIsReady=!!document.body;}
function dom_onReady(){if(domIsReady){return;}
domIsReady=true;for(var i=0;i<domReadyQueue.length;i++){domReadyQueue[i]();}
domReadyQueue.length=0;}
if(!domIsReady){if(isHostMethod(window,"addEventListener")){on(document,"DOMContentLoaded",dom_onReady);}
else{on(document,"readystatechange",function(){if(document.readyState=="complete"){dom_onReady();}});if(document.documentElement.doScroll&&window===top){var doScrollCheck=function(){if(domIsReady){return;}
try{document.documentElement.doScroll("left");}
catch(e){setTimeout(doScrollCheck,1);return;}
dom_onReady();};doScrollCheck();}}
on(window,"load",dom_onReady);}
function whenReady(fn,scope){if(domIsReady){fn.call(scope);return;}
domReadyQueue.push(function(){fn.call(scope);});}
function getParentObject(){var obj=parent;if(namespace!==""){for(var i=0,ii=namespace.split(".");i<ii.length;i++){obj=obj[ii[i]];}}
return obj.easyXDM;}
function noConflict(ns){window.easyXDM=_easyXDM;namespace=ns;if(namespace){IFRAME_PREFIX="easyXDM_"+namespace.replace(".","_")+"_";}
return easyXDM;}
function getDomainName(url){return url.match(reURI)[3];}
function getPort(url){return url.match(reURI)[4]||"";}
function getLocation(url){var m=url.toLowerCase().match(reURI);var proto=m[2],domain=m[3],port=m[4]||"";if((proto=="http:"&&port==":80")||(proto=="https:"&&port==":443")){port="";}
return proto+"//"+domain+port;}
function resolveUrl(url){url=url.replace(reDoubleSlash,"$1/");if(!url.match(/^(http||https):\/\//)){var path=(url.substring(0,1)==="/")?"":location.pathname;if(path.substring(path.length-1)!=="/"){path=path.substring(0,path.lastIndexOf("/")+1);}
url=location.protocol+"//"+location.host+path+url;}
while(reParent.test(url)){url=url.replace(reParent,"");}
return url;}
function appendQueryParameters(url,parameters){var hash="",indexOf=url.indexOf("#");if(indexOf!==-1){hash=url.substring(indexOf);url=url.substring(0,indexOf);}
var q=[];for(var key in parameters){if(parameters.hasOwnProperty(key)){q.push(key+"="+encodeURIComponent(parameters[key]));}}
return url+(useHash?"#":(url.indexOf("?")==-1?"?":"&"))+q.join("&")+hash;}
var query=(function(input){input=input.substring(1).split("&");var data={},pair,i=input.length;while(i--){pair=input[i].split("=");data[pair[0]]=decodeURIComponent(pair[1]);}
return data;}(/xdm_e=/.test(location.search)?location.search:location.hash));function undef(v){return typeof v==="undefined";}
var getJSON=function(){var cached={};var obj={a:[1,2,3]},json="{\"a\":[1,2,3]}";if(typeof JSON!="undefined"&&typeof JSON.stringify==="function"&&JSON.stringify(obj).replace((/\s/g),"")===json){return JSON;}
if(Object.toJSON){if(Object.toJSON(obj).replace((/\s/g),"")===json){cached.stringify=Object.toJSON;}}
if(typeof String.prototype.evalJSON==="function"){obj=json.evalJSON();if(obj.a&&obj.a.length===3&&obj.a[2]===3){cached.parse=function(str){return str.evalJSON();};}}
if(cached.stringify&&cached.parse){getJSON=function(){return cached;};return cached;}
return null;};function apply(destination,source,noOverwrite){var member;for(var prop in source){if(source.hasOwnProperty(prop)){if(prop in destination){member=source[prop];if(typeof member==="object"){apply(destination[prop],member,noOverwrite);}
else if(!noOverwrite){destination[prop]=source[prop];}}
else{destination[prop]=source[prop];}}}
return destination;}
function testForNamePropertyBug(){var form=document.body.appendChild(document.createElement("form")),input=form.appendChild(document.createElement("input"));input.name=IFRAME_PREFIX+"TEST"+channelId;HAS_NAME_PROPERTY_BUG=input!==form.elements[input.name];document.body.removeChild(form);}
function createFrame(config){if(undef(HAS_NAME_PROPERTY_BUG)){testForNamePropertyBug();}
var frame;if(HAS_NAME_PROPERTY_BUG){frame=document.createElement("<iframe name=\""+config.props.name+"\"/>");}
else{frame=document.createElement("IFRAME");frame.name=config.props.name;}
frame.id=frame.name=config.props.name;delete config.props.name;if(typeof config.container=="string"){config.container=document.getElementById(config.container);}
if(!config.container){apply(frame.style,{position:"absolute",top:"-2000px",left:"0px"});config.container=document.body;}
var src=config.props.src;config.props.src="javascript:false";apply(frame,config.props);frame.border=frame.frameBorder=0;frame.allowTransparency=true;config.container.appendChild(frame);if(config.onLoad){on(frame,"load",config.onLoad);}
if(config.usePost){var form=config.container.appendChild(document.createElement('form')),input;form.target=frame.name;form.action=src;form.method='POST';if(typeof(config.usePost)==='object'){for(var i in config.usePost){if(config.usePost.hasOwnProperty(i)){if(HAS_NAME_PROPERTY_BUG){input=document.createElement('<input name="'+i+'"/>');}else{input=document.createElement("INPUT");input.name=i;}
input.value=config.usePost[i];form.appendChild(input);}}}
form.submit();form.parentNode.removeChild(form);}else{frame.src=src;}
config.props.src=src;return frame;}
function checkAcl(acl,domain){if(typeof acl=="string"){acl=[acl];}
var re,i=acl.length;while(i--){re=acl[i];re=new RegExp(re.substr(0,1)=="^"?re:("^"+re.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"));if(re.test(domain)){return true;}}
return false;}
function prepareTransportStack(config){var protocol=config.protocol,stackEls;config.isHost=config.isHost||undef(query.xdm_p);useHash=config.hash||false;if(!config.props){config.props={};}
if(!config.isHost){config.channel=query.xdm_c.replace(/["'<>\\]/g,"");config.secret=query.xdm_s;config.remote=query.xdm_e.replace(/["'<>\\]/g,"");;protocol=query.xdm_p;if(config.acl&&!checkAcl(config.acl,config.remote)){throw new Error("Access denied for "+config.remote);}}
else{config.remote=resolveUrl(config.remote);config.channel=config.channel||"default"+channelId++;config.secret=Math.random().toString(16).substring(2);if(undef(protocol)){if(getLocation(location.href)==getLocation(config.remote)){protocol="4";}
else if(isHostMethod(window,"postMessage")||isHostMethod(document,"postMessage")){protocol="1";}
else if(config.swf&&isHostMethod(window,"ActiveXObject")&&hasFlash()){protocol="6";}
else if(navigator.product==="Gecko"&&"frameElement"in window&&navigator.userAgent.indexOf('WebKit')==-1){protocol="5";}
else if(config.remoteHelper){protocol="2";}
else{protocol="0";}}}
config.protocol=protocol;switch(protocol){case"0":apply(config,{interval:100,delay:2000,useResize:true,useParent:false,usePolling:false},true);if(config.isHost){if(!config.local){var domain=location.protocol+"//"+location.host,images=document.body.getElementsByTagName("img"),image;var i=images.length;while(i--){image=images[i];if(image.src.substring(0,domain.length)===domain){config.local=image.src;break;}}
if(!config.local){config.local=window;}}
var parameters={xdm_c:config.channel,xdm_p:0};if(config.local===window){config.usePolling=true;config.useParent=true;config.local=location.protocol+"//"+location.host+location.pathname+location.search;parameters.xdm_e=config.local;parameters.xdm_pa=1;}
else{parameters.xdm_e=resolveUrl(config.local);}
if(config.container){config.useResize=false;parameters.xdm_po=1;}
config.remote=appendQueryParameters(config.remote,parameters);}
else{apply(config,{channel:query.xdm_c,remote:query.xdm_e,useParent:!undef(query.xdm_pa),usePolling:!undef(query.xdm_po),useResize:config.useParent?false:config.useResize});}
stackEls=[new easyXDM.stack.HashTransport(config),new easyXDM.stack.ReliableBehavior({}),new easyXDM.stack.QueueBehavior({encode:true,maxLength:4000-config.remote.length}),new easyXDM.stack.VerifyBehavior({initiate:config.isHost})];break;case"1":stackEls=[new easyXDM.stack.PostMessageTransport(config)];break;case"2":if(config.isHost){config.remoteHelper=resolveUrl(config.remoteHelper);}
stackEls=[new easyXDM.stack.NameTransport(config),new easyXDM.stack.QueueBehavior(),new easyXDM.stack.VerifyBehavior({initiate:config.isHost})];break;case"3":stackEls=[new easyXDM.stack.NixTransport(config)];break;case"4":stackEls=[new easyXDM.stack.SameOriginTransport(config)];break;case"5":stackEls=[new easyXDM.stack.FrameElementTransport(config)];break;case"6":if(!flashVersion){hasFlash();}
stackEls=[new easyXDM.stack.FlashTransport(config)];break;}
stackEls.push(new easyXDM.stack.QueueBehavior({lazy:config.lazy,remove:true}));return stackEls;}
function chainStack(stackElements){var stackEl,defaults={incoming:function(message,origin){this.up.incoming(message,origin);},outgoing:function(message,recipient){this.down.outgoing(message,recipient);},callback:function(success){this.up.callback(success);},init:function(){this.down.init();},destroy:function(){this.down.destroy();}};for(var i=0,len=stackElements.length;i<len;i++){stackEl=stackElements[i];apply(stackEl,defaults,true);if(i!==0){stackEl.down=stackElements[i-1];}
if(i!==len-1){stackEl.up=stackElements[i+1];}}
return stackEl;}
function removeFromStack(element){element.up.down=element.down;element.down.up=element.up;element.up=element.down=null;}
apply(easyXDM,{version:"2.4.19.3",query:query,stack:{},apply:apply,getJSONObject:getJSON,whenReady:whenReady,noConflict:noConflict});easyXDM.DomHelper={on:on,un:un,requiresJSON:function(path){if(!isHostObject(window,"JSON")){document.write('<'+'script type="text/javascript" src="'+path+'"><'+'/script>');}}};(function(){var _map={};easyXDM.Fn={set:function(name,fn){_map[name]=fn;},get:function(name,del){if(!_map.hasOwnProperty(name)){return;}
var fn=_map[name];if(del){delete _map[name];}
return fn;}};}());easyXDM.Socket=function(config){var stack=chainStack(prepareTransportStack(config).concat([{incoming:function(message,origin){config.onMessage(message,origin);},callback:function(success){if(config.onReady){config.onReady(success);}}}])),recipient=getLocation(config.remote);this.origin=getLocation(config.remote);this.destroy=function(){stack.destroy();};this.postMessage=function(message){stack.outgoing(message,recipient);};stack.init();};easyXDM.Rpc=function(config,jsonRpcConfig){if(jsonRpcConfig.local){for(var method in jsonRpcConfig.local){if(jsonRpcConfig.local.hasOwnProperty(method)){var member=jsonRpcConfig.local[method];if(typeof member==="function"){jsonRpcConfig.local[method]={method:member};}}}}
var stack=chainStack(prepareTransportStack(config).concat([new easyXDM.stack.RpcBehavior(this,jsonRpcConfig),{callback:function(success){if(config.onReady){config.onReady(success);}}}]));this.origin=getLocation(config.remote);this.destroy=function(){stack.destroy();};stack.init();};easyXDM.stack.SameOriginTransport=function(config){var pub,frame,send,targetOrigin;return(pub={outgoing:function(message,domain,fn){send(message);if(fn){fn();}},destroy:function(){if(frame){frame.parentNode.removeChild(frame);frame=null;}},onDOMReady:function(){targetOrigin=getLocation(config.remote);if(config.isHost){apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:location.protocol+"//"+location.host+location.pathname,xdm_c:config.channel,xdm_p:4}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);easyXDM.Fn.set(config.channel,function(sendFn){send=sendFn;setTimeout(function(){pub.up.callback(true);},0);return function(msg){pub.up.incoming(msg,targetOrigin);};});}
else{send=getParentObject().Fn.get(config.channel,true)(function(msg){pub.up.incoming(msg,targetOrigin);});setTimeout(function(){pub.up.callback(true);},0);}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.FlashTransport=function(config){var pub,frame,send,targetOrigin,swf,swfContainer;function onMessage(message,origin){setTimeout(function(){pub.up.incoming(message,targetOrigin);},0);}
function addSwf(domain){var url=config.swf+"?host="+config.isHost;var id="easyXDM_swf_"+Math.floor(Math.random()*10000);easyXDM.Fn.set("flash_loaded"+domain.replace(/[\-.]/g,"_"),function(){easyXDM.stack.FlashTransport[domain].swf=swf=swfContainer.firstChild;var queue=easyXDM.stack.FlashTransport[domain].queue;for(var i=0;i<queue.length;i++){queue[i]();}
queue.length=0;});if(config.swfContainer){swfContainer=(typeof config.swfContainer=="string")?document.getElementById(config.swfContainer):config.swfContainer;}
else{swfContainer=document.createElement('div');apply(swfContainer.style,HAS_FLASH_THROTTLED_BUG&&config.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0});document.body.appendChild(swfContainer);}
var flashVars="callback=flash_loaded"+encodeURIComponent(domain.replace(/[\-.]/g,"_"))
+"&proto="+global.location.protocol
+"&domain="+encodeURIComponent(getDomainName(global.location.href))
+"&port="+encodeURIComponent(getPort(global.location.href))
+"&ns="+encodeURIComponent(namespace);swfContainer.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+id+"' data='"+url+"'>"+"<param name='allowScriptAccess' value='always'></param>"+"<param name='wmode' value='transparent'>"+"<param name='movie' value='"+
url+"'></param>"+"<param name='flashvars' value='"+
flashVars+"'></param>"+"<embed type='application/x-shockwave-flash' FlashVars='"+
flashVars+"' allowScriptAccess='always' wmode='transparent' src='"+
url+"' height='1' width='1'></embed>"+"</object>";}
return(pub={outgoing:function(message,domain,fn){swf.postMessage(config.channel,message.toString());if(fn){fn();}},destroy:function(){try{swf.destroyChannel(config.channel);}
catch(e){}
swf=null;if(frame){frame.parentNode.removeChild(frame);frame=null;}},onDOMReady:function(){targetOrigin=config.remote;easyXDM.Fn.set("flash_"+config.channel+"_init",function(){setTimeout(function(){pub.up.callback(true);});});easyXDM.Fn.set("flash_"+config.channel+"_onMessage",onMessage);config.swf=resolveUrl(config.swf);var swfdomain=getDomainName(config.swf);var fn=function(){easyXDM.stack.FlashTransport[swfdomain].init=true;swf=easyXDM.stack.FlashTransport[swfdomain].swf;swf.createChannel(config.channel,config.secret,getLocation(config.remote),config.isHost);if(config.isHost){if(HAS_FLASH_THROTTLED_BUG&&config.swfNoThrottle){apply(config.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"});}
apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:6,xdm_s:config.secret}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);}};if(easyXDM.stack.FlashTransport[swfdomain]&&easyXDM.stack.FlashTransport[swfdomain].init){fn();}
else{if(!easyXDM.stack.FlashTransport[swfdomain]){easyXDM.stack.FlashTransport[swfdomain]={queue:[fn]};addSwf(swfdomain);}
else{easyXDM.stack.FlashTransport[swfdomain].queue.push(fn);}}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.PostMessageTransport=function(config){var pub,frame,callerWindow,targetOrigin;function _getOrigin(event){if(event.origin){return getLocation(event.origin);}
if(event.uri){return getLocation(event.uri);}
if(event.domain){return location.protocol+"//"+event.domain;}
throw"Unable to retrieve the origin of the event";}
function _window_onMessage(event){var origin=_getOrigin(event);if(origin==targetOrigin&&event.data.substring(0,config.channel.length+1)==config.channel+" "){pub.up.incoming(event.data.substring(config.channel.length+1),origin);}}
return(pub={outgoing:function(message,domain,fn){callerWindow.postMessage(config.channel+" "+message,domain||targetOrigin);if(fn){fn();}},destroy:function(){un(window,"message",_window_onMessage);if(frame){callerWindow=null;frame.parentNode.removeChild(frame);frame=null;}},onDOMReady:function(){targetOrigin=getLocation(config.remote);if(config.isHost){var waitForReady=function(event){if(event.data==config.channel+"-ready"){callerWindow=("postMessage"in frame.contentWindow)?frame.contentWindow:frame.contentWindow.document;un(window,"message",waitForReady);on(window,"message",_window_onMessage);setTimeout(function(){pub.up.callback(true);},0);}};on(window,"message",waitForReady);apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:1}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);}
else{on(window,"message",_window_onMessage);callerWindow=("postMessage"in window.parent)?window.parent:window.parent.document;callerWindow.postMessage(config.channel+"-ready",targetOrigin);setTimeout(function(){pub.up.callback(true);},0);}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.FrameElementTransport=function(config){var pub,frame,send,targetOrigin;return(pub={outgoing:function(message,domain,fn){send.call(this,message);if(fn){fn();}},destroy:function(){if(frame){frame.parentNode.removeChild(frame);frame=null;}},onDOMReady:function(){targetOrigin=getLocation(config.remote);if(config.isHost){apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:5}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);frame.fn=function(sendFn){delete frame.fn;send=sendFn;setTimeout(function(){pub.up.callback(true);},0);return function(msg){pub.up.incoming(msg,targetOrigin);};};}
else{if(document.referrer&&getLocation(document.referrer)!=query.xdm_e){window.top.location=query.xdm_e;}
send=window.frameElement.fn(function(msg){pub.up.incoming(msg,targetOrigin);});pub.up.callback(true);}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.NameTransport=function(config){var pub;var isHost,callerWindow,remoteWindow,readyCount,callback,remoteOrigin,remoteUrl;function _sendMessage(message){var url=config.remoteHelper+(isHost?"#_3":"#_2")+config.channel;callerWindow.contentWindow.sendMessage(message,url);}
function _onReady(){if(isHost){if(++readyCount===2||!isHost){pub.up.callback(true);}}
else{_sendMessage("ready");pub.up.callback(true);}}
function _onMessage(message){pub.up.incoming(message,remoteOrigin);}
function _onLoad(){if(callback){setTimeout(function(){callback(true);},0);}}
return(pub={outgoing:function(message,domain,fn){callback=fn;_sendMessage(message);},destroy:function(){callerWindow.parentNode.removeChild(callerWindow);callerWindow=null;if(isHost){remoteWindow.parentNode.removeChild(remoteWindow);remoteWindow=null;}},onDOMReady:function(){isHost=config.isHost;readyCount=0;remoteOrigin=getLocation(config.remote);config.local=resolveUrl(config.local);if(isHost){easyXDM.Fn.set(config.channel,function(message){if(isHost&&message==="ready"){easyXDM.Fn.set(config.channel,_onMessage);_onReady();}});remoteUrl=appendQueryParameters(config.remote,{xdm_e:config.local,xdm_c:config.channel,xdm_p:2});apply(config.props,{src:remoteUrl+'#'+config.channel,name:IFRAME_PREFIX+config.channel+"_provider"});remoteWindow=createFrame(config);}
else{config.remoteHelper=config.remote;easyXDM.Fn.set(config.channel,_onMessage);}
var onLoad=function(){var w=callerWindow||this;un(w,"load",onLoad);easyXDM.Fn.set(config.channel+"_load",_onLoad);(function test(){if(typeof w.contentWindow.sendMessage=="function"){_onReady();}
else{setTimeout(test,50);}}());};callerWindow=createFrame({props:{src:config.local+"#_4"+config.channel},onLoad:onLoad});},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.HashTransport=function(config){var pub;var me=this,isHost,_timer,pollInterval,_lastMsg,_msgNr,_listenerWindow,_callerWindow;var useParent,_remoteOrigin;function _sendMessage(message){if(!_callerWindow){return;}
var url=config.remote+"#"+(_msgNr++)+"_"+message;((isHost||!useParent)?_callerWindow.contentWindow:_callerWindow).location=url;}
function _handleHash(hash){_lastMsg=hash;pub.up.incoming(_lastMsg.substring(_lastMsg.indexOf("_")+1),_remoteOrigin);}
function _pollHash(){if(!_listenerWindow){return;}
var href=_listenerWindow.location.href,hash="",indexOf=href.indexOf("#");if(indexOf!=-1){hash=href.substring(indexOf);}
if(hash&&hash!=_lastMsg){_handleHash(hash);}}
function _attachListeners(){_timer=setInterval(_pollHash,pollInterval);}
return(pub={outgoing:function(message,domain){_sendMessage(message);},destroy:function(){window.clearInterval(_timer);if(isHost||!useParent){_callerWindow.parentNode.removeChild(_callerWindow);}
_callerWindow=null;},onDOMReady:function(){isHost=config.isHost;pollInterval=config.interval;_lastMsg="#"+config.channel;_msgNr=0;useParent=config.useParent;_remoteOrigin=getLocation(config.remote);if(isHost){apply(config.props,{src:config.remote,name:IFRAME_PREFIX+config.channel+"_provider"});if(useParent){config.onLoad=function(){_listenerWindow=window;_attachListeners();pub.up.callback(true);};}
else{var tries=0,max=config.delay/50;(function getRef(){if(++tries>max){throw new Error("Unable to reference listenerwindow");}
try{_listenerWindow=_callerWindow.contentWindow.frames[IFRAME_PREFIX+config.channel+"_consumer"];}
catch(ex){}
if(_listenerWindow){_attachListeners();pub.up.callback(true);}
else{setTimeout(getRef,50);}}());}
_callerWindow=createFrame(config);}
else{_listenerWindow=window;_attachListeners();if(useParent){_callerWindow=parent;pub.up.callback(true);}
else{apply(config,{props:{src:config.remote+"#"+config.channel+new Date(),name:IFRAME_PREFIX+config.channel+"_consumer"},onLoad:function(){pub.up.callback(true);}});_callerWindow=createFrame(config);}}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.ReliableBehavior=function(config){var pub,callback;var idOut=0,idIn=0,currentMessage="";return(pub={incoming:function(message,origin){var indexOf=message.indexOf("_"),ack=message.substring(0,indexOf).split(",");message=message.substring(indexOf+1);if(ack[0]==idOut){currentMessage="";if(callback){callback(true);}}
if(message.length>0){pub.down.outgoing(ack[1]+","+idOut+"_"+currentMessage,origin);if(idIn!=ack[1]){idIn=ack[1];pub.up.incoming(message,origin);}}},outgoing:function(message,origin,fn){currentMessage=message;callback=fn;pub.down.outgoing(idIn+","+(++idOut)+"_"+message,origin);}});};easyXDM.stack.QueueBehavior=function(config){var pub,queue=[],waiting=true,incoming="",destroying,maxLength=0,lazy=false,doFragment=false;function dispatch(){if(config.remove&&queue.length===0){removeFromStack(pub);return;}
if(waiting||queue.length===0||destroying){return;}
waiting=true;var message=queue.shift();pub.down.outgoing(message.data,message.origin,function(success){waiting=false;if(message.callback){setTimeout(function(){message.callback(success);},0);}
dispatch();});}
return(pub={init:function(){if(undef(config)){config={};}
if(config.maxLength){maxLength=config.maxLength;doFragment=true;}
if(config.lazy){lazy=true;}
else{pub.down.init();}},callback:function(success){waiting=false;var up=pub.up;dispatch();up.callback(success);},incoming:function(message,origin){if(doFragment){var indexOf=message.indexOf("_"),seq=parseInt(message.substring(0,indexOf),10);incoming+=message.substring(indexOf+1);if(seq===0){if(config.encode){incoming=decodeURIComponent(incoming);}
pub.up.incoming(incoming,origin);incoming="";}}
else{pub.up.incoming(message,origin);}},outgoing:function(message,origin,fn){if(config.encode){message=encodeURIComponent(message);}
var fragments=[],fragment;if(doFragment){while(message.length!==0){fragment=message.substring(0,maxLength);message=message.substring(fragment.length);fragments.push(fragment);}
while((fragment=fragments.shift())){queue.push({data:fragments.length+"_"+fragment,origin:origin,callback:fragments.length===0?fn:null});}}
else{queue.push({data:message,origin:origin,callback:fn});}
if(lazy){pub.down.init();}
else{dispatch();}},destroy:function(){destroying=true;pub.down.destroy();}});};easyXDM.stack.VerifyBehavior=function(config){var pub,mySecret,theirSecret,verified=false;function startVerification(){mySecret=Math.random().toString(16).substring(2);pub.down.outgoing(mySecret);}
return(pub={incoming:function(message,origin){var indexOf=message.indexOf("_");if(indexOf===-1){if(message===mySecret){pub.up.callback(true);}
else if(!theirSecret){theirSecret=message;if(!config.initiate){startVerification();}
pub.down.outgoing(message);}}
else{if(message.substring(0,indexOf)===theirSecret){pub.up.incoming(message.substring(indexOf+1),origin);}}},outgoing:function(message,origin,fn){pub.down.outgoing(mySecret+"_"+message,origin,fn);},callback:function(success){if(config.initiate){startVerification();}}});};easyXDM.stack.RpcBehavior=function(proxy,config){var pub,serializer=config.serializer||getJSON();var _callbackCounter=0,_callbacks={};function _send(data){data.jsonrpc="2.0";pub.down.outgoing(serializer.stringify(data));}
function _createMethod(definition,method){var slice=Array.prototype.slice;return function(){var l=arguments.length,callback,message={method:method};if(l>0&&typeof arguments[l-1]==="function"){if(l>1&&typeof arguments[l-2]==="function"){callback={success:arguments[l-2],error:arguments[l-1]};message.params=slice.call(arguments,0,l-2);}
else{callback={success:arguments[l-1]};message.params=slice.call(arguments,0,l-1);}
_callbacks[""+(++_callbackCounter)]=callback;message.id=_callbackCounter;}
else{message.params=slice.call(arguments,0);}
if(definition.namedParams&&message.params.length===1){message.params=message.params[0];}
_send(message);};}
function _executeMethod(method,id,fn,params){if(!fn){if(id){_send({id:id,error:{code:-32601,message:"Procedure not found."}});}
return;}
var success,error;if(id){success=function(result){success=emptyFn;_send({id:id,result:result});};error=function(message,data){error=emptyFn;var msg={id:id,error:{code:-32099,message:message}};if(data){msg.error.data=data;}
_send(msg);};}
else{success=error=emptyFn;}
if(!isArray(params)){params=[params];}
try{var result=fn.method.apply(fn.scope,params.concat([success,error]));if(!undef(result)){success(result);}}
catch(ex1){error(ex1.message);}}
return(pub={incoming:function(message,origin){var data=serializer.parse(message);if(data.method){if(config.handle){config.handle(data,_send);}
else{_executeMethod(data.method,data.id,config.local[data.method],data.params);}}
else{var callback=_callbacks[data.id];if(data.error){if(callback.error){callback.error(data.error);}}
else if(callback.success){callback.success(data.result);}
delete _callbacks[data.id];}},init:function(){if(config.remote){for(var method in config.remote){if(config.remote.hasOwnProperty(method)){proxy[method]=_createMethod(config.remote[method],method);}}}
pub.down.init();},destroy:function(){for(var method in config.remote){if(config.remote.hasOwnProperty(method)&&proxy.hasOwnProperty(method)){delete proxy[method];}}
pub.down.destroy();}});};global.easyXDM=easyXDM;})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);var NU=NU||{};NU.XDMSocket=function(href,target){var self=this;self.target=$(target).addClass('loading');self.processMessage=function(message,origin){if(message){try{message=JSON.parse(message);switch(message.type){case'height':$(self.target).removeClass('loading').css('height',message.content+"px");break;case'navigate':$(self.target).addClass('loading').css('height','auto');self.socket.destroy();self.create(message.content);$('body').scrollTop(self.target.offset().top||1);break;}}catch(e){NU.log(['XDMSocket: unparseable message from origin: '+origin,message,e]);return false;}}};self.create=function(url){self.socket=new easyXDM.Socket({remote:url,container:self.target[0],onMessage:self.processMessage,props:{'allowfullscreen':'allowfullscreen','scrolling':'no'}});NU.log(['XDM socket created',url]);};self.create(href);};var NU=NU||{};NU.account=(function($){var loggedin=false,log=function(){var args=arguments;args[0]=typeof args[0]==='string'?'NU.account: '+args[0]:args[0];NU.log.apply(this,args);},checkQuerystring=function(){var querystring=window.location.search,queryobject={};querystring.replace(/[?&]([^=]+)=?([^?&]*)*/,function(){queryobject[arguments[1]]=arguments[2];});if(queryobject['nuaccount']&&interactions[queryobject['nuaccount']]){interactions[queryobject['nuaccount']]();}},fillFormFields=function(user){var userblocks=$('.account');userblocks.each(function(){var userblock=$(this);userblock.addClass('loggedin');if(user.thumbnailURL){userblock.addClass('hasavatar').find('.accountimage').append('<img src="'+user.thumbnailURL+'" alt="user image" />');}
userblock.find('.accountname').find('.firstname').text(user.firstName);userblock.find('.accountname').find('.lastname').text(user.lastName);});},emptyFormFields=function(){var userblocks=$('.account');userblocks.each(function(){var userblock=$(this);userblock.removeClass('hasavatar loggedin');userblock.find('.accountimage').empty();userblock.find('.accountname').find('.firstname').empty();userblock.find('.accountname').find('.lastname').empty();});},callbacks={onLogin:function(event){log('User is logged in');loggedin=true;$('body').addClass('isloggedin').trigger('NU.account.login');fillFormFields(event.profile);},onLogout:function(event){log('User is logged out');loggedin=false;$('body').removeClass('isloggedin').trigger('NU.account.logout');emptyFormFields();},getAccountInfoResponse:function(event){$('.account').each(function(){$(this).fadeIn(400);});if(event.errorCode==0){callbacks.onLogin(event)}else{callbacks.onLogout(event);}
checkQuerystring();}},interactions={login:function(account_page_slug){account_page_slug=account_page_slug||'default';if(!loggedin){Sanoma.account.config.registration_content=NU.account.pages[account_page_slug];gigya.accounts.showScreenSet(Sanoma.account.config.screensets.login);}},register:function(account_page_slug){account_page_slug=account_page_slug||'default';if(!loggedin){Sanoma.account.config.registration_content=NU.account.pages[account_page_slug];gigya.accounts.showScreenSet(Sanoma.account.config.screensets.register);}},logout:function(){if(loggedin){gigya.accounts.logout();}},profile:function(){if(loggedin){gigya.accounts.showScreenSet(Sanoma.account.config.screensets.profile);}}},events={init:function(eventName,data){log('Loaded');gigya.accounts.addEventHandlers({onLogin:callbacks.onLogin,onLogout:callbacks.onLogout});gigya.accounts.getAccountInfo({callback:callbacks.getAccountInfoResponse});$('.account_login').on('click',function(event){event.preventDefault();interactions.login();});$('.account_register').on('click',function(event){event.preventDefault();interactions.register();});$('.account_logout').on('click',function(event){event.preventDefault();interactions.logout();});$('.account_profile').on('click',function(event){event.preventDefault();interactions.profile();});}};return{interactions:interactions,events:events}})(jQuery);NU.account['pages']=(function(){var store=new StorageAdapter('NU.account_pages','local',{ttl:'1u'});return store()||(function(){var url='/api/config/account_pages';$.get(url,function(data){var result={};for(var i=0,max=data['results'].length;i<max;i++){result[data['results'][i]['slug']]=data['results'][i]['html']}
store(result);NU.account['pages']=result;});})();})();NU.namespace('NU');NU.Url={routes:{},reverse:function(name,kwargs,urls){if(!urls){urls=this.routes||{};}
var path=urls[name]||false;if(!path){throw('URL not found for view: '+name);}
var _path=path;var key;for(key in kwargs){if(kwargs.hasOwnProperty(key)){if(!path.match('<'+key+'>')){throw(key+' does not exist in '+_path);}
path=path.replace('<'+key+'>',kwargs[key]);}}
var re=new RegExp('<[a-zA-Z0-9-_]{1,}>','g');var missing_args=path.match(re);if(missing_args){throw('Missing arguments ('+missing_args.join(", ")+') for url '+_path);}
return path;},slugify:function(val){if(!val){return'';}
var map={"2d":"-","20":"-","24":"s","26":"and","30":"0","31":"1","32":"2","33":"3","34":"4","35":"5","36":"6","37":"7","38":"8","39":"9","41":"A","42":"B","43":"C","44":"D","45":"E","46":"F","47":"G","48":"H","49":"I","50":"P","51":"Q","52":"R","53":"S","54":"T","55":"U","56":"V","57":"W","58":"X","59":"Y","61":"a","62":"b","63":"c","64":"d","65":"e","66":"f","67":"g","68":"h","69":"i","70":"p","71":"q","72":"r","73":"s","74":"t","75":"u","76":"v","77":"w","78":"x","79":"y","100":"A","101":"a","102":"A","103":"a","104":"A","105":"a","106":"C","107":"c","108":"C","109":"c","110":"D","111":"d","112":"E","113":"e","114":"E","115":"e","116":"E","117":"e","118":"E","119":"e","120":"G","121":"g","122":"G","123":"g","124":"H","125":"h","126":"H","127":"h","128":"I","129":"i","130":"I","131":"i","132":"IJ","133":"ij","134":"J","135":"j","136":"K","137":"k","138":"k","139":"L","140":"l","141":"L","142":"l","143":"N","144":"n","145":"N","146":"n","147":"N","148":"n","149":"n","150":"O","151":"o","152":"OE","153":"oe","154":"R","155":"r","156":"R","157":"r","158":"R","159":"r","160":"S","161":"s","162":"T","163":"t","164":"T","165":"t","166":"T","167":"t","168":"U","169":"u","170":"U","171":"u","172":"U","173":"u","174":"W","175":"w","176":"Y","177":"y","178":"Y","179":"Z","180":"b","181":"B","182":"b","183":"b","184":"b","185":"b","186":"C","187":"C","188":"c","189":"D","190":"E","191":"F","192":"f","193":"G","194":"Y","195":"h","196":"i","197":"I","198":"K","199":"k","200":"A","201":"a","202":"A","203":"a","204":"E","205":"e","206":"E","207":"e","208":"I","209":"i","210":"R","211":"r","212":"R","213":"r","214":"U","215":"u","216":"U","217":"u","218":"S","219":"s","220":"n","221":"d","222":"8","223":"8","224":"Z","225":"z","226":"A","227":"a","228":"E","229":"e","230":"O","231":"o","232":"Y","233":"y","234":"l","235":"n","236":"t","237":"j","238":"db","239":"qp","240":"<","241":"?","242":"?","243":"B","244":"U","245":"A","246":"E","247":"e","248":"J","249":"j","250":"a","251":"a","252":"a","253":"b","254":"c","255":"e","256":"d","257":"d","258":"e","259":"e","260":"g","261":"g","262":"g","263":"Y","264":"x","265":"u","266":"h","267":"h","268":"i","269":"i","270":"w","271":"m","272":"n","273":"n","274":"N","275":"o","276":"oe","277":"m","278":"o","279":"r","280":"R","281":"R","282":"S","283":"f","284":"f","285":"f","286":"f","287":"t","288":"t","289":"u","290":"Z","291":"Z","292":"3","293":"3","294":"?","295":"?","296":"5","297":"C","298":"O","299":"B","363":"a","364":"e","365":"i","366":"o","367":"u","368":"c","369":"d","386":"A","388":"E","389":"H","390":"i","391":"A","392":"B","393":"r","394":"A","395":"E","396":"Z","397":"H","398":"O","399":"I","400":"E","401":"E","402":"T","403":"r","404":"E","405":"S","406":"I","407":"I","408":"J","409":"jb","410":"A","411":"B","412":"B","413":"r","414":"D","415":"E","416":"X","417":"3","418":"N","419":"N","420":"P","421":"C","422":"T","423":"y","424":"O","425":"X","426":"U","427":"h","428":"W","429":"W","430":"a","431":"6","432":"B","433":"r","434":"d","435":"e","436":"x","437":"3","438":"N","439":"N","440":"P","441":"C","442":"T","443":"Y","444":"qp","445":"x","446":"U","447":"h","448":"W","449":"W","450":"e","451":"e","452":"h","453":"r","454":"e","455":"s","456":"i","457":"i","458":"j","459":"jb","460":"W","461":"w","462":"Tb","463":"tb","464":"IC","465":"ic","466":"A","467":"a","468":"IA","469":"ia","470":"Y","471":"y","472":"O","473":"o","474":"V","475":"v","476":"V","477":"v","478":"Oy","479":"oy","480":"C","481":"c","490":"R","491":"r","492":"F","493":"f","494":"H","495":"h","496":"X","497":"x","498":"3","499":"3","500":"d","501":"d","502":"d","503":"d","504":"R","505":"R","506":"R","507":"R","508":"JT","509":"JT","510":"E","511":"e","512":"JT","513":"jt","514":"JX","515":"JX","531":"U","532":"D","533":"Q","534":"N","535":"T","536":"2","537":"F","538":"r","539":"p","540":"z","541":"2","542":"n","543":"x","544":"U","545":"B","546":"j","547":"t","548":"n","549":"C","550":"R","551":"8","552":"R","553":"O","554":"P","555":"O","556":"S","561":"w","562":"f","563":"q","564":"n","565":"t","566":"q","567":"t","568":"n","569":"p","570":"h","571":"a","572":"n","573":"a","574":"u","575":"j","576":"u","577":"2","578":"n","579":"2","580":"n","581":"g","582":"l","583":"uh","584":"p","585":"o","586":"S","587":"u","4a":"J","4b":"K","4c":"L","4d":"M","4e":"N","4f":"O","5a":"Z","6a":"j","6b":"k","6c":"l","6d":"m","6e":"n","6f":"o","7a":"z","a2":"c","a3":"f","a5":"Y","a7":"s","a9":"c","aa":"a","ae":"r","b2":"2","b3":"3","b5":"u","b6":"p","b9":"1","c0":"A","c1":"A","c2":"A","c3":"A","c4":"A","c5":"A","c6":"AE","c7":"C","c8":"E","c9":"E","ca":"E","cb":"E","cc":"I","cd":"I","ce":"I","cf":"I","d0":"D","d1":"N","d2":"O","d3":"O","d4":"O","d5":"O","d6":"O","d7":"X","d8":"O","d9":"U","da":"U","db":"U","dc":"U","dd":"Y","de":"p","df":"b","e0":"a","e1":"a","e2":"a","e3":"a","e4":"a","e5":"a","e6":"ae","e7":"c","e8":"e","e9":"e","ea":"e","eb":"e","ec":"i","ed":"i","ee":"i","ef":"i","f0":"o","f1":"n","f2":"o","f3":"o","f4":"o","f5":"o","f6":"o","f8":"o","f9":"u","fa":"u","fb":"u","fc":"u","fd":"y","ff":"y","10a":"C","10b":"c","10c":"C","10d":"c","10e":"D","10f":"d","11a":"E","11b":"e","11c":"G","11d":"g","11e":"G","11f":"g","12a":"I","12b":"i","12c":"I","12d":"i","12e":"I","12f":"i","13a":"l","13b":"L","13c":"l","13d":"L","13e":"l","13f":"L","14a":"n","14b":"n","14c":"O","14d":"o","14e":"O","14f":"o","15a":"S","15b":"s","15c":"S","15d":"s","15e":"S","15f":"s","16a":"U","16b":"u","16c":"U","16d":"u","16e":"U","16f":"u","17a":"z","17b":"Z","17c":"z","17d":"Z","17e":"z","17f":"f","18a":"D","18b":"d","18c":"d","18d":"q","18e":"E","18f":"e","19a":"l","19b":"h","19c":"w","19d":"N","19e":"n","19f":"O","1a0":"O","1a1":"o","1a2":"P","1a3":"P","1a4":"P","1a5":"p","1a6":"R","1a7":"S","1a8":"s","1a9":"E","1aa":"l","1ab":"t","1ac":"T","1ad":"t","1ae":"T","1af":"U","1b0":"u","1b1":"U","1b2":"U","1b3":"Y","1b4":"y","1b5":"Z","1b6":"z","1b7":"3","1b8":"3","1b9":"3","1ba":"3","1bb":"2","1bc":"5","1bd":"5","1be":"5","1bf":"p","1c4":"DZ","1c5":"Dz","1c6":"dz","1c7":"Lj","1c8":"Lj","1c9":"lj","1ca":"NJ","1cb":"Nj","1cc":"nj","1cd":"A","1ce":"a","1cf":"I","1d0":"i","1d1":"O","1d2":"o","1d3":"U","1d4":"u","1d5":"U","1d6":"u","1d7":"U","1d8":"u","1d9":"U","1da":"u","1db":"U","1dc":"u","1dd":"e","1de":"A","1df":"a","1e0":"A","1e1":"a","1e2":"AE","1e3":"ae","1e4":"G","1e5":"g","1e6":"G","1e7":"g","1e8":"K","1e9":"k","1ea":"Q","1eb":"q","1ec":"Q","1ed":"q","1ee":"3","1ef":"3","1f0":"J","1f1":"dz","1f2":"dZ","1f3":"DZ","1f4":"g","1f5":"G","1f6":"h","1f7":"p","1f8":"N","1f9":"n","1fa":"A","1fb":"a","1fc":"AE","1fd":"ae","1fe":"O","1ff":"o","20a":"I","20b":"i","20c":"O","20d":"o","20e":"O","20f":"o","21a":"T","21b":"t","21c":"3","21d":"3","21e":"H","21f":"h","22a":"O","22b":"o","22c":"O","22d":"o","22e":"O","22f":"o","23a":"A","23b":"C","23c":"c","23d":"L","23e":"T","23f":"s","24a":"Q","24b":"q","24c":"R","24d":"r","24e":"Y","24f":"y","25a":"e","25b":"3","25c":"3","25d":"3","25e":"3","25f":"j","26a":"i","26b":"I","26c":"I","26d":"I","26e":"h","26f":"w","27a":"R","27b":"r","27c":"R","27d":"R","27e":"r","27f":"r","28a":"u","28b":"v","28c":"A","28d":"M","28e":"Y","28f":"Y","29a":"B","29b":"G","29c":"H","29d":"j","29e":"K","29f":"L","2a0":"q","2a1":"?","2a2":"c","2a3":"dz","2a4":"d3","2a5":"dz","2a6":"ts","2a7":"tf","2a8":"tc","2a9":"fn","2aa":"ls","2ab":"lz","2ac":"ww","2ae":"u","2af":"u","2b0":"h","2b1":"h","2b2":"j","2b3":"r","2b4":"r","2b5":"r","2b6":"R","2b7":"W","2b8":"Y","2df":"x","2e0":"Y","2e1":"1","2e2":"s","2e3":"x","2e4":"c","36a":"h","36b":"m","36c":"r","36d":"t","36e":"v","36f":"x","37b":"c","37c":"c","37d":"c","38a":"I","38c":"O","38e":"Y","38f":"O","39a":"K","39b":"A","39c":"M","39d":"N","39e":"E","39f":"O","3a0":"TT","3a1":"P","3a3":"E","3a4":"T","3a5":"Y","3a6":"O","3a7":"X","3a8":"Y","3a9":"O","3aa":"I","3ab":"Y","3ac":"a","3ad":"e","3ae":"n","3af":"i","3b0":"v","3b1":"a","3b2":"b","3b3":"y","3b4":"d","3b5":"e","3b6":"c","3b7":"n","3b8":"0","3b9":"1","3ba":"k","3bb":"j","3bc":"u","3bd":"v","3be":"c","3bf":"o","3c0":"tt","3c1":"p","3c2":"s","3c3":"o","3c4":"t","3c5":"u","3c6":"q","3c7":"X","3c8":"Y","3c9":"w","3ca":"i","3cb":"u","3cc":"o","3cd":"u","3ce":"w","3d0":"b","3d1":"e","3d2":"Y","3d3":"Y","3d4":"Y","3d5":"O","3d6":"w","3d7":"x","3d8":"Q","3d9":"q","3da":"C","3db":"c","3dc":"F","3dd":"f","3de":"N","3df":"N","3e2":"W","3e3":"w","3e4":"q","3e5":"q","3e6":"h","3e7":"e","3e8":"S","3e9":"s","3ea":"X","3eb":"x","3ec":"6","3ed":"6","3ee":"t","3ef":"t","3f0":"x","3f1":"e","3f2":"c","3f3":"j","3f4":"O","3f5":"E","3f6":"E","3f7":"p","3f8":"p","3f9":"C","3fa":"M","3fb":"M","3fc":"p","3fd":"C","3fe":"C","3ff":"C","40a":"Hb","40b":"Th","40c":"K","40d":"N","40e":"Y","40f":"U","41a":"K","41b":"jI","41c":"M","41d":"H","41e":"O","41f":"TT","42a":"b","42b":"bI","42c":"b","42d":"E","42e":"IO","42f":"R","43a":"K","43b":"JI","43c":"M","43d":"H","43e":"O","43f":"N","44a":"b","44b":"bI","44c":"b","44d":"e","44e":"io","44f":"r","45a":"Hb","45b":"h","45c":"k","45d":"n","45e":"y","45f":"u","46a":"mY","46b":"my","46c":"Im","46d":"Im","46e":"3","46f":"3","47a":"O","47b":"o","47c":"W","47d":"w","47e":"W","47f":"W","48a":"H","48b":"H","48c":"B","48d":"b","48e":"P","48f":"p","49a":"K","49b":"k","49c":"K","49d":"k","49e":"K","49f":"k","4a0":"K","4a1":"k","4a2":"H","4a3":"h","4a4":"H","4a5":"h","4a6":"Ih","4a7":"ih","4a8":"O","4a9":"o","4aa":"C","4ab":"c","4ac":"T","4ad":"t","4ae":"Y","4af":"y","4b0":"Y","4b1":"y","4b2":"X","4b3":"x","4b4":"TI","4b5":"ti","4b6":"H","4b7":"h","4b8":"H","4b9":"h","4ba":"H","4bb":"h","4bc":"E","4bd":"e","4be":"E","4bf":"e","4c0":"I","4c1":"X","4c2":"x","4c3":"K","4c4":"k","4c5":"jt","4c6":"jt","4c7":"H","4c8":"h","4c9":"H","4ca":"h","4cb":"H","4cc":"h","4cd":"M","4ce":"m","4cf":"l","4d0":"A","4d1":"a","4d2":"A","4d3":"a","4d4":"AE","4d5":"ae","4d6":"E","4d7":"e","4d8":"e","4d9":"e","4da":"E","4db":"e","4dc":"X","4dd":"X","4de":"3","4df":"3","4e0":"3","4e1":"3","4e2":"N","4e3":"n","4e4":"N","4e5":"n","4e6":"O","4e7":"o","4e8":"O","4e9":"o","4ea":"O","4eb":"o","4ec":"E","4ed":"e","4ee":"Y","4ef":"y","4f0":"Y","4f1":"y","4f2":"Y","4f3":"y","4f4":"H","4f5":"h","4f6":"R","4f7":"r","4f8":"bI","4f9":"bi","4fa":"F","4fb":"f","4fc":"X","4fd":"x","4fe":"X","4ff":"x","50a":"H","50b":"h","50c":"G","50d":"g","50e":"T","50f":"t","51a":"Q","51b":"q","51c":"W","51d":"w","53a":"d","53b":"r","53c":"L","53d":"Iu","53e":"O","53f":"y","54a":"m","54b":"o","54c":"N","54d":"U","54e":"Y","54f":"S","56a":"d","56b":"h","56c":"l","56d":"lu","56e":"d","56f":"y","57a":"w","57b":"2","57c":"n","57d":"u","57e":"y","57f":"un"};var str="";for(var i=0;i<val.length;i++){str+=map[val.charCodeAt(i).toString(16)]||"";}
return str.toLowerCase();}};NU.Url.routes={"day-home":"/dagvan/nu","day-article":"/dagvan/nu/<topic>/<id>/<slug>+).html","day-topic":"/dagvan/nu/<topic>","weather":"/weer","traffic":"/verkeer","train":"/trein","fuel":"/brandstof","stock":"/aandelen","stock-index":"/aandelen/<index_slug>","tvguide":"/tvgids","tvguide-channels":"/tvgids/zenders","tvguide-channel":"/tvgids/zenders/<channel_slug>","tvguide-primetime":"/tvgids/primetime","tvguide-movies":"/tvgids/films","webring":"/components/webring/<active>","component_video":"/components/video/<type>/<video_id>","component_weather":"/components/weather","component_traffic":"/components/traffic","component_train":"/components/train","component_fuel":"/components/fuel","component_stock":"/components/stock","component_stock-index":"/components/stock/<index_slug>","component_tvguide":"/components/tvguide","component_tvguide-channels":"/components/tvguide/channels","component_tvguide-channel":"/components/tvguide/channels/<channel_slug>","component_tvguide-primetime":"/components/tvguide/primetime","component_tvguide-movies":"/components/tvguide/movies","teletekst_listview":"/feeds/teletekst/101.xml","teletekst_pageview":"/feeds/teletekst/<page>).xml","search":"/zoeken","videopage":"/<pk>/video/<slug>.html","videoredirect":"/video-redirect/<type>/<video_id>","home":"/","results-football":"/resultaten/voetbal/<match_id>/<slug>.html","results-football.competition":"/resultaten/voetbal/competitie/<competition_id>/<slug>.html","results-football.competitions":"/resultaten/voetbal","live-football":"/live/voetbal","live-football-day":"/live/voetbal/<day_selector>","component_results-football":"/components/resultaten/voetbal/<match_id>/<slug>.html","component_results-football.competition":"/components/resultaten/voetbal/competitie/<competition_id>/<slug>.html","component_results-football.competitions":"/components/resultaten/voetbal","component_live-football":"/components/live/voetbal","component_live-football-day":"/components/live/voetbal/<day_selector>","deeplink_notfound":"/deeplink_[w]*","dossiers":"/dossiers","latestnews":"/net-binnen","mostread":"/meest-gelezen","advertorials":"/advertorials","fixture":"/test/<fixture>","copyright":"/copyright.html","disclaimer":"/disclaimer.html","privacy":"/privacy-en-cookiebeleid.html","conditions":"/algemene-voorwaarden.html","contact":"/contact.html","colofon":"/colofon.html","nu24":"/nu24.html","robots":"/robots.txt","notfound":"/404","tag":"/tag/<tag>","api_comet_servers":"/api/comet/servers","api_comet_channel":"/api/comet/channel","api_playlist_by_slug":"/api/playlists/slug/<playlist_slug>","api_config":"/api/config/<config_part>","block_html":"/block/<block>","block":"/block/<format>/<block>","vendor_content":"/vendor/<vendor_slug><vendor_uri>","article.redirect":"/<section>/<id>","article":"/<section>/<id>/<slug>+).html","article.preview":"/preview/<section>/<id>","article.advertorial":"/advertorial/<section>/<id>/<slug>+).html","rss":"/rss","rss.section":"/rss/<section>","monitor":"/monitor","monitor.php":"/monitor/monitor.php","cartoonlist":"/cartoon/<cartoon_slug>","cartoon":"/cartoon/<cartoon_slug>/<cartoon_date>/<cartoon_id>.html","slideshowlist":"/slideshow","slideshow":"/slideshow/<slideshow_id>.html","advertorial":"/advertorial/<section>","section":"/<section>","author":"/redactie/<author>","page":"/<page_slug>.html"};